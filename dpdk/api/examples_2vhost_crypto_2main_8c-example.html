<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: examples/vhost_crypto/main.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/vhost_crypto/main.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright(c) 2017-2018 Intel Corporation</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__malloc_8h.html">rte_malloc.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__cycles_8h.html">rte_cycles.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__vhost_8h.html">rte_vhost.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__cryptodev_8h.html">rte_cryptodev.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;rte_vhost_crypto.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__string__fns_8h.html">rte_string_fns.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cmdline_rdline.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmdline_parse.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cmdline_parse_string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="cmdline_8h.html">cmdline.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define NB_VIRTIO_QUEUES        (1)</span></div>
<div class="line"><span class="preprocessor">#define MAX_PKT_BURST           (64)</span></div>
<div class="line"><span class="preprocessor">#define MAX_IV_LEN          (32)</span></div>
<div class="line"><span class="preprocessor">#define NB_MEMPOOL_OBJS         (8192)</span></div>
<div class="line"><span class="preprocessor">#define NB_CRYPTO_DESCRIPTORS       (4096)</span></div>
<div class="line"><span class="preprocessor">#define NB_CACHE_OBJS           (128)</span></div>
<div class="line"><span class="preprocessor">#define SESSION_MAP_ENTRIES     (1024)</span></div>
<div class="line"><span class="preprocessor">#define REFRESH_TIME_SEC        (3)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MAX_NB_SOCKETS          (4)</span></div>
<div class="line"><span class="preprocessor">#define MAX_NB_WORKER_CORES     (16)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>lcore_option {</div>
<div class="line">    uint32_t lcore_id;</div>
<div class="line">    <span class="keywordtype">char</span> *socket_files[MAX_NB_SOCKETS];</div>
<div class="line">    uint32_t nb_sockets;</div>
<div class="line">    uint8_t cid;</div>
<div class="line">    uint16_t qid;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>vhost_crypto_info {</div>
<div class="line">    <span class="keywordtype">int</span> vids[MAX_NB_SOCKETS];</div>
<div class="line">    uint32_t nb_vids;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a0"></a><a class="code" href="structrte__mempool.html">rte_mempool</a> *sess_pool;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__mempool.html">rte_mempool</a> *sess_priv_pool;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__mempool.html">rte_mempool</a> *cop_pool;</div>
<div class="line">    uint8_t cid;</div>
<div class="line">    uint32_t qid;</div>
<div class="line">    uint32_t nb_inflight_ops;</div>
<div class="line">    <span class="keyword">volatile</span> uint32_t initialized[MAX_NB_SOCKETS];</div>
<div class="line">} <a name="a1"></a><a class="code" href="rte__common_8h.html#a38e32f822bc941e90fdcbe5a9c69b178">__rte_cache_aligned</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>vhost_crypto_options {</div>
<div class="line">    <span class="keyword">struct </span>lcore_option los[MAX_NB_WORKER_CORES];</div>
<div class="line">    <span class="keyword">struct </span>vhost_crypto_info *infos[MAX_NB_WORKER_CORES];</div>
<div class="line">    uint32_t nb_los;</div>
<div class="line">    uint32_t zero_copy;</div>
<div class="line">    uint32_t guest_polling;</div>
<div class="line">} options;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define CONFIG_KEYWORD      &quot;config&quot;</span></div>
<div class="line"><span class="preprocessor">#define SOCKET_FILE_KEYWORD &quot;socket-file&quot;</span></div>
<div class="line"><span class="preprocessor">#define ZERO_COPY_KEYWORD   &quot;zero-copy&quot;</span></div>
<div class="line"><span class="preprocessor">#define POLLING_KEYWORD     &quot;guest-polling&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define NB_SOCKET_FIELDS    (2)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint32_t</div>
<div class="line">find_lo(uint32_t lcore_id)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++)</div>
<div class="line">        <span class="keywordflow">if</span> (options.los[i].lcore_id == lcore_id)</div>
<div class="line">            <span class="keywordflow">return</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> UINT32_MAX;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parse_socket_arg(<span class="keywordtype">char</span> *arg)</div>
<div class="line">{</div>
<div class="line">    uint32_t nb_sockets;</div>
<div class="line">    uint32_t lcore_id;</div>
<div class="line">    <span class="keywordtype">char</span> *str_fld[NB_SOCKET_FIELDS];</div>
<div class="line">    <span class="keyword">struct </span>lcore_option *lo;</div>
<div class="line">    uint32_t idx;</div>
<div class="line">    <span class="keywordtype">char</span> *end;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a2"></a><a class="code" href="rte__string__fns_8h.html#af3ffc4e2ca821bc44f7fd08afbfe3638">rte_strsplit</a>(arg, strlen(arg), str_fld, NB_SOCKET_FIELDS, <span class="charliteral">&#39;,&#39;</span>) !=</div>
<div class="line">                NB_SOCKET_FIELDS) {</div>
<div class="line">        <a name="a3"></a><a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Invalid socket parameter &#39;%s&#39;\n&quot;</span>, arg);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    errno = 0;</div>
<div class="line">    lcore_id = strtoul(str_fld[0], &amp;end, 0);</div>
<div class="line">    <span class="keywordflow">if</span> (errno != 0 || end == str_fld[0] || lcore_id &gt; 255)</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    idx = find_lo(lcore_id);</div>
<div class="line">    <span class="keywordflow">if</span> (idx == UINT32_MAX) {</div>
<div class="line">        <span class="keywordflow">if</span> (options.nb_los == MAX_NB_WORKER_CORES)</div>
<div class="line">            <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line">        lo = &amp;options.los[options.nb_los];</div>
<div class="line">        lo-&gt;lcore_id = lcore_id;</div>
<div class="line">        options.nb_los++;</div>
<div class="line">    } <span class="keywordflow">else</span></div>
<div class="line">        lo = &amp;options.los[idx];</div>
<div class="line"> </div>
<div class="line">    nb_sockets = lo-&gt;nb_sockets;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (nb_sockets &gt;= MAX_NB_SOCKETS) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Too many socket files!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    lo-&gt;socket_files[nb_sockets] = strdup(str_fld[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (!lo-&gt;socket_files[nb_sockets]) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Insufficient memory\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    lo-&gt;nb_sockets++;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parse_config(<span class="keywordtype">char</span> *q_arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>lcore_option *lo;</div>
<div class="line">    <span class="keywordtype">char</span> s[256];</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *p0 = q_arg;</div>
<div class="line">    <span class="keywordtype">char</span> *end;</div>
<div class="line">    <span class="keyword">enum</span> fieldnames {</div>
<div class="line">        FLD_LCORE = 0,</div>
<div class="line">        FLD_CID,</div>
<div class="line">        FLD_QID,</div>
<div class="line">        _NUM_FLD</div>
<div class="line">    };</div>
<div class="line">    uint32_t flds[_NUM_FLD];</div>
<div class="line">    <span class="keywordtype">char</span> *str_fld[_NUM_FLD];</div>
<div class="line">    uint32_t i;</div>
<div class="line">    uint32_t size;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((p = strchr(p0, <span class="charliteral">&#39;(&#39;</span>)) != NULL) {</div>
<div class="line">        ++p;</div>
<div class="line">        p0 = strchr(p, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (p0 == NULL)</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">        size = p0 - p;</div>
<div class="line">        <span class="keywordflow">if</span> (size &gt;= <span class="keyword">sizeof</span>(s))</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">        snprintf(s, <span class="keyword">sizeof</span>(s), <span class="stringliteral">&quot;%.*s&quot;</span>, size, p);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="rte__string__fns_8h.html#af3ffc4e2ca821bc44f7fd08afbfe3638">rte_strsplit</a>(s, <span class="keyword">sizeof</span>(s), str_fld, _NUM_FLD, <span class="charliteral">&#39;,&#39;</span>) !=</div>
<div class="line">                _NUM_FLD)</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; _NUM_FLD; i++) {</div>
<div class="line">            errno = 0;</div>
<div class="line">            flds[i] = strtoul(str_fld[i], &amp;end, 0);</div>
<div class="line">            <span class="keywordflow">if</span> (errno != 0 || end == str_fld[i] || flds[i] &gt; 255)</div>
<div class="line">                <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (flds[FLD_LCORE] &gt; RTE_MAX_LCORE)</div>
<div class="line">            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">        i = find_lo(flds[FLD_LCORE]);</div>
<div class="line">        <span class="keywordflow">if</span> (i == UINT32_MAX) {</div>
<div class="line">            <span class="keywordflow">if</span> (options.nb_los == MAX_NB_WORKER_CORES)</div>
<div class="line">                <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line">            lo = &amp;options.los[options.nb_los];</div>
<div class="line">            options.nb_los++;</div>
<div class="line">        } <span class="keywordflow">else</span></div>
<div class="line">            lo = &amp;options.los[i];</div>
<div class="line"> </div>
<div class="line">        lo-&gt;lcore_id = flds[FLD_LCORE];</div>
<div class="line">        lo-&gt;cid = flds[FLD_CID];</div>
<div class="line">        lo-&gt;qid = flds[FLD_QID];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">vhost_crypto_usage(<span class="keyword">const</span> <span class="keywordtype">char</span> *prgname)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;%s [EAL options] --\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --%s &lt;lcore&gt;,SOCKET-FILE-PATH\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --%s (lcore,cdev_id,queue_id)[,(lcore,cdev_id,queue_id)]\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --%s: zero copy\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --%s: guest polling\n&quot;</span>,</div>
<div class="line">        prgname, SOCKET_FILE_KEYWORD, CONFIG_KEYWORD,</div>
<div class="line">        ZERO_COPY_KEYWORD, POLLING_KEYWORD);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">vhost_crypto_parse_args(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> opt, ret;</div>
<div class="line">    <span class="keywordtype">char</span> *prgname = argv[0];</div>
<div class="line">    <span class="keywordtype">char</span> **argvopt;</div>
<div class="line">    <span class="keywordtype">int</span> option_index;</div>
<div class="line">    <span class="keyword">struct </span>option lgopts[] = {</div>
<div class="line">            {SOCKET_FILE_KEYWORD, required_argument, 0, 0},</div>
<div class="line">            {CONFIG_KEYWORD, required_argument, 0, 0},</div>
<div class="line">            {ZERO_COPY_KEYWORD, no_argument, 0, 0},</div>
<div class="line">            {POLLING_KEYWORD, no_argument, 0, 0},</div>
<div class="line">            {NULL, 0, 0, 0}</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    argvopt = argv;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((opt = getopt_long(argc, argvopt, <span class="stringliteral">&quot;s:&quot;</span>,</div>
<div class="line">                  lgopts, &amp;option_index)) != EOF) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">        <span class="keywordflow">case</span> 0:</div>
<div class="line">            <span class="keywordflow">if</span> (strcmp(lgopts[option_index].name,</div>
<div class="line">                    SOCKET_FILE_KEYWORD) == 0) {</div>
<div class="line">                ret = parse_socket_arg(optarg);</div>
<div class="line">                <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                    vhost_crypto_usage(prgname);</div>
<div class="line">                    <span class="keywordflow">return</span> ret;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(lgopts[option_index].name,</div>
<div class="line">                    CONFIG_KEYWORD) == 0) {</div>
<div class="line">                ret = parse_config(optarg);</div>
<div class="line">                <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                    vhost_crypto_usage(prgname);</div>
<div class="line">                    <span class="keywordflow">return</span> ret;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(lgopts[option_index].name,</div>
<div class="line">                    ZERO_COPY_KEYWORD) == 0) {</div>
<div class="line">                options.zero_copy =</div>
<div class="line">                    RTE_VHOST_CRYPTO_ZERO_COPY_ENABLE;</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(lgopts[option_index].name,</div>
<div class="line">                    POLLING_KEYWORD) == 0) {</div>
<div class="line">                options.guest_polling = 1;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                vhost_crypto_usage(prgname);</div>
<div class="line">                <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">new_device(<span class="keywordtype">int</span> vid)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>vhost_crypto_info *info = NULL;</div>
<div class="line">    <span class="keywordtype">char</span> path[PATH_MAX];</div>
<div class="line">    uint32_t i, j;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a4"></a><a class="code" href="rte__vhost_8h.html#a16848dac4304c973b24ced868ac3add8">rte_vhost_get_ifname</a>(vid, path, PATH_MAX);</div>
<div class="line">    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot find matched socket\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; options.los[i].nb_sockets; j++) {</div>
<div class="line">            <span class="keywordflow">if</span> (strcmp(path, options.los[i].socket_files[j]) == 0) {</div>
<div class="line">                info = options.infos[i];</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (info)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!info) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot find recorded socket\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -ENOENT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = rte_vhost_crypto_create(vid, info-&gt;cid, info-&gt;sess_pool,</div>
<div class="line">            info-&gt;sess_priv_pool,</div>
<div class="line">            <a name="a5"></a><a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(options.los[i].lcore_id));</div>
<div class="line">    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot create vhost crypto\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = rte_vhost_crypto_set_zero_copy(vid, options.zero_copy);</div>
<div class="line">    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot %s zero copy feature\n&quot;</span>,</div>
<div class="line">                options.zero_copy == 1 ? <span class="stringliteral">&quot;enable&quot;</span> : <span class="stringliteral">&quot;disable&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    info-&gt;vids[j] = vid;</div>
<div class="line">    info-&gt;initialized[j] = 1;</div>
<div class="line"> </div>
<div class="line">    <a name="a6"></a><a class="code" href="rte__atomic_8h.html#ab3957283ac057c267b2dc4947479cb70">rte_wmb</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(INFO, USER1, <span class="stringliteral">&quot;New Vhost-crypto Device %s, Device ID %d\n&quot;</span>, path,</div>
<div class="line">            vid);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">destroy_device(<span class="keywordtype">int</span> vid)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>vhost_crypto_info *info = NULL;</div>
<div class="line">    uint32_t i, j;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++) {</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; options.los[i].nb_sockets; j++) {</div>
<div class="line">            <span class="keywordflow">if</span> (options.infos[i]-&gt;vids[j] == vid) {</div>
<div class="line">                info = options.infos[i];</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (info)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!info) {</div>
<div class="line">        <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot find socket file from list\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span> (info-&gt;nb_inflight_ops);</div>
<div class="line"> </div>
<div class="line">    info-&gt;initialized[j] = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__atomic_8h.html#ab3957283ac057c267b2dc4947479cb70">rte_wmb</a>();</div>
<div class="line"> </div>
<div class="line">    rte_vhost_crypto_free(vid);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(INFO, USER1, <span class="stringliteral">&quot;Vhost Crypto Device %i Removed\n&quot;</span>, vid);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a name="_a7"></a><a class="code" href="structvhost__device__ops.html">vhost_device_ops</a> virtio_crypto_device_ops = {</div>
<div class="line">    .<a name="a8"></a><a class="code" href="structvhost__device__ops.html#a4395345b85225cd12bf33d36ac089f63">new_device</a> =  <a class="code" href="structvhost__device__ops.html#a4395345b85225cd12bf33d36ac089f63">new_device</a>,</div>
<div class="line">    .destroy_device = <a name="a9"></a><a class="code" href="structvhost__device__ops.html#adbd762e64dae12b68686afcf873cd808">destroy_device</a>,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">vhost_crypto_worker(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a10"></a><a class="code" href="structrte__crypto__op.html">rte_crypto_op</a> *ops[NB_VIRTIO_QUEUES][MAX_PKT_BURST + 1];</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__crypto__op.html">rte_crypto_op</a> *ops_deq[NB_VIRTIO_QUEUES][MAX_PKT_BURST + 1];</div>
<div class="line">    <span class="keyword">struct </span>vhost_crypto_info *info = arg;</div>
<div class="line">    uint16_t nb_callfds;</div>
<div class="line">    <span class="keywordtype">int</span> callfds[VIRTIO_CRYPTO_MAX_NUM_BURST_VQS];</div>
<div class="line">    uint32_t lcore_id = <a name="a11"></a><a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>();</div>
<div class="line">    uint32_t burst_size = MAX_PKT_BURST;</div>
<div class="line">    uint32_t i, j, k;</div>
<div class="line">    uint32_t to_fetch, fetched;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(INFO, USER1, <span class="stringliteral">&quot;Processing on Core %u started\n&quot;</span>, lcore_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; NB_VIRTIO_QUEUES; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a12"></a><a class="code" href="rte__crypto_8h.html#a31a63194763a5a9e689170becddc3ae6">rte_crypto_op_bulk_alloc</a>(info-&gt;cop_pool,</div>
<div class="line">                <a name="a13"></a><a class="code" href="rte__crypto_8h.html#ae6cf2c3fcd46c5ef3a43fbcb8b658739a33144a5991d4b9aaa43adb9748a067fc">RTE_CRYPTO_OP_TYPE_SYMMETRIC</a>, ops[i],</div>
<div class="line">                burst_size) &lt; burst_size) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to alloc cops\n&quot;</span>);</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">goto</span> exit;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; info-&gt;nb_vids; i++) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a14"></a><a class="code" href="rte__branch__prediction_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(info-&gt;initialized[i] == 0))</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (j = 0; j &lt; NB_VIRTIO_QUEUES; j++) {</div>
<div class="line">                to_fetch = <a name="a15"></a><a class="code" href="rte__common_8h.html#a4c7571cbcdbfe9b63431036af811bee9">RTE_MIN</a>(burst_size,</div>
<div class="line">                        (NB_CRYPTO_DESCRIPTORS -</div>
<div class="line">                        info-&gt;nb_inflight_ops));</div>
<div class="line">                fetched = rte_vhost_crypto_fetch_requests(</div>
<div class="line">                        info-&gt;vids[i], j, ops[j],</div>
<div class="line">                        to_fetch);</div>
<div class="line">                info-&gt;nb_inflight_ops +=</div>
<div class="line">                        <a name="a16"></a><a class="code" href="rte__cryptodev_8h.html#a1e1336b0a8fe381ea03a52bad85e5734">rte_cryptodev_enqueue_burst</a>(</div>
<div class="line">                        info-&gt;cid, info-&gt;qid, ops[j],</div>
<div class="line">                        fetched);</div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="rte__branch__prediction_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(<a class="code" href="rte__crypto_8h.html#a31a63194763a5a9e689170becddc3ae6">rte_crypto_op_bulk_alloc</a>(</div>
<div class="line">                        info-&gt;cop_pool,</div>
<div class="line">                        <a class="code" href="rte__crypto_8h.html#ae6cf2c3fcd46c5ef3a43fbcb8b658739a33144a5991d4b9aaa43adb9748a067fc">RTE_CRYPTO_OP_TYPE_SYMMETRIC</a>,</div>
<div class="line">                        ops[j], fetched) &lt; fetched)) {</div>
<div class="line">                    <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed realloc\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                fetched = <a name="a17"></a><a class="code" href="rte__cryptodev_8h.html#a0032857587ce7e217b8c10ba392bef56">rte_cryptodev_dequeue_burst</a>(</div>
<div class="line">                        info-&gt;cid, info-&gt;qid,</div>
<div class="line">                        ops_deq[j], <a class="code" href="rte__common_8h.html#a4c7571cbcdbfe9b63431036af811bee9">RTE_MIN</a>(burst_size,</div>
<div class="line">                        info-&gt;nb_inflight_ops));</div>
<div class="line">                fetched = rte_vhost_crypto_finalize_requests(</div>
<div class="line">                        ops_deq[j], fetched, callfds,</div>
<div class="line">                        &amp;nb_callfds);</div>
<div class="line"> </div>
<div class="line">                info-&gt;nb_inflight_ops -= fetched;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (!options.guest_polling) {</div>
<div class="line">                    <span class="keywordflow">for</span> (k = 0; k &lt; nb_callfds; k++)</div>
<div class="line">                        eventfd_write(callfds[k],</div>
<div class="line">                                (eventfd_t)1);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <a name="a18"></a><a class="code" href="rte__mempool_8h.html#a5e46fc827d764e516e8ff0c3f00e33fc">rte_mempool_put_bulk</a>(info-&gt;cop_pool,</div>
<div class="line">                        (<span class="keywordtype">void</span> **)ops_deq[j], fetched);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">exit:</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">free_resource(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    uint32_t i, j;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++) {</div>
<div class="line">        <span class="keyword">struct </span>lcore_option *lo = &amp;options.los[i];</div>
<div class="line">        <span class="keyword">struct </span>vhost_crypto_info *info = options.infos[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!info)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <a name="a19"></a><a class="code" href="rte__mempool_8h.html#a35271bce2d546e116074803fd69376e9">rte_mempool_free</a>(info-&gt;cop_pool);</div>
<div class="line">        <a class="code" href="rte__mempool_8h.html#a35271bce2d546e116074803fd69376e9">rte_mempool_free</a>(info-&gt;sess_pool);</div>
<div class="line">        <a class="code" href="rte__mempool_8h.html#a35271bce2d546e116074803fd69376e9">rte_mempool_free</a>(info-&gt;sess_priv_pool);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; lo-&gt;nb_sockets; j++) {</div>
<div class="line">            rte_vhost_driver_unregister(lo-&gt;socket_files[i]);</div>
<div class="line">            free(lo-&gt;socket_files[i]);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a20"></a><a class="code" href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a>(info);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(&amp;options, 0, <span class="keyword">sizeof</span>(options));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a21"></a><a class="code" href="structrte__cryptodev__qp__conf.html">rte_cryptodev_qp_conf</a> qp_conf;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a22"></a><a class="code" href="structrte__cryptodev__config.html">rte_cryptodev_config</a> config;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a23"></a><a class="code" href="structrte__cryptodev__info.html">rte_cryptodev_info</a> dev_info;</div>
<div class="line">    <span class="keywordtype">char</span> name[128];</div>
<div class="line">    uint32_t i, j, lcore;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a24"></a><a class="code" href="rte__eal_8h.html#a5c3f4dddc25e38c5a186ecd8a69260e3">rte_eal_init</a>(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    argc -= ret;</div>
<div class="line">    argv += ret;</div>
<div class="line"> </div>
<div class="line">    ret = vhost_crypto_parse_args(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <a name="a25"></a><a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;Failed to parse arguments!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++) {</div>
<div class="line">        <span class="keyword">struct </span>lcore_option *lo = &amp;options.los[i];</div>
<div class="line">        <span class="keyword">struct </span>vhost_crypto_info *info;</div>
<div class="line"> </div>
<div class="line">        info = <a name="a26"></a><a class="code" href="rte__malloc_8h.html#a7e9f76b7e0b0921a617c6ab8b28f53b3">rte_zmalloc_socket</a>(NULL, <span class="keyword">sizeof</span>(*info),</div>
<div class="line">                RTE_CACHE_LINE_SIZE, <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(</div>
<div class="line">                        lo-&gt;lcore_id));</div>
<div class="line">        <span class="keywordflow">if</span> (!info) {</div>
<div class="line">            ret = -ENOMEM;</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        info-&gt;cid = lo-&gt;cid;</div>
<div class="line">        info-&gt;qid = lo-&gt;qid;</div>
<div class="line">        info-&gt;nb_vids = lo-&gt;nb_sockets;</div>
<div class="line"> </div>
<div class="line">        <a name="a27"></a><a class="code" href="rte__cryptodev_8h.html#aeb677c03cea6fcc48a8caa533e3729f9">rte_cryptodev_info_get</a>(info-&gt;cid, &amp;dev_info);</div>
<div class="line">        <span class="keywordflow">if</span> (options.zero_copy == RTE_VHOST_CRYPTO_ZERO_COPY_ENABLE) {</div>
<div class="line"><span class="preprocessor">#define VHOST_CRYPTO_CDEV_NAME_AESNI_MB_PMD crypto_aesni_mb</span></div>
<div class="line"><span class="preprocessor">#define VHOST_CRYPTO_CDEV_NAME_AESNI_GCM_PMD    crypto_aesni_gcm</span></div>
<div class="line">            <span class="keywordflow">if</span> (strstr(dev_info.driver_name,</div>
<div class="line">                <a name="a28"></a><a class="code" href="rte__common_8h.html#a5927969541336891eabfcc9b685fa50b">RTE_STR</a>(VHOST_CRYPTO_CDEV_NAME_AESNI_MB_PMD)) ||</div>
<div class="line">                strstr(dev_info.driver_name,</div>
<div class="line">                <a class="code" href="rte__common_8h.html#a5927969541336891eabfcc9b685fa50b">RTE_STR</a>(VHOST_CRYPTO_CDEV_NAME_AESNI_GCM_PMD))) {</div>
<div class="line">                <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Cannot enable zero-copy in %s\n&quot;</span>,</div>
<div class="line">                    dev_info.driver_name);</div>
<div class="line">                ret = -EPERM;</div>
<div class="line">                <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (dev_info.max_nb_queue_pairs &lt; info-&gt;qid + 1) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Number of queues cannot over %u&quot;</span>,</div>
<div class="line">                    dev_info.max_nb_queue_pairs);</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        config.nb_queue_pairs = dev_info.max_nb_queue_pairs;</div>
<div class="line">        config.socket_id = <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(lo-&gt;lcore_id);</div>
<div class="line">        config.ff_disable = <a name="a29"></a><a class="code" href="rte__cryptodev_8h.html#a1ffaab4a2885220015c21d9bc6f05808">RTE_CRYPTODEV_FF_SECURITY</a>;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a30"></a><a class="code" href="rte__cryptodev_8h.html#a58207367533ac9e65e4a611ba78090e5">rte_cryptodev_configure</a>(info-&gt;cid, &amp;config);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to configure cryptodev %u&quot;</span>,</div>
<div class="line">                    info-&gt;cid);</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        snprintf(name, 127, <span class="stringliteral">&quot;SESS_POOL_%u&quot;</span>, lo-&gt;lcore_id);</div>
<div class="line">        info-&gt;sess_pool = <a name="a31"></a><a class="code" href="rte__cryptodev_8h.html#ac86bc0178d39db9734c594c35f9aee4e">rte_cryptodev_sym_session_pool_create</a>(name,</div>
<div class="line">                SESSION_MAP_ENTRIES, 0, 0, 0,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(lo-&gt;lcore_id));</div>
<div class="line"> </div>
<div class="line">        snprintf(name, 127, <span class="stringliteral">&quot;SESS_POOL_PRIV_%u&quot;</span>, lo-&gt;lcore_id);</div>
<div class="line">        info-&gt;sess_priv_pool = <a name="a32"></a><a class="code" href="rte__mempool_8h.html#a503f2f889043a48ca9995878846db2fd">rte_mempool_create</a>(name,</div>
<div class="line">                SESSION_MAP_ENTRIES,</div>
<div class="line">                <a name="a33"></a><a class="code" href="rte__cryptodev_8h.html#a34a54ae38920d21d95aa6049640e8c0e">rte_cryptodev_sym_get_private_session_size</a>(</div>
<div class="line">                info-&gt;cid), 64, 0, NULL, NULL, NULL, NULL,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(lo-&gt;lcore_id), 0);</div>
<div class="line">        <span class="keywordflow">if</span> (!info-&gt;sess_priv_pool || !info-&gt;sess_pool) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to create mempool&quot;</span>);</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        snprintf(name, 127, <span class="stringliteral">&quot;COPPOOL_%u&quot;</span>, lo-&gt;lcore_id);</div>
<div class="line">        info-&gt;cop_pool = <a name="a34"></a><a class="code" href="rte__crypto_8h.html#aa3035c7b271a4736dc9654b2eb85d1fd">rte_crypto_op_pool_create</a>(name,</div>
<div class="line">                <a class="code" href="rte__crypto_8h.html#ae6cf2c3fcd46c5ef3a43fbcb8b658739a33144a5991d4b9aaa43adb9748a067fc">RTE_CRYPTO_OP_TYPE_SYMMETRIC</a>, NB_MEMPOOL_OBJS,</div>
<div class="line">                NB_CACHE_OBJS, VHOST_CRYPTO_MAX_IV_LEN,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(lo-&gt;lcore_id));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!info-&gt;cop_pool) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to create crypto pool&quot;</span>);</div>
<div class="line">            ret = -ENOMEM;</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        options.infos[i] = info;</div>
<div class="line"> </div>
<div class="line">        qp_conf.nb_descriptors = NB_CRYPTO_DESCRIPTORS;</div>
<div class="line">        qp_conf.mp_session = info-&gt;sess_pool;</div>
<div class="line">        qp_conf.mp_session_private = info-&gt;sess_priv_pool;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; dev_info.max_nb_queue_pairs; j++) {</div>
<div class="line">            ret = <a name="a35"></a><a class="code" href="rte__cryptodev_8h.html#ae4388e0326c8789ddf39e32044dc4187">rte_cryptodev_queue_pair_setup</a>(info-&gt;cid, j,</div>
<div class="line">                    &amp;qp_conf, <a class="code" href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a>(</div>
<div class="line">                            lo-&gt;lcore_id));</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to configure qp\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; options.nb_los; i++) {</div>
<div class="line">        <span class="keyword">struct </span>lcore_option *lo = &amp;options.los[i];</div>
<div class="line">        <span class="keyword">struct </span>vhost_crypto_info *info = options.infos[i];</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a36"></a><a class="code" href="rte__cryptodev_8h.html#a1fa401bd6c01129823669ac68deaa993">rte_cryptodev_start</a>(lo-&gt;cid);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to start cryptodev\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a37"></a><a class="code" href="rte__launch_8h.html#a2bf98eda211728b3dc69aa7694758c6d">rte_eal_remote_launch</a>(vhost_crypto_worker, info,</div>
<div class="line">                lo-&gt;lcore_id) &lt; 0) {</div>
<div class="line">            <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;Failed to start worker lcore&quot;</span>);</div>
<div class="line">            <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; lo-&gt;nb_sockets; j++) {</div>
<div class="line">            ret = <a name="a38"></a><a class="code" href="rte__vhost_8h.html#a8a3ce366de790a49a0b64f1d7e42eea6">rte_vhost_driver_register</a>(lo-&gt;socket_files[j],</div>
<div class="line">                RTE_VHOST_USER_ASYNC_COPY);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;socket %s already exists\n&quot;</span>,</div>
<div class="line">                    lo-&gt;socket_files[j]);</div>
<div class="line">                <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            rte_vhost_driver_callback_register(lo-&gt;socket_files[j],</div>
<div class="line">                &amp;virtio_crypto_device_ops);</div>
<div class="line"> </div>
<div class="line">            ret = rte_vhost_crypto_driver_start(</div>
<div class="line">                    lo-&gt;socket_files[j]);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0)  {</div>
<div class="line">                <a class="code" href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a>(ERR, USER1, <span class="stringliteral">&quot;failed to start vhost.\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">goto</span> error_exit;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a39"></a><a class="code" href="rte__lcore_8h.html#a034c95b6412f09e8de11d430267dc1ba">RTE_LCORE_FOREACH</a>(lcore)</div>
<div class="line">        <a name="a40"></a><a class="code" href="rte__launch_8h.html#ae9500e1d35bd4cfb95d18c0be863cb1e">rte_eal_wait_lcore</a>(lcore);</div>
<div class="line"> </div>
<div class="line">    free_resource();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">error_exit:</div>
<div class="line"> </div>
<div class="line">    free_resource();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="astructvhost__device__ops_html_a4395345b85225cd12bf33d36ac089f63"><div class="ttname"><a href="structvhost__device__ops.html#a4395345b85225cd12bf33d36ac089f63">vhost_device_ops::new_device</a></div><div class="ttdeci">int(* new_device)(int vid)</div><div class="ttdef"><b>Definition:</b> <a href="rte__vhost_8h_source.html#l00267">rte_vhost.h:267</a></div></div>
<div class="ttc" id="astructrte__cryptodev__info_html"><div class="ttname"><a href="structrte__cryptodev__info.html">rte_cryptodev_info</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00477">rte_cryptodev.h:477</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a0032857587ce7e217b8c10ba392bef56"><div class="ttname"><a href="rte__cryptodev_8h.html#a0032857587ce7e217b8c10ba392bef56">rte_cryptodev_dequeue_burst</a></div><div class="ttdeci">static uint16_t rte_cryptodev_dequeue_burst(uint8_t dev_id, uint16_t qp_id, struct rte_crypto_op **ops, uint16_t nb_ops)</div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00943">rte_cryptodev.h:943</a></div></div>
<div class="ttc" id="arte__vhost_8h_html_a8a3ce366de790a49a0b64f1d7e42eea6"><div class="ttname"><a href="rte__vhost_8h.html#a8a3ce366de790a49a0b64f1d7e42eea6">rte_vhost_driver_register</a></div><div class="ttdeci">int rte_vhost_driver_register(const char *path, uint64_t flags)</div></div>
<div class="ttc" id="arte__mempool_8h_html_a35271bce2d546e116074803fd69376e9"><div class="ttname"><a href="rte__mempool_8h.html#a35271bce2d546e116074803fd69376e9">rte_mempool_free</a></div><div class="ttdeci">void rte_mempool_free(struct rte_mempool *mp)</div></div>
<div class="ttc" id="arte__vhost_8h_html"><div class="ttname"><a href="rte__vhost_8h.html">rte_vhost.h</a></div></div>
<div class="ttc" id="arte__malloc_8h_html"><div class="ttname"><a href="rte__malloc_8h.html">rte_malloc.h</a></div></div>
<div class="ttc" id="arte__crypto_8h_html_a31a63194763a5a9e689170becddc3ae6"><div class="ttname"><a href="rte__crypto_8h.html#a31a63194763a5a9e689170becddc3ae6">rte_crypto_op_bulk_alloc</a></div><div class="ttdeci">static unsigned rte_crypto_op_bulk_alloc(struct rte_mempool *mempool, enum rte_crypto_op_type type, struct rte_crypto_op **ops, uint16_t nb_ops)</div><div class="ttdef"><b>Definition:</b> <a href="rte__crypto_8h_source.html#l00276">rte_crypto.h:276</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a1e1336b0a8fe381ea03a52bad85e5734"><div class="ttname"><a href="rte__cryptodev_8h.html#a1e1336b0a8fe381ea03a52bad85e5734">rte_cryptodev_enqueue_burst</a></div><div class="ttdeci">static uint16_t rte_cryptodev_enqueue_burst(uint8_t dev_id, uint16_t qp_id, struct rte_crypto_op **ops, uint16_t nb_ops)</div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00987">rte_cryptodev.h:987</a></div></div>
<div class="ttc" id="arte__branch__prediction_8h_html_ac6c45889010c1bd68631771b64f18101"><div class="ttname"><a href="rte__branch__prediction_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a></div><div class="ttdeci">#define unlikely(x)</div><div class="ttdef"><b>Definition:</b> <a href="rte__branch__prediction_8h_source.html#l00038">rte_branch_prediction.h:38</a></div></div>
<div class="ttc" id="arte__mempool_8h_html_a503f2f889043a48ca9995878846db2fd"><div class="ttname"><a href="rte__mempool_8h.html#a503f2f889043a48ca9995878846db2fd">rte_mempool_create</a></div><div class="ttdeci">struct rte_mempool * rte_mempool_create(const char *name, unsigned n, unsigned elt_size, unsigned cache_size, unsigned private_data_size, rte_mempool_ctor_t *mp_init, void *mp_init_arg, rte_mempool_obj_cb_t *obj_init, void *obj_init_arg, int socket_id, unsigned flags)</div></div>
<div class="ttc" id="arte__cryptodev_8h_html_aeb677c03cea6fcc48a8caa533e3729f9"><div class="ttname"><a href="rte__cryptodev_8h.html#aeb677c03cea6fcc48a8caa533e3729f9">rte_cryptodev_info_get</a></div><div class="ttdeci">void rte_cryptodev_info_get(uint8_t dev_id, struct rte_cryptodev_info *dev_info)</div></div>
<div class="ttc" id="arte__lcore_8h_html_a034c95b6412f09e8de11d430267dc1ba"><div class="ttname"><a href="rte__lcore_8h.html#a034c95b6412f09e8de11d430267dc1ba">RTE_LCORE_FOREACH</a></div><div class="ttdeci">#define RTE_LCORE_FOREACH(i)</div><div class="ttdef"><b>Definition:</b> <a href="rte__lcore_8h_source.html#l00231">rte_lcore.h:231</a></div></div>
<div class="ttc" id="arte__string__fns_8h_html_af3ffc4e2ca821bc44f7fd08afbfe3638"><div class="ttname"><a href="rte__string__fns_8h.html#af3ffc4e2ca821bc44f7fd08afbfe3638">rte_strsplit</a></div><div class="ttdeci">int rte_strsplit(char *string, int stringlen, char **tokens, int maxtokens, char delim)</div></div>
<div class="ttc" id="arte__cryptodev_8h_html_ac86bc0178d39db9734c594c35f9aee4e"><div class="ttname"><a href="rte__cryptodev_8h.html#ac86bc0178d39db9734c594c35f9aee4e">rte_cryptodev_sym_session_pool_create</a></div><div class="ttdeci">__rte_experimental struct rte_mempool * rte_cryptodev_sym_session_pool_create(const char *name, uint32_t nb_elts, uint32_t elt_size, uint32_t cache_size, uint16_t priv_size, int socket_id)</div></div>
<div class="ttc" id="arte__string__fns_8h_html"><div class="ttname"><a href="rte__string__fns_8h.html">rte_string_fns.h</a></div></div>
<div class="ttc" id="arte__common_8h_html_a38e32f822bc941e90fdcbe5a9c69b178"><div class="ttname"><a href="rte__common_8h.html#a38e32f822bc941e90fdcbe5a9c69b178">__rte_cache_aligned</a></div><div class="ttdeci">#define __rte_cache_aligned</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00400">rte_common.h:400</a></div></div>
<div class="ttc" id="arte__crypto_8h_html_aa3035c7b271a4736dc9654b2eb85d1fd"><div class="ttname"><a href="rte__crypto_8h.html#aa3035c7b271a4736dc9654b2eb85d1fd">rte_crypto_op_pool_create</a></div><div class="ttdeci">struct rte_mempool * rte_crypto_op_pool_create(const char *name, enum rte_crypto_op_type type, unsigned nb_elts, unsigned cache_size, uint16_t priv_size, int socket_id)</div></div>
<div class="ttc" id="astructvhost__device__ops_html_adbd762e64dae12b68686afcf873cd808"><div class="ttname"><a href="structvhost__device__ops.html#adbd762e64dae12b68686afcf873cd808">vhost_device_ops::destroy_device</a></div><div class="ttdeci">void(* destroy_device)(int vid)</div><div class="ttdef"><b>Definition:</b> <a href="rte__vhost_8h_source.html#l00268">rte_vhost.h:268</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html"><div class="ttname"><a href="rte__cryptodev_8h.html">rte_cryptodev.h</a></div></div>
<div class="ttc" id="arte__lcore_8h_html_a023b4909f52c3cdf0351d71d2b5032bc"><div class="ttname"><a href="rte__lcore_8h.html#a023b4909f52c3cdf0351d71d2b5032bc">rte_lcore_to_socket_id</a></div><div class="ttdeci">unsigned int rte_lcore_to_socket_id(unsigned int lcore_id)</div></div>
<div class="ttc" id="arte__cryptodev_8h_html_ae4388e0326c8789ddf39e32044dc4187"><div class="ttname"><a href="rte__cryptodev_8h.html#ae4388e0326c8789ddf39e32044dc4187">rte_cryptodev_queue_pair_setup</a></div><div class="ttdeci">int rte_cryptodev_queue_pair_setup(uint8_t dev_id, uint16_t queue_pair_id, const struct rte_cryptodev_qp_conf *qp_conf, int socket_id)</div></div>
<div class="ttc" id="astructrte__cryptodev__qp__conf_html"><div class="ttname"><a href="structrte__cryptodev__qp__conf.html">rte_cryptodev_qp_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00517">rte_cryptodev.h:517</a></div></div>
<div class="ttc" id="astructrte__crypto__op_html"><div class="ttname"><a href="structrte__crypto__op.html">rte_crypto_op</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__crypto_8h_source.html#l00078">rte_crypto.h:78</a></div></div>
<div class="ttc" id="arte__common_8h_html_ac5169870c983b3463cb226bdb8a94880"><div class="ttname"><a href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a></div><div class="ttdeci">__rte_noreturn void rte_exit(int exit_code, const char *format,...) __rte_format_printf(2</div></div>
<div class="ttc" id="arte__vhost_8h_html_a16848dac4304c973b24ced868ac3add8"><div class="ttname"><a href="rte__vhost_8h.html#a16848dac4304c973b24ced868ac3add8">rte_vhost_get_ifname</a></div><div class="ttdeci">int rte_vhost_get_ifname(int vid, char *buf, size_t len)</div></div>
<div class="ttc" id="arte__lcore_8h_html_adfb2b334e7e73f534f25e8888a8a775f"><div class="ttname"><a href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a></div><div class="ttdeci">static unsigned rte_lcore_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="rte__lcore_8h_source.html#l00075">rte_lcore.h:75</a></div></div>
<div class="ttc" id="arte__cycles_8h_html"><div class="ttname"><a href="rte__cycles_8h.html">rte_cycles.h</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a58207367533ac9e65e4a611ba78090e5"><div class="ttname"><a href="rte__cryptodev_8h.html#a58207367533ac9e65e4a611ba78090e5">rte_cryptodev_configure</a></div><div class="ttdeci">int rte_cryptodev_configure(uint8_t dev_id, struct rte_cryptodev_config *config)</div></div>
<div class="ttc" id="arte__common_8h_html_a4c7571cbcdbfe9b63431036af811bee9"><div class="ttname"><a href="rte__common_8h.html#a4c7571cbcdbfe9b63431036af811bee9">RTE_MIN</a></div><div class="ttdeci">#define RTE_MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00573">rte_common.h:573</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a34a54ae38920d21d95aa6049640e8c0e"><div class="ttname"><a href="rte__cryptodev_8h.html#a34a54ae38920d21d95aa6049640e8c0e">rte_cryptodev_sym_get_private_session_size</a></div><div class="ttdeci">unsigned int rte_cryptodev_sym_get_private_session_size(uint8_t dev_id)</div></div>
<div class="ttc" id="astructvhost__device__ops_html"><div class="ttname"><a href="structvhost__device__ops.html">vhost_device_ops</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__vhost_8h_source.html#l00266">rte_vhost.h:266</a></div></div>
<div class="ttc" id="arte__launch_8h_html_a2bf98eda211728b3dc69aa7694758c6d"><div class="ttname"><a href="rte__launch_8h.html#a2bf98eda211728b3dc69aa7694758c6d">rte_eal_remote_launch</a></div><div class="ttdeci">int rte_eal_remote_launch(lcore_function_t *f, void *arg, unsigned worker_id)</div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a1fa401bd6c01129823669ac68deaa993"><div class="ttname"><a href="rte__cryptodev_8h.html#a1fa401bd6c01129823669ac68deaa993">rte_cryptodev_start</a></div><div class="ttdeci">int rte_cryptodev_start(uint8_t dev_id)</div></div>
<div class="ttc" id="arte__eal_8h_html_a5c3f4dddc25e38c5a186ecd8a69260e3"><div class="ttname"><a href="rte__eal_8h.html#a5c3f4dddc25e38c5a186ecd8a69260e3">rte_eal_init</a></div><div class="ttdeci">int rte_eal_init(int argc, char **argv)</div></div>
<div class="ttc" id="astructrte__mempool_html"><div class="ttname"><a href="structrte__mempool.html">rte_mempool</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__mempool_8h_source.html#l00207">rte_mempool.h:207</a></div></div>
<div class="ttc" id="arte__crypto_8h_html_ae6cf2c3fcd46c5ef3a43fbcb8b658739a33144a5991d4b9aaa43adb9748a067fc"><div class="ttname"><a href="rte__crypto_8h.html#ae6cf2c3fcd46c5ef3a43fbcb8b658739a33144a5991d4b9aaa43adb9748a067fc">RTE_CRYPTO_OP_TYPE_SYMMETRIC</a></div><div class="ttdeci">@ RTE_CRYPTO_OP_TYPE_SYMMETRIC</div><div class="ttdef"><b>Definition:</b> <a href="rte__crypto_8h_source.html#l00033">rte_crypto.h:32</a></div></div>
<div class="ttc" id="arte__common_8h_html_a5927969541336891eabfcc9b685fa50b"><div class="ttname"><a href="rte__common_8h.html#a5927969541336891eabfcc9b685fa50b">RTE_STR</a></div><div class="ttdeci">#define RTE_STR(x)</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00793">rte_common.h:793</a></div></div>
<div class="ttc" id="arte__mempool_8h_html_a5e46fc827d764e516e8ff0c3f00e33fc"><div class="ttname"><a href="rte__mempool_8h.html#a5e46fc827d764e516e8ff0c3f00e33fc">rte_mempool_put_bulk</a></div><div class="ttdeci">static __rte_always_inline void rte_mempool_put_bulk(struct rte_mempool *mp, void *const *obj_table, unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="rte__mempool_8h_source.html#l01367">rte_mempool.h:1367</a></div></div>
<div class="ttc" id="acmdline_8h_html"><div class="ttname"><a href="cmdline_8h.html">cmdline.h</a></div></div>
<div class="ttc" id="arte__log_8h_html_ac23caeb9833fd0fd0665c6c05ec806fe"><div class="ttname"><a href="rte__log_8h.html#ac23caeb9833fd0fd0665c6c05ec806fe">RTE_LOG</a></div><div class="ttdeci">#define RTE_LOG(l, t,...)</div><div class="ttdef"><b>Definition:</b> <a href="rte__log_8h_source.html#l00331">rte_log.h:331</a></div></div>
<div class="ttc" id="arte__cryptodev_8h_html_a1ffaab4a2885220015c21d9bc6f05808"><div class="ttname"><a href="rte__cryptodev_8h.html#a1ffaab4a2885220015c21d9bc6f05808">RTE_CRYPTODEV_FF_SECURITY</a></div><div class="ttdeci">#define RTE_CRYPTODEV_FF_SECURITY</div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00446">rte_cryptodev.h:445</a></div></div>
<div class="ttc" id="arte__malloc_8h_html_a1fc82f67711b13aca7e05dc9d58f9dbd"><div class="ttname"><a href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a></div><div class="ttdeci">void void rte_free(void *ptr)</div></div>
<div class="ttc" id="astructrte__cryptodev__config_html"><div class="ttname"><a href="structrte__cryptodev__config.html">rte_cryptodev_config</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__cryptodev_8h_source.html#l00628">rte_cryptodev.h:628</a></div></div>
<div class="ttc" id="arte__launch_8h_html_ae9500e1d35bd4cfb95d18c0be863cb1e"><div class="ttname"><a href="rte__launch_8h.html#ae9500e1d35bd4cfb95d18c0be863cb1e">rte_eal_wait_lcore</a></div><div class="ttdeci">int rte_eal_wait_lcore(unsigned worker_id)</div></div>
<div class="ttc" id="arte__atomic_8h_html_ab3957283ac057c267b2dc4947479cb70"><div class="ttname"><a href="rte__atomic_8h.html#ab3957283ac057c267b2dc4947479cb70">rte_wmb</a></div><div class="ttdeci">static void rte_wmb(void)</div></div>
<div class="ttc" id="arte__malloc_8h_html_a7e9f76b7e0b0921a617c6ab8b28f53b3"><div class="ttname"><a href="rte__malloc_8h.html#a7e9f76b7e0b0921a617c6ab8b28f53b3">rte_zmalloc_socket</a></div><div class="ttdeci">void * rte_zmalloc_socket(const char *type, size_t size, unsigned align, int socket) __rte_alloc_size(2)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
