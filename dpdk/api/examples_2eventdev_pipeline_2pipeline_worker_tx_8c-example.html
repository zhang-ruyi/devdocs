<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: examples/eventdev_pipeline/pipeline_worker_tx.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/eventdev_pipeline/pipeline_worker_tx.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright(c) 2010-2014 Intel Corporation</span></div>
<div class="line"><span class="comment"> * Copyright 2017 Cavium, Inc.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;pipeline_common.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a name="a0"></a><a class="code" href="rte__common_8h.html#af1e21922385a6cbe051e3ab70bba9f11">__rte_always_inline</a> <span class="keywordtype">void</span></div>
<div class="line">worker_fwd_event(<span class="keyword">struct</span> <a name="_a1"></a><a class="code" href="structrte__event.html">rte_event</a> *ev, uint8_t sched)</div>
<div class="line">{</div>
<div class="line">    ev-&gt;<a name="a2"></a><a class="code" href="structrte__event.html#a45def65890de0da17bc0d6e2ca2b3a9f">event_type</a> = <a name="a3"></a><a class="code" href="rte__eventdev_8h.html#ac15be67634b343dc7dc7b6d63630abdd">RTE_EVENT_TYPE_CPU</a>;</div>
<div class="line">    ev-&gt;<a name="a4"></a><a class="code" href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">op</a> = <a name="a5"></a><a class="code" href="rte__eventdev_8h.html#a416488eee18e9e740dba1c61a312f06a">RTE_EVENT_OP_FORWARD</a>;</div>
<div class="line">    ev-&gt;<a name="a6"></a><a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> = sched;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="rte__common_8h.html#af1e21922385a6cbe051e3ab70bba9f11">__rte_always_inline</a> <span class="keywordtype">void</span></div>
<div class="line">worker_event_enqueue(<span class="keyword">const</span> uint8_t <a name="a7"></a><a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, <span class="keyword">const</span> uint8_t port,</div>
<div class="line">        <span class="keyword">struct</span> <a class="code" href="structrte__event.html">rte_event</a> *ev)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">while</span> (<a name="a8"></a><a class="code" href="rte__eventdev_8h.html#afc6b7f3fd1b11858a2db91864708f9a4">rte_event_enqueue_burst</a>(<a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, port, ev, 1) != 1)</div>
<div class="line">        <a name="a9"></a><a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="rte__common_8h.html#af1e21922385a6cbe051e3ab70bba9f11">__rte_always_inline</a> <span class="keywordtype">void</span></div>
<div class="line">worker_event_enqueue_burst(<span class="keyword">const</span> uint8_t <a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, <span class="keyword">const</span> uint8_t port,</div>
<div class="line">        <span class="keyword">struct</span> <a class="code" href="structrte__event.html">rte_event</a> *ev, <span class="keyword">const</span> uint16_t nb_rx)</div>
<div class="line">{</div>
<div class="line">    uint16_t enq;</div>
<div class="line"> </div>
<div class="line">    enq = <a class="code" href="rte__eventdev_8h.html#afc6b7f3fd1b11858a2db91864708f9a4">rte_event_enqueue_burst</a>(<a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, port, ev, nb_rx);</div>
<div class="line">    <span class="keywordflow">while</span> (enq &lt; nb_rx) {</div>
<div class="line">        enq += <a class="code" href="rte__eventdev_8h.html#afc6b7f3fd1b11858a2db91864708f9a4">rte_event_enqueue_burst</a>(<a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, port,</div>
<div class="line">                        ev + enq, nb_rx - enq);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="rte__common_8h.html#af1e21922385a6cbe051e3ab70bba9f11">__rte_always_inline</a> <span class="keywordtype">void</span></div>
<div class="line">worker_tx_pkt(<span class="keyword">const</span> uint8_t <a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, <span class="keyword">const</span> uint8_t port, <span class="keyword">struct</span> <a class="code" href="structrte__event.html">rte_event</a> *ev)</div>
<div class="line">{</div>
<div class="line">    exchange_mac(ev-&gt;<a name="a10"></a><a class="code" href="structrte__event.html#a61d971d79c079636b0ede211cd7a2b26">mbuf</a>);</div>
<div class="line">    <a name="a11"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a4376e02a739b935fb0631402da4c0b73">rte_event_eth_tx_adapter_txq_set</a>(ev-&gt;<a class="code" href="structrte__event.html#a61d971d79c079636b0ede211cd7a2b26">mbuf</a>, 0);</div>
<div class="line">    <span class="keywordflow">while</span> (!<a name="a12"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#ab1e90b0812544c94b62b45bc49c24344">rte_event_eth_tx_adapter_enqueue</a>(<a class="code" href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">dev</a>, port, ev, 1, 0))</div>
<div class="line">        <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Single stage pipeline workers */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_single(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a13"></a><a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, &amp;ev, 1, 0)) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        received++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ev.<a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> == <a name="a14"></a><a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">            worker_tx_pkt(dev, port, &amp;ev);</div>
<div class="line">            tx++;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            work();</div>
<div class="line">            ev.<a name="a15"></a><a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>++;</div>
<div class="line">            worker_fwd_event(&amp;ev, <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            worker_event_enqueue(dev, port, &amp;ev);</div>
<div class="line">            fwd++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a name="a16"></a><a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_single_atq(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, &amp;ev, 1, 0)) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        received++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ev.<a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">            worker_tx_pkt(dev, port, &amp;ev);</div>
<div class="line">            tx++;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            work();</div>
<div class="line">            worker_fwd_event(&amp;ev, <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            worker_event_enqueue(dev, port, &amp;ev);</div>
<div class="line">            fwd++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_single_burst(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev[BATCH_SIZE + 1];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line">        uint16_t i;</div>
<div class="line">        uint16_t nb_rx = <a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, ev,</div>
<div class="line">                BATCH_SIZE, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!nb_rx) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        received += nb_rx;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_rx; i++) {</div>
<div class="line">            <a name="a17"></a><a class="code" href="rte__prefetch_8h.html#a7f89cf66766e6bfd63feb370a7280de9">rte_prefetch0</a>(ev[i + 1].mbuf);</div>
<div class="line">            <span class="keywordflow">if</span> (ev[i].sched_type == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line"> </div>
<div class="line">                worker_tx_pkt(dev, port, &amp;ev[i]);</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">op</a> = <a name="a18"></a><a class="code" href="rte__eventdev_8h.html#ab927860cf68a0c0a8caf96fe9feb2a23">RTE_EVENT_OP_RELEASE</a>;</div>
<div class="line">                tx++;</div>
<div class="line"> </div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>++;</div>
<div class="line">                worker_fwd_event(&amp;ev[i], <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            }</div>
<div class="line">            work();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        worker_event_enqueue_burst(dev, port, ev, nb_rx);</div>
<div class="line">        fwd += nb_rx;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_single_burst_atq(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev[BATCH_SIZE + 1];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line">        uint16_t i;</div>
<div class="line">        uint16_t nb_rx = <a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, ev,</div>
<div class="line">                BATCH_SIZE, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!nb_rx) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        received += nb_rx;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_rx; i++) {</div>
<div class="line">            <a class="code" href="rte__prefetch_8h.html#a7f89cf66766e6bfd63feb370a7280de9">rte_prefetch0</a>(ev[i + 1].mbuf);</div>
<div class="line">            <span class="keywordflow">if</span> (ev[i].sched_type == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line"> </div>
<div class="line">                worker_tx_pkt(dev, port, &amp;ev[i]);</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">op</a> = <a class="code" href="rte__eventdev_8h.html#ab927860cf68a0c0a8caf96fe9feb2a23">RTE_EVENT_OP_RELEASE</a>;</div>
<div class="line">                tx++;</div>
<div class="line">            } <span class="keywordflow">else</span></div>
<div class="line">                worker_fwd_event(&amp;ev[i], <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            work();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        worker_event_enqueue_burst(dev, port, ev, nb_rx);</div>
<div class="line">        fwd += nb_rx;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Multi stage Pipeline Workers */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t lst_qid = cdata.num_stages - 1;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, &amp;ev, 1, 0)) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        received++;</div>
<div class="line">        <span class="keyword">const</span> uint8_t cq_id = ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> % cdata.num_stages;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (cq_id &gt;= lst_qid) {</div>
<div class="line">            <span class="keywordflow">if</span> (ev.<a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">                worker_tx_pkt(dev, port, &amp;ev);</div>
<div class="line">                tx++;</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            worker_fwd_event(&amp;ev, <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> = (cq_id == lst_qid) ?</div>
<div class="line">                cdata.next_qid[ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>] : ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> = cdata.next_qid[ev.<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>];</div>
<div class="line">            worker_fwd_event(&amp;ev, cdata.queue_type);</div>
<div class="line">        }</div>
<div class="line">        work();</div>
<div class="line"> </div>
<div class="line">        worker_event_enqueue(dev, port, &amp;ev);</div>
<div class="line">        fwd++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_atq(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t port = data-&gt;port_id;</div>
<div class="line">    <span class="keyword">const</span> uint8_t lst_qid = cdata.num_stages - 1;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port, &amp;ev, 1, 0)) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        received++;</div>
<div class="line">        <span class="keyword">const</span> uint8_t cq_id = ev.<a name="a19"></a><a class="code" href="structrte__event.html#ac4c8cd07c5e4964f925a5498f3e46920">sub_event_type</a> % cdata.num_stages;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (cq_id == lst_qid) {</div>
<div class="line">            <span class="keywordflow">if</span> (ev.<a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">                worker_tx_pkt(dev, port, &amp;ev);</div>
<div class="line">                tx++;</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            worker_fwd_event(&amp;ev, <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ev.<a class="code" href="structrte__event.html#ac4c8cd07c5e4964f925a5498f3e46920">sub_event_type</a>++;</div>
<div class="line">            worker_fwd_event(&amp;ev, cdata.queue_type);</div>
<div class="line">        }</div>
<div class="line">        work();</div>
<div class="line"> </div>
<div class="line">        worker_event_enqueue(dev, port, &amp;ev);</div>
<div class="line">        fwd++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_burst(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev[BATCH_SIZE];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    uint8_t port = data-&gt;port_id;</div>
<div class="line">    uint8_t lst_qid = cdata.num_stages - 1;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line">        uint16_t i;</div>
<div class="line">        <span class="keyword">const</span> uint16_t nb_rx = <a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port,</div>
<div class="line">                ev, BATCH_SIZE, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (nb_rx == 0) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        received += nb_rx;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_rx; i++) {</div>
<div class="line">            <span class="keyword">const</span> uint8_t cq_id = ev[i].<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> % cdata.num_stages;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (cq_id &gt;= lst_qid) {</div>
<div class="line">                <span class="keywordflow">if</span> (ev[i].sched_type == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">                    worker_tx_pkt(dev, port, &amp;ev[i]);</div>
<div class="line">                    tx++;</div>
<div class="line">                    ev[i].<a class="code" href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">op</a> = <a class="code" href="rte__eventdev_8h.html#ab927860cf68a0c0a8caf96fe9feb2a23">RTE_EVENT_OP_RELEASE</a>;</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> = (cq_id == lst_qid) ?</div>
<div class="line">                    cdata.next_qid[ev[i].queue_id] :</div>
<div class="line">                    ev[i].queue_id;</div>
<div class="line"> </div>
<div class="line">                worker_fwd_event(&amp;ev[i], <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> = cdata.next_qid[ev[i].<a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a>];</div>
<div class="line">                worker_fwd_event(&amp;ev[i], cdata.queue_type);</div>
<div class="line">            }</div>
<div class="line">            work();</div>
<div class="line">        }</div>
<div class="line">        worker_event_enqueue_burst(dev, port, ev, nb_rx);</div>
<div class="line"> </div>
<div class="line">        fwd += nb_rx;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">worker_do_tx_burst_atq(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event.html">rte_event</a> ev[BATCH_SIZE];</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span>worker_data *data = (<span class="keyword">struct </span>worker_data *)arg;</div>
<div class="line">    uint8_t dev = data-&gt;dev_id;</div>
<div class="line">    uint8_t port = data-&gt;port_id;</div>
<div class="line">    uint8_t lst_qid = cdata.num_stages - 1;</div>
<div class="line">    <span class="keywordtype">size_t</span> fwd = 0, received = 0, tx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!fdata-&gt;done) {</div>
<div class="line">        uint16_t i;</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> uint16_t nb_rx = <a class="code" href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a>(dev, port,</div>
<div class="line">                ev, BATCH_SIZE, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (nb_rx == 0) {</div>
<div class="line">            <a class="code" href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a>();</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        received += nb_rx;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; nb_rx; i++) {</div>
<div class="line">            <span class="keyword">const</span> uint8_t cq_id = ev[i].<a class="code" href="structrte__event.html#ac4c8cd07c5e4964f925a5498f3e46920">sub_event_type</a> %</div>
<div class="line">                cdata.num_stages;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (cq_id == lst_qid) {</div>
<div class="line">                <span class="keywordflow">if</span> (ev[i].sched_type == <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>) {</div>
<div class="line">                    worker_tx_pkt(dev, port, &amp;ev[i]);</div>
<div class="line">                    tx++;</div>
<div class="line">                    ev[i].<a class="code" href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">op</a> = <a class="code" href="rte__eventdev_8h.html#ab927860cf68a0c0a8caf96fe9feb2a23">RTE_EVENT_OP_RELEASE</a>;</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                worker_fwd_event(&amp;ev[i], <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                ev[i].<a class="code" href="structrte__event.html#ac4c8cd07c5e4964f925a5498f3e46920">sub_event_type</a>++;</div>
<div class="line">                worker_fwd_event(&amp;ev[i], cdata.queue_type);</div>
<div class="line">            }</div>
<div class="line">            work();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        worker_event_enqueue_burst(dev, port, ev, nb_rx);</div>
<div class="line">        fwd += nb_rx;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.quiet)</div>
<div class="line">        printf(<span class="stringliteral">&quot;  worker %u thread done. RX=%zu FWD=%zu TX=%zu\n&quot;</span>,</div>
<div class="line">                <a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>(), received, fwd, tx);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">setup_eventdev_worker_tx_enq(<span class="keyword">struct</span> worker_data *worker_data)</div>
<div class="line">{</div>
<div class="line">    uint8_t i;</div>
<div class="line">    <span class="keyword">const</span> uint8_t atq = cdata.all_type_queues ? 1 : 0;</div>
<div class="line">    <span class="keyword">const</span> uint8_t dev_id = 0;</div>
<div class="line">    <span class="keyword">const</span> uint8_t nb_ports = cdata.num_workers;</div>
<div class="line">    uint8_t nb_slots = 0;</div>
<div class="line">    uint8_t nb_queues = <a name="a20"></a><a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * In case where all type queues are not enabled, use queues equal to</span></div>
<div class="line"><span class="comment">     * number of stages * eth_dev_count and one extra queue per pipeline</span></div>
<div class="line"><span class="comment">     * for Tx.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (!atq) {</div>
<div class="line">        nb_queues *= cdata.num_stages;</div>
<div class="line">        nb_queues += <a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a name="_a21"></a><a class="code" href="structrte__event__dev__config.html">rte_event_dev_config</a> config = {</div>
<div class="line">            .<a name="a22"></a><a class="code" href="structrte__event__dev__config.html#a703c026d74436b05fc656652324101e4">nb_event_queues</a> = nb_queues,</div>
<div class="line">            .nb_event_ports = nb_ports,</div>
<div class="line">            .nb_single_link_event_port_queues = 0,</div>
<div class="line">            .nb_events_limit  = 4096,</div>
<div class="line">            .nb_event_queue_flows = 1024,</div>
<div class="line">            .nb_event_port_dequeue_depth = 128,</div>
<div class="line">            .nb_event_port_enqueue_depth = 128,</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">struct </span><a name="_a23"></a><a class="code" href="structrte__event__port__conf.html">rte_event_port_conf</a> wkr_p_conf = {</div>
<div class="line">            .<a name="a24"></a><a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> = cdata.worker_cq_depth,</div>
<div class="line">            .enqueue_depth = 64,</div>
<div class="line">            .new_event_threshold = 4096,</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">struct </span><a name="_a25"></a><a class="code" href="structrte__event__queue__conf.html">rte_event_queue_conf</a> wkr_q_conf = {</div>
<div class="line">            .<a name="a26"></a><a class="code" href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">schedule_type</a> = cdata.queue_type,</div>
<div class="line">            .priority = <a name="a27"></a><a class="code" href="rte__eventdev_8h.html#a0110e34375b970cb883979a3c489e5c5">RTE_EVENT_DEV_PRIORITY_NORMAL</a>,</div>
<div class="line">            .nb_atomic_flows = 1024,</div>
<div class="line">            .nb_atomic_order_sequences = 1024,</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> ret, ndev = <a name="a28"></a><a class="code" href="rte__eventdev_8h.html#a6541eb8822285c7b77455636201d5134">rte_event_dev_count</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ndev &lt; 1) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;%d: No Eventdev Devices Found\n&quot;</span>, __LINE__);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a name="_a29"></a><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> dev_info;</div>
<div class="line">    ret = <a name="a30"></a><a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(dev_id, &amp;dev_info);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\tEventdev %d: %s\n&quot;</span>, dev_id, dev_info.driver_name);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (dev_info.max_num_events &lt; config.<a name="a31"></a><a class="code" href="structrte__event__dev__config.html#aebd006fc3899659df0c64802f7b751c8">nb_events_limit</a>)</div>
<div class="line">        config.<a class="code" href="structrte__event__dev__config.html#aebd006fc3899659df0c64802f7b751c8">nb_events_limit</a> = dev_info.max_num_events;</div>
<div class="line">    <span class="keywordflow">if</span> (dev_info.max_event_port_dequeue_depth &lt;</div>
<div class="line">            config.<a name="a32"></a><a class="code" href="structrte__event__dev__config.html#afc3fc61d93604a902b132f204a4b6e35">nb_event_port_dequeue_depth</a>)</div>
<div class="line">        config.<a class="code" href="structrte__event__dev__config.html#afc3fc61d93604a902b132f204a4b6e35">nb_event_port_dequeue_depth</a> =</div>
<div class="line">                dev_info.max_event_port_dequeue_depth;</div>
<div class="line">    <span class="keywordflow">if</span> (dev_info.max_event_port_enqueue_depth &lt;</div>
<div class="line">            config.<a name="a33"></a><a class="code" href="structrte__event__dev__config.html#a7dda51b4194009dca0a5763af04a0335">nb_event_port_enqueue_depth</a>)</div>
<div class="line">        config.<a class="code" href="structrte__event__dev__config.html#a7dda51b4194009dca0a5763af04a0335">nb_event_port_enqueue_depth</a> =</div>
<div class="line">                dev_info.max_event_port_enqueue_depth;</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a34"></a><a class="code" href="rte__eventdev_8h.html#af1e7d0094442b3a158e89f120a21687d">rte_event_dev_configure</a>(dev_id, &amp;config);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;%d: Error configuring device\n&quot;</span>, __LINE__);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  Stages:\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_queues; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (atq) {</div>
<div class="line"> </div>
<div class="line">            nb_slots = cdata.num_stages;</div>
<div class="line">            wkr_q_conf.<a name="a35"></a><a class="code" href="structrte__event__queue__conf.html#a8bb3902202de82dc39d640ea3e402f45">event_queue_cfg</a> =</div>
<div class="line">                <a name="a36"></a><a class="code" href="rte__eventdev_8h.html#a6b417a1b2250685f2b583aa30a259241">RTE_EVENT_QUEUE_CFG_ALL_TYPES</a>;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            uint8_t slot;</div>
<div class="line"> </div>
<div class="line">            nb_slots = cdata.num_stages + 1;</div>
<div class="line">            slot = i % nb_slots;</div>
<div class="line">            wkr_q_conf.<a class="code" href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">schedule_type</a> = slot == cdata.num_stages ?</div>
<div class="line">                <a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a> : cdata.queue_type;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a37"></a><a class="code" href="rte__eventdev_8h.html#a57a1db34b6c7bb2b05a5db7aab8c6834">rte_event_queue_setup</a>(dev_id, i, &amp;wkr_q_conf) &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;%d: error creating qid %d\n&quot;</span>, __LINE__, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        cdata.qid[i] = i;</div>
<div class="line">        cdata.next_qid[i] = i+1;</div>
<div class="line">        <span class="keywordflow">if</span> (cdata.enable_queue_priorities) {</div>
<div class="line">            <span class="keyword">const</span> uint32_t prio_delta =</div>
<div class="line">                (<a name="a38"></a><a class="code" href="rte__eventdev_8h.html#aba559138ff70b32510631ad1ce5b8da5">RTE_EVENT_DEV_PRIORITY_LOWEST</a>) /</div>
<div class="line">                nb_slots;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* higher priority for queues closer to tx */</span></div>
<div class="line">            wkr_q_conf.<a name="a39"></a><a class="code" href="structrte__event__queue__conf.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a> =</div>
<div class="line">                <a class="code" href="rte__eventdev_8h.html#aba559138ff70b32510631ad1ce5b8da5">RTE_EVENT_DEV_PRIORITY_LOWEST</a> - prio_delta *</div>
<div class="line">                (i % nb_slots);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *type_str = <span class="stringliteral">&quot;Atomic&quot;</span>;</div>
<div class="line">        <span class="keywordflow">switch</span> (wkr_q_conf.<a class="code" href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">schedule_type</a>) {</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a40"></a><a class="code" href="rte__eventdev_8h.html#a366ab13bc5be32cbc9ee15e294b4c9a2">RTE_SCHED_TYPE_ORDERED</a>:</div>
<div class="line">            type_str = <span class="stringliteral">&quot;Ordered&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a name="a41"></a><a class="code" href="rte__eventdev_8h.html#ac88982845a12ff215c721fccb18ed4a7">RTE_SCHED_TYPE_PARALLEL</a>:</div>
<div class="line">            type_str = <span class="stringliteral">&quot;Parallel&quot;</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tStage %d, Type %s\tPriority = %d\n&quot;</span>, i, type_str,</div>
<div class="line">                wkr_q_conf.<a class="code" href="structrte__event__queue__conf.html#a0ad043071ccc7a261d79a759dc9c6f0c">priority</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (wkr_p_conf.<a name="a42"></a><a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> &gt; config.<a class="code" href="structrte__event__dev__config.html#aebd006fc3899659df0c64802f7b751c8">nb_events_limit</a>)</div>
<div class="line">        wkr_p_conf.<a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> = config.<a class="code" href="structrte__event__dev__config.html#aebd006fc3899659df0c64802f7b751c8">nb_events_limit</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (wkr_p_conf.<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> &gt; config.<a class="code" href="structrte__event__dev__config.html#afc3fc61d93604a902b132f204a4b6e35">nb_event_port_dequeue_depth</a>)</div>
<div class="line">        wkr_p_conf.<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> = config.<a class="code" href="structrte__event__dev__config.html#afc3fc61d93604a902b132f204a4b6e35">nb_event_port_dequeue_depth</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (wkr_p_conf.<a name="a43"></a><a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> &gt; config.<a class="code" href="structrte__event__dev__config.html#a7dda51b4194009dca0a5763af04a0335">nb_event_port_enqueue_depth</a>)</div>
<div class="line">        wkr_p_conf.<a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> = config.<a class="code" href="structrte__event__dev__config.html#a7dda51b4194009dca0a5763af04a0335">nb_event_port_enqueue_depth</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* set up one port per worker, linking to all stage queues */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; cdata.num_workers; i++) {</div>
<div class="line">        <span class="keyword">struct </span>worker_data *w = &amp;worker_data[i];</div>
<div class="line">        w-&gt;dev_id = dev_id;</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a44"></a><a class="code" href="rte__eventdev_8h.html#ac087670e6e885abcdf046c8e74844cd4">rte_event_port_setup</a>(dev_id, i, &amp;wkr_p_conf) &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error setting up port %d\n&quot;</span>, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a45"></a><a class="code" href="rte__eventdev_8h.html#a27f0abd90e6784a4dc1c4f07ece2715a">rte_event_port_link</a>(dev_id, i, NULL, NULL, 0)</div>
<div class="line">                != nb_queues) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;%d: error creating link for port %d\n&quot;</span>,</div>
<div class="line">                    __LINE__, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        w-&gt;port_id = i;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Reduce the load on ingress event queue by splitting the traffic</span></div>
<div class="line"><span class="comment">     * across multiple event queues.</span></div>
<div class="line"><span class="comment">     * for example, nb_stages =  2 and nb_ethdev = 2 then</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     *  nb_queues = (2 * 2) + 2 = 6 (non atq)</span></div>
<div class="line"><span class="comment">     *  rx_stride = 3</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     * So, traffic is split across queue 0 and queue 3 since queue id for</span></div>
<div class="line"><span class="comment">     * rx adapter is chosen &lt;ethport_id&gt; * &lt;rx_stride&gt; i.e in the above</span></div>
<div class="line"><span class="comment">     * case eth port 0, 1 will inject packets into event queue 0, 3</span></div>
<div class="line"><span class="comment">     * respectively.</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     * This forms two set of queue pipelines 0-&gt;1-&gt;2-&gt;tx and 3-&gt;4-&gt;5-&gt;tx.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    cdata.rx_stride = atq ? 1 : nb_slots;</div>
<div class="line">    ret = <a name="a46"></a><a class="code" href="rte__eventdev_8h.html#a335e46a7e6c7b3c17629b007d0a85e62">rte_event_dev_service_id_get</a>(dev_id,</div>
<div class="line">                &amp;fdata-&gt;evdev_service_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error getting the service ID\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <a name="a47"></a><a class="code" href="rte__service_8h.html#af2726779871ce03d78a1558ccf454619">rte_service_runstate_set</a>(fdata-&gt;evdev_service_id, 1);</div>
<div class="line">    <a name="a48"></a><a class="code" href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a>(fdata-&gt;evdev_service_id, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a49"></a><a class="code" href="rte__eventdev_8h.html#ab6e99f06a45adaa095b257b93ebaf201">rte_event_dev_start</a>(dev_id) &lt; 0)</div>
<div class="line">        <a name="a50"></a><a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;Error starting eventdev&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> dev_id;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>rx_adptr_services {</div>
<div class="line">    uint16_t nb_rx_adptrs;</div>
<div class="line">    uint32_t *rx_adpt_arr;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> int32_t</div>
<div class="line">service_rx_adapter(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keyword">struct </span>rx_adptr_services *adptr_services = arg;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; adptr_services-&gt;nb_rx_adptrs; i++)</div>
<div class="line">        <a name="a51"></a><a class="code" href="rte__service_8h.html#a198cc1b4dfbcbdec9d78d5986bd8b5da">rte_service_run_iter_on_app_lcore</a>(</div>
<div class="line">                adptr_services-&gt;rx_adpt_arr[i], 1);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Initializes a given port using global settings and with the RX buffers</span></div>
<div class="line"><span class="comment"> * coming from the mbuf_pool passed as a parameter.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div>
<div class="line">port_init(uint8_t port, <span class="keyword">struct</span> <a name="_a52"></a><a class="code" href="structrte__mempool.html">rte_mempool</a> *mbuf_pool)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a53"></a><a class="code" href="structrte__eth__rxconf.html">rte_eth_rxconf</a> rx_conf;</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a name="_a54"></a><a class="code" href="structrte__eth__conf.html">rte_eth_conf</a> port_conf_default = {</div>
<div class="line">        .<a name="a55"></a><a class="code" href="structrte__eth__conf.html#a346eef99c24f617b74c440c1aa565d01">rxmode</a> = {</div>
<div class="line">            .<a name="a56"></a><a class="code" href="structrte__eth__rxmode.html#aa0562513c4569f1aa53050f1beac6b5d">mq_mode</a> = <a name="a57"></a><a class="code" href="rte__ethdev_8h.html#a586b8e86131b4ec0ccaf464e847ccf3eaa06694239b7ecf1efa3c9243b9e7b4c0">ETH_MQ_RX_RSS</a>,</div>
<div class="line">            .max_rx_pkt_len = <a name="a58"></a><a class="code" href="rte__ether_8h.html#af1fb088707ce5b2ebb7825cb69b5cb58">RTE_ETHER_MAX_LEN</a>,</div>
<div class="line">        },</div>
<div class="line">        .rx_adv_conf = {</div>
<div class="line">            .rss_conf = {</div>
<div class="line">                .rss_hf = ETH_RSS_IP |</div>
<div class="line">                      ETH_RSS_TCP |</div>
<div class="line">                      ETH_RSS_UDP,</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">const</span> uint16_t rx_rings = 1, tx_rings = 1;</div>
<div class="line">    <span class="keyword">const</span> uint16_t rx_ring_size = 512, tx_ring_size = 512;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__eth__conf.html">rte_eth_conf</a> port_conf = port_conf_default;</div>
<div class="line">    <span class="keywordtype">int</span> retval;</div>
<div class="line">    uint16_t q;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a59"></a><a class="code" href="structrte__eth__dev__info.html">rte_eth_dev_info</a> dev_info;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a60"></a><a class="code" href="structrte__eth__txconf.html">rte_eth_txconf</a> txconf;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a name="a61"></a><a class="code" href="rte__ethdev_8h.html#a22dcfd3f5f2b34f657131d66132e23a7">rte_eth_dev_is_valid_port</a>(port))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    retval = <a name="a62"></a><a class="code" href="rte__ethdev_8h.html#a7593f4fff04f4ae1b1d718db7ca7dc8c">rte_eth_dev_info_get</a>(port, &amp;dev_info);</div>
<div class="line">    <span class="keywordflow">if</span> (retval != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error during getting device (port %u) info: %s\n&quot;</span>,</div>
<div class="line">                port, strerror(-retval));</div>
<div class="line">        <span class="keywordflow">return</span> retval;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (dev_info.tx_offload_capa &amp; <a name="a63"></a><a class="code" href="rte__ethdev_8h.html#ae7110b5d5dced8f42505bff5d9e3f0ea">DEV_TX_OFFLOAD_MBUF_FAST_FREE</a>)</div>
<div class="line">        port_conf.<a name="a64"></a><a class="code" href="structrte__eth__conf.html#a1c33c9d2e5cdb14b62ed386bf3159e07">txmode</a>.<a name="a65"></a><a class="code" href="structrte__eth__txmode.html#a6cfe3b3ee46e9a8b8c62a64294b0b564">offloads</a> |=</div>
<div class="line">            <a class="code" href="rte__ethdev_8h.html#ae7110b5d5dced8f42505bff5d9e3f0ea">DEV_TX_OFFLOAD_MBUF_FAST_FREE</a>;</div>
<div class="line">    rx_conf = dev_info.default_rxconf;</div>
<div class="line">    rx_conf.offloads = port_conf.<a class="code" href="structrte__eth__conf.html#a346eef99c24f617b74c440c1aa565d01">rxmode</a>.<a name="a66"></a><a class="code" href="structrte__eth__rxmode.html#a6cfe3b3ee46e9a8b8c62a64294b0b564">offloads</a>;</div>
<div class="line"> </div>
<div class="line">    port_conf.<a name="a67"></a><a class="code" href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rx_adv_conf</a>.<a name="a68"></a><a class="code" href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rss_conf</a>.<a name="a69"></a><a class="code" href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rss_hf</a> &amp;=</div>
<div class="line">        dev_info.flow_type_rss_offloads;</div>
<div class="line">    <span class="keywordflow">if</span> (port_conf.<a class="code" href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rx_adv_conf</a>.<a class="code" href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rss_conf</a>.<a class="code" href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rss_hf</a> !=</div>
<div class="line">            port_conf_default.<a class="code" href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rx_adv_conf</a>.<a class="code" href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rss_conf</a>.<a class="code" href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rss_hf</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Port %u modified RSS hash function based on hardware support,&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;requested:%#&quot;</span>PRIx64<span class="stringliteral">&quot; configured:%#&quot;</span>PRIx64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">            port,</div>
<div class="line">            port_conf_default.<a class="code" href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rx_adv_conf</a>.<a class="code" href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rss_conf</a>.<a class="code" href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rss_hf</a>,</div>
<div class="line">            port_conf.<a class="code" href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rx_adv_conf</a>.<a class="code" href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rss_conf</a>.<a class="code" href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rss_hf</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure the Ethernet device. */</span></div>
<div class="line">    retval = <a name="a70"></a><a class="code" href="rte__ethdev_8h.html#a1a7d3a20b102fee222541fda50fd87bd">rte_eth_dev_configure</a>(port, rx_rings, tx_rings, &amp;port_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line">        <span class="keywordflow">return</span> retval;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Allocate and set up 1 RX queue per Ethernet port. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (q = 0; q &lt; rx_rings; q++) {</div>
<div class="line">        retval = <a name="a71"></a><a class="code" href="rte__ethdev_8h.html#a36ba70a5a6fce2c2c1f774828ba78f8d">rte_eth_rx_queue_setup</a>(port, q, rx_ring_size,</div>
<div class="line">                <a name="a72"></a><a class="code" href="rte__ethdev_8h.html#ad032e25f712e6ffeb0c19eab1ec1fd2e">rte_eth_dev_socket_id</a>(port), &amp;rx_conf,</div>
<div class="line">                mbuf_pool);</div>
<div class="line">        <span class="keywordflow">if</span> (retval &lt; 0)</div>
<div class="line">            <span class="keywordflow">return</span> retval;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    txconf = dev_info.default_txconf;</div>
<div class="line">    txconf.offloads = port_conf_default.<a class="code" href="structrte__eth__conf.html#a1c33c9d2e5cdb14b62ed386bf3159e07">txmode</a>.<a class="code" href="structrte__eth__txmode.html#a6cfe3b3ee46e9a8b8c62a64294b0b564">offloads</a>;</div>
<div class="line">    <span class="comment">/* Allocate and set up 1 TX queue per Ethernet port. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (q = 0; q &lt; tx_rings; q++) {</div>
<div class="line">        retval = <a name="a73"></a><a class="code" href="rte__ethdev_8h.html#a796c2f20778984c6f41b271e36bae50e">rte_eth_tx_queue_setup</a>(port, q, tx_ring_size,</div>
<div class="line">                <a class="code" href="rte__ethdev_8h.html#ad032e25f712e6ffeb0c19eab1ec1fd2e">rte_eth_dev_socket_id</a>(port), &amp;txconf);</div>
<div class="line">        <span class="keywordflow">if</span> (retval &lt; 0)</div>
<div class="line">            <span class="keywordflow">return</span> retval;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display the port MAC address. */</span></div>
<div class="line">    <span class="keyword">struct </span><a name="_a74"></a><a class="code" href="structrte__ether__addr.html">rte_ether_addr</a> addr;</div>
<div class="line">    retval = <a name="a75"></a><a class="code" href="rte__ethdev_8h.html#a8a28375b279ded9125c99a46bf3956ef">rte_eth_macaddr_get</a>(port, &amp;addr);</div>
<div class="line">    <span class="keywordflow">if</span> (retval != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Failed to get MAC address (port %u): %s\n&quot;</span>,</div>
<div class="line">                port, <a name="a76"></a><a class="code" href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a>(-retval));</div>
<div class="line">        <span class="keywordflow">return</span> retval;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Port %u MAC: %02&quot;</span> PRIx8 <span class="stringliteral">&quot; %02&quot;</span> PRIx8 <span class="stringliteral">&quot; %02&quot;</span> PRIx8</div>
<div class="line">            <span class="stringliteral">&quot; %02&quot;</span> PRIx8 <span class="stringliteral">&quot; %02&quot;</span> PRIx8 <span class="stringliteral">&quot; %02&quot;</span> PRIx8 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">            (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)port,</div>
<div class="line">            addr.addr_bytes[0], addr.addr_bytes[1],</div>
<div class="line">            addr.addr_bytes[2], addr.addr_bytes[3],</div>
<div class="line">            addr.addr_bytes[4], addr.addr_bytes[5]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Enable RX in promiscuous mode for the Ethernet device. */</span></div>
<div class="line">    retval = <a name="a77"></a><a class="code" href="rte__ethdev_8h.html#a5dd1dedaa45f05c72bcc35495e441e91">rte_eth_promiscuous_enable</a>(port);</div>
<div class="line">    <span class="keywordflow">if</span> (retval != 0)</div>
<div class="line">        <span class="keywordflow">return</span> retval;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">init_ports(uint16_t num_ports)</div>
<div class="line">{</div>
<div class="line">    uint16_t portid;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!cdata.num_mbuf)</div>
<div class="line">        cdata.num_mbuf = 16384 * num_ports;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__mempool.html">rte_mempool</a> *mp = <a name="a78"></a><a class="code" href="rte__mbuf_8h.html#a593921f13307803b94bbb4e0932db962">rte_pktmbuf_pool_create</a>(<span class="stringliteral">&quot;packet_pool&quot;</span>,</div>
<div class="line">            <span class="comment">/* mbufs */</span> cdata.num_mbuf,</div>
<div class="line">            <span class="comment">/* cache_size */</span> 512,</div>
<div class="line">            <span class="comment">/* priv_size*/</span> 0,</div>
<div class="line">            <span class="comment">/* data_room_size */</span> RTE_MBUF_DEFAULT_BUF_SIZE,</div>
<div class="line">            <a name="a79"></a><a class="code" href="rte__lcore_8h.html#a7c8da4664df26a64cf05dc508a4f26df">rte_socket_id</a>());</div>
<div class="line"> </div>
<div class="line">    <a name="a80"></a><a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(portid)</div>
<div class="line">        <span class="keywordflow">if</span> (port_init(portid, mp) != 0)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;Cannot init port %&quot;</span>PRIu16 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">                    portid);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">init_adapters(uint16_t nb_ports)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    uint8_t evdev_id = 0;</div>
<div class="line">    <span class="keyword">struct </span>rx_adptr_services *adptr_services = NULL;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> dev_info;</div>
<div class="line"> </div>
<div class="line">    ret = <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(evdev_id, &amp;dev_info);</div>
<div class="line">    adptr_services = <a name="a81"></a><a class="code" href="rte__malloc_8h.html#aaf0f048a5fd1672688c662cdfb4536b3">rte_zmalloc</a>(NULL, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> rx_adptr_services), 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__port__conf.html">rte_event_port_conf</a> adptr_p_conf = {</div>
<div class="line">        .<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> = cdata.worker_cq_depth,</div>
<div class="line">        .enqueue_depth = 64,</div>
<div class="line">        .new_event_threshold = 4096,</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    init_ports(nb_ports);</div>
<div class="line">    <span class="keywordflow">if</span> (adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> &gt; dev_info.max_num_events)</div>
<div class="line">        adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> = dev_info.max_num_events;</div>
<div class="line">    <span class="keywordflow">if</span> (adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> &gt; dev_info.max_event_port_dequeue_depth)</div>
<div class="line">        adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> =</div>
<div class="line">            dev_info.max_event_port_dequeue_depth;</div>
<div class="line">    <span class="keywordflow">if</span> (adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> &gt; dev_info.max_event_port_enqueue_depth)</div>
<div class="line">        adptr_p_conf.<a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> =</div>
<div class="line">            dev_info.max_event_port_enqueue_depth;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">struct </span><a name="_a82"></a><a class="code" href="structrte__event__eth__rx__adapter__queue__conf.html">rte_event_eth_rx_adapter_queue_conf</a> queue_conf;</div>
<div class="line">    memset(&amp;queue_conf, 0, <span class="keyword">sizeof</span>(queue_conf));</div>
<div class="line">    queue_conf.ev.sched_type = cdata.queue_type;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_ports; i++) {</div>
<div class="line">        uint32_t cap;</div>
<div class="line">        uint32_t service_id;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a83"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#ab717883885cffa68e2fff3525f2ff1ad">rte_event_eth_rx_adapter_create</a>(i, evdev_id,</div>
<div class="line">                &amp;adptr_p_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                    <span class="stringliteral">&quot;failed to create rx adapter[%d]&quot;</span>, i);</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a84"></a><a class="code" href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a>(evdev_id, i, &amp;cap);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                    <span class="stringliteral">&quot;failed to get event rx adapter &quot;</span></div>
<div class="line">                    <span class="stringliteral">&quot;capabilities&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        queue_conf.ev.queue_id = cdata.rx_stride ?</div>
<div class="line">            (i * cdata.rx_stride)</div>
<div class="line">            : (uint8_t)cdata.qid[0];</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a85"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#abe12d7b973444febfd97570d7f3f69d8">rte_event_eth_rx_adapter_queue_add</a>(i, i, -1, &amp;queue_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                    <span class="stringliteral">&quot;Failed to add queues to Rx adapter&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Producer needs to be scheduled. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (!(cap &amp; <a name="a86"></a><a class="code" href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a>)) {</div>
<div class="line">            ret = <a name="a87"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a3210d6c792e04a719d8cdf12c0fce224">rte_event_eth_rx_adapter_service_id_get</a>(i,</div>
<div class="line">                    &amp;service_id);</div>
<div class="line">            <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret != 0) {</div>
<div class="line">                <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                <span class="stringliteral">&quot;Error getting the service ID for rx adptr\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <a class="code" href="rte__service_8h.html#af2726779871ce03d78a1558ccf454619">rte_service_runstate_set</a>(service_id, 1);</div>
<div class="line">            <a class="code" href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a>(service_id, 0);</div>
<div class="line"> </div>
<div class="line">            adptr_services-&gt;nb_rx_adptrs++;</div>
<div class="line">            adptr_services-&gt;rx_adpt_arr = <a name="a88"></a><a class="code" href="rte__malloc_8h.html#a08b4f906349631c8c5ac8781192871ab">rte_realloc</a>(</div>
<div class="line">                    adptr_services-&gt;rx_adpt_arr,</div>
<div class="line">                    adptr_services-&gt;nb_rx_adptrs *</div>
<div class="line">                    <span class="keyword">sizeof</span>(uint32_t), 0);</div>
<div class="line">            adptr_services-&gt;rx_adpt_arr[</div>
<div class="line">                adptr_services-&gt;nb_rx_adptrs - 1] =</div>
<div class="line">                service_id;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a89"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a681d527bfc9067a30c4dbdc4db527651">rte_event_eth_rx_adapter_start</a>(i);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;Rx adapter[%d] start failed&quot;</span>,</div>
<div class="line">                    i);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We already know that Tx adapter has INTERNAL port cap*/</span></div>
<div class="line">    ret = <a name="a90"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a5edd34a4114d6a3fda57c5eca9dc745f">rte_event_eth_tx_adapter_create</a>(cdata.tx_adapter_id, evdev_id,</div>
<div class="line">            &amp;adptr_p_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret)</div>
<div class="line">        <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;failed to create tx adapter[%d]&quot;</span>,</div>
<div class="line">                cdata.tx_adapter_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_ports; i++) {</div>
<div class="line">        ret = <a name="a91"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a7151d87dc659b829aa4d752e566a97c6">rte_event_eth_tx_adapter_queue_add</a>(cdata.tx_adapter_id, i,</div>
<div class="line">                -1);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                    <span class="stringliteral">&quot;Failed to add queues to Tx adapter&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a92"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#af75a5ef694d67cc0653942d7b2bb6b78">rte_event_eth_tx_adapter_start</a>(cdata.tx_adapter_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret)</div>
<div class="line">        <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE, <span class="stringliteral">&quot;Tx adapter[%d] start failed&quot;</span>,</div>
<div class="line">                cdata.tx_adapter_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (adptr_services-&gt;nb_rx_adptrs) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a93"></a><a class="code" href="structrte__service__spec.html">rte_service_spec</a> service;</div>
<div class="line"> </div>
<div class="line">        memset(&amp;service, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structrte__service__spec.html">rte_service_spec</a>));</div>
<div class="line">        snprintf(service.name, <span class="keyword">sizeof</span>(service.name), <span class="stringliteral">&quot;rx_service&quot;</span>);</div>
<div class="line">        service.callback = service_rx_adapter;</div>
<div class="line">        service.callback_userdata = (<span class="keywordtype">void</span> *)adptr_services;</div>
<div class="line"> </div>
<div class="line">        int32_t ret = rte_service_component_register(&amp;service,</div>
<div class="line">                &amp;fdata-&gt;rxadptr_service_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                <span class="stringliteral">&quot;Rx adapter service register failed&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="rte__service_8h.html#af2726779871ce03d78a1558ccf454619">rte_service_runstate_set</a>(fdata-&gt;rxadptr_service_id, 1);</div>
<div class="line">        rte_service_component_runstate_set(fdata-&gt;rxadptr_service_id,</div>
<div class="line">                1);</div>
<div class="line">        <a class="code" href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a>(fdata-&gt;rxadptr_service_id,</div>
<div class="line">                0);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        memset(fdata-&gt;rx_core, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * MAX_NUM_CORE);</div>
<div class="line">        <a name="a94"></a><a class="code" href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a>(adptr_services);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!adptr_services-&gt;nb_rx_adptrs &amp;&amp; (dev_info.event_dev_cap &amp;</div>
<div class="line">             <a name="a95"></a><a class="code" href="rte__eventdev_8h.html#af5d3efc148e69c47d8bfb16c71a7f72d">RTE_EVENT_DEV_CAP_DISTRIBUTED_SCHED</a>))</div>
<div class="line">        fdata-&gt;cap.scheduler = NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">worker_tx_enq_opt_check(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    uint32_t cap = 0;</div>
<div class="line">    uint8_t rx_needed = 0;</div>
<div class="line">    uint8_t sched_needed = 0;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> eventdev_info;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;eventdev_info, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a>));</div>
<div class="line">    <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(0, &amp;eventdev_info);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (cdata.all_type_queues &amp;&amp; !(eventdev_info.event_dev_cap &amp;</div>
<div class="line">                <a name="a96"></a><a class="code" href="rte__eventdev_8h.html#a74409c333b42420f7fb085ac79509a03">RTE_EVENT_DEV_CAP_QUEUE_ALL_TYPES</a>))</div>
<div class="line">        <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                <span class="stringliteral">&quot;Event dev doesn&#39;t support all type queues\n&quot;</span>);</div>
<div class="line">    sched_needed = !(eventdev_info.event_dev_cap &amp;</div>
<div class="line">        <a class="code" href="rte__eventdev_8h.html#af5d3efc148e69c47d8bfb16c71a7f72d">RTE_EVENT_DEV_CAP_DISTRIBUTED_SCHED</a>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(i) {</div>
<div class="line">        ret = <a class="code" href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a>(0, i, &amp;cap);</div>
<div class="line">        <span class="keywordflow">if</span> (ret)</div>
<div class="line">            <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(EXIT_FAILURE,</div>
<div class="line">                <span class="stringliteral">&quot;failed to get event rx adapter capabilities&quot;</span>);</div>
<div class="line">        rx_needed |=</div>
<div class="line">            !(cap &amp; <a class="code" href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (cdata.worker_lcore_mask == 0 ||</div>
<div class="line">            (rx_needed &amp;&amp; cdata.rx_lcore_mask == 0) ||</div>
<div class="line">            (sched_needed &amp;&amp; cdata.sched_lcore_mask == 0)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Core part of pipeline was not assigned any cores. &quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;This will stall the pipeline, please check core masks &quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;(use -h for details on setting core masks):\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\trx: %&quot;</span>PRIu64<span class="stringliteral">&quot;\n\tsched: %&quot;</span>PRIu64</div>
<div class="line">            <span class="stringliteral">&quot;\n\tworkers: %&quot;</span>PRIu64<span class="stringliteral">&quot;\n&quot;</span>, cdata.rx_lcore_mask,</div>
<div class="line">            cdata.sched_lcore_mask, cdata.worker_lcore_mask);</div>
<div class="line">        <a class="code" href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a>(-1, <span class="stringliteral">&quot;Fix core masks\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!sched_needed)</div>
<div class="line">        memset(fdata-&gt;sched_core, 0,</div>
<div class="line">                <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * MAX_NUM_CORE);</div>
<div class="line">    <span class="keywordflow">if</span> (!rx_needed)</div>
<div class="line">        memset(fdata-&gt;rx_core, 0,</div>
<div class="line">                <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * MAX_NUM_CORE);</div>
<div class="line"> </div>
<div class="line">    memset(fdata-&gt;tx_core, 0, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * MAX_NUM_CORE);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_loop_single_burst(uint8_t atq)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (atq)</div>
<div class="line">        <span class="keywordflow">return</span> worker_do_tx_single_burst_atq;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> worker_do_tx_single_burst;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_loop_single_non_burst(uint8_t atq)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (atq)</div>
<div class="line">        <span class="keywordflow">return</span> worker_do_tx_single_atq;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> worker_do_tx_single;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_loop_burst(uint8_t atq)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (atq)</div>
<div class="line">        <span class="keywordflow">return</span> worker_do_tx_burst_atq;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> worker_do_tx_burst;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_loop_non_burst(uint8_t atq)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (atq)</div>
<div class="line">        <span class="keywordflow">return</span> worker_do_tx_atq;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> worker_do_tx;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_single_stage(<span class="keywordtype">bool</span> burst)</div>
<div class="line">{</div>
<div class="line">    uint8_t atq = cdata.all_type_queues ? 1 : 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (burst)</div>
<div class="line">        <span class="keywordflow">return</span> get_worker_loop_single_burst(atq);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> get_worker_loop_single_non_burst(atq);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> worker_loop</div>
<div class="line">get_worker_multi_stage(<span class="keywordtype">bool</span> burst)</div>
<div class="line">{</div>
<div class="line">    uint8_t atq = cdata.all_type_queues ? 1 : 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (burst)</div>
<div class="line">        <span class="keywordflow">return</span> get_worker_loop_burst(atq);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> get_worker_loop_non_burst(atq);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">set_worker_tx_enq_setup_data(<span class="keyword">struct</span> setup_data *caps, <span class="keywordtype">bool</span> burst)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (cdata.num_stages == 1)</div>
<div class="line">        caps-&gt;worker = get_worker_single_stage(burst);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        caps-&gt;worker = get_worker_multi_stage(burst);</div>
<div class="line"> </div>
<div class="line">    caps-&gt;check_opt = worker_tx_enq_opt_check;</div>
<div class="line">    caps-&gt;scheduler = schedule_devices;</div>
<div class="line">    caps-&gt;evdev_setup = setup_eventdev_worker_tx_enq;</div>
<div class="line">    caps-&gt;adptr_setup = init_adapters;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="astructrte__event__dev__config_html_afc3fc61d93604a902b132f204a4b6e35"><div class="ttname"><a href="structrte__event__dev__config.html#afc3fc61d93604a902b132f204a4b6e35">rte_event_dev_config::nb_event_port_dequeue_depth</a></div><div class="ttdeci">uint32_t nb_event_port_dequeue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00495">rte_eventdev.h:495</a></div></div>
<div class="ttc" id="arte__malloc_8h_html_aaf0f048a5fd1672688c662cdfb4536b3"><div class="ttname"><a href="rte__malloc_8h.html#aaf0f048a5fd1672688c662cdfb4536b3">rte_zmalloc</a></div><div class="ttdeci">void * rte_zmalloc(const char *type, size_t size, unsigned align) __rte_alloc_size(2)</div></div>
<div class="ttc" id="astructrte__eth__rxconf_html"><div class="ttname"><a href="structrte__eth__rxconf.html">rte_eth_rxconf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01032">rte_ethdev.h:1032</a></div></div>
<div class="ttc" id="arte__prefetch_8h_html_a7f89cf66766e6bfd63feb370a7280de9"><div class="ttname"><a href="rte__prefetch_8h.html#a7f89cf66766e6bfd63feb370a7280de9">rte_prefetch0</a></div><div class="ttdeci">static void rte_prefetch0(const volatile void *p)</div></div>
<div class="ttc" id="astructrte__event__dev__info_html"><div class="ttname"><a href="structrte__event__dev__info.html">rte_event_dev_info</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00356">rte_eventdev.h:356</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a6b417a1b2250685f2b583aa30a259241"><div class="ttname"><a href="rte__eventdev_8h.html#a6b417a1b2250685f2b583aa30a259241">RTE_EVENT_QUEUE_CFG_ALL_TYPES</a></div><div class="ttdeci">#define RTE_EVENT_QUEUE_CFG_ALL_TYPES</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00554">rte_eventdev.h:549</a></div></div>
<div class="ttc" id="arte__lcore_8h_html_a7c8da4664df26a64cf05dc508a4f26df"><div class="ttname"><a href="rte__lcore_8h.html#a7c8da4664df26a64cf05dc508a4f26df">rte_socket_id</a></div><div class="ttdeci">unsigned int rte_socket_id(void)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a796c2f20778984c6f41b271e36bae50e"><div class="ttname"><a href="rte__ethdev_8h.html#a796c2f20778984c6f41b271e36bae50e">rte_eth_tx_queue_setup</a></div><div class="ttdeci">int rte_eth_tx_queue_setup(uint16_t port_id, uint16_t tx_queue_id, uint16_t nb_tx_desc, unsigned int socket_id, const struct rte_eth_txconf *tx_conf)</div></div>
<div class="ttc" id="astructrte__eth__txconf_html"><div class="ttname"><a href="structrte__eth__txconf.html">rte_eth_txconf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01060">rte_ethdev.h:1060</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a1a7d3a20b102fee222541fda50fd87bd"><div class="ttname"><a href="rte__ethdev_8h.html#a1a7d3a20b102fee222541fda50fd87bd">rte_eth_dev_configure</a></div><div class="ttdeci">int rte_eth_dev_configure(uint16_t port_id, uint16_t nb_rx_queue, uint16_t nb_tx_queue, const struct rte_eth_conf *eth_conf)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a681d527bfc9067a30c4dbdc4db527651"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a681d527bfc9067a30c4dbdc4db527651">rte_event_eth_rx_adapter_start</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_start(uint8_t id)</div></div>
<div class="ttc" id="arte__errno_8h_html_a129a7eb4cfa1f5bdac5783bf49137d06"><div class="ttname"><a href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a></div><div class="ttdeci">const char * rte_strerror(int errnum)</div></div>
<div class="ttc" id="arte__common_8h_html_af1e21922385a6cbe051e3ab70bba9f11"><div class="ttname"><a href="rte__common_8h.html#af1e21922385a6cbe051e3ab70bba9f11">__rte_always_inline</a></div><div class="ttdeci">#define __rte_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00226">rte_common.h:226</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a0110e34375b970cb883979a3c489e5c5"><div class="ttname"><a href="rte__eventdev_8h.html#a0110e34375b970cb883979a3c489e5c5">RTE_EVENT_DEV_PRIORITY_NORMAL</a></div><div class="ttdeci">#define RTE_EVENT_DEV_PRIORITY_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00310">rte_eventdev.h:306</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a4376e02a739b935fb0631402da4c0b73"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a4376e02a739b935fb0631402da4c0b73">rte_event_eth_tx_adapter_txq_set</a></div><div class="ttdeci">static __rte_always_inline void rte_event_eth_tx_adapter_txq_set(struct rte_mbuf *pkt, uint16_t queue)</div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__tx__adapter_8h_source.html#l00266">rte_event_eth_tx_adapter.h:266</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a5bd7355a0be9b94bbca0f32796e57358"><div class="ttname"><a href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a></div><div class="ttdeci">int rte_event_dev_info_get(uint8_t dev_id, struct rte_event_dev_info *dev_info)</div></div>
<div class="ttc" id="astructrte__eth__conf_html_a346eef99c24f617b74c440c1aa565d01"><div class="ttname"><a href="structrte__eth__conf.html#a346eef99c24f617b74c440c1aa565d01">rte_eth_conf::rxmode</a></div><div class="ttdeci">struct rte_eth_rxmode rxmode</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01294">rte_ethdev.h:1301</a></div></div>
<div class="ttc" id="astructrte__event_html_a45def65890de0da17bc0d6e2ca2b3a9f"><div class="ttname"><a href="structrte__event.html#a45def65890de0da17bc0d6e2ca2b3a9f">rte_event::event_type</a></div><div class="ttdeci">uint32_t event_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01060">rte_eventdev.h:1060</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a74409c333b42420f7fb085ac79509a03"><div class="ttname"><a href="rte__eventdev_8h.html#a74409c333b42420f7fb085ac79509a03">RTE_EVENT_DEV_CAP_QUEUE_ALL_TYPES</a></div><div class="ttdeci">#define RTE_EVENT_DEV_CAP_QUEUE_ALL_TYPES</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00252">rte_eventdev.h:246</a></div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_ada2bfd939bbb6bd6e9f64c95f81d851e"><div class="ttname"><a href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">rte_event_queue_conf::schedule_type</a></div><div class="ttdeci">uint8_t schedule_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00587">rte_eventdev.h:587</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a57a1db34b6c7bb2b05a5db7aab8c6834"><div class="ttname"><a href="rte__eventdev_8h.html#a57a1db34b6c7bb2b05a5db7aab8c6834">rte_event_queue_setup</a></div><div class="ttdeci">int rte_event_queue_setup(uint8_t dev_id, uint8_t queue_id, const struct rte_event_queue_conf *queue_conf)</div></div>
<div class="ttc" id="astructrte__eth__rxmode_html_aa0562513c4569f1aa53050f1beac6b5d"><div class="ttname"><a href="structrte__eth__rxmode.html#aa0562513c4569f1aa53050f1beac6b5d">rte_eth_rxmode::mq_mode</a></div><div class="ttdeci">enum rte_eth_rx_mq_mode mq_mode</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00336">rte_ethdev.h:402</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_ac88982845a12ff215c721fccb18ed4a7"><div class="ttname"><a href="rte__eventdev_8h.html#ac88982845a12ff215c721fccb18ed4a7">RTE_SCHED_TYPE_PARALLEL</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_PARALLEL</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00974">rte_eventdev.h:963</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a7151d87dc659b829aa4d752e566a97c6"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a7151d87dc659b829aa4d752e566a97c6">rte_event_eth_tx_adapter_queue_add</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_queue_add(uint8_t id, uint16_t eth_dev_id, int32_t queue)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_ab717883885cffa68e2fff3525f2ff1ad"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#ab717883885cffa68e2fff3525f2ff1ad">rte_event_eth_rx_adapter_create</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_create(uint8_t id, uint8_t dev_id, struct rte_event_port_conf *port_config)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a7593f4fff04f4ae1b1d718db7ca7dc8c"><div class="ttname"><a href="rte__ethdev_8h.html#a7593f4fff04f4ae1b1d718db7ca7dc8c">rte_eth_dev_info_get</a></div><div class="ttdeci">int rte_eth_dev_info_get(uint16_t port_id, struct rte_eth_dev_info *dev_info)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_afc6b7f3fd1b11858a2db91864708f9a4"><div class="ttname"><a href="rte__eventdev_8h.html#afc6b7f3fd1b11858a2db91864708f9a4">rte_event_enqueue_burst</a></div><div class="ttdeci">static uint16_t rte_event_enqueue_burst(uint8_t dev_id, uint8_t port_id, const struct rte_event ev[], uint16_t nb_events)</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01438">rte_eventdev.h:1438</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_ab1e90b0812544c94b62b45bc49c24344"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#ab1e90b0812544c94b62b45bc49c24344">rte_event_eth_tx_adapter_enqueue</a></div><div class="ttdeci">static uint16_t rte_event_eth_tx_adapter_enqueue(uint8_t dev_id, uint8_t port_id, struct rte_event ev[], uint16_t nb_events, const uint8_t flags)</div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__tx__adapter_8h_source.html#l00352">rte_event_eth_tx_adapter.h:352</a></div></div>
<div class="ttc" id="arte__pause_8h_html_ad59aa7777c93d3cfd5f10617a3acd1c5"><div class="ttname"><a href="rte__pause_8h.html#ad59aa7777c93d3cfd5f10617a3acd1c5">rte_pause</a></div><div class="ttdeci">static void rte_pause(void)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a5dd1dedaa45f05c72bcc35495e441e91"><div class="ttname"><a href="rte__ethdev_8h.html#a5dd1dedaa45f05c72bcc35495e441e91">rte_eth_promiscuous_enable</a></div><div class="ttdeci">int rte_eth_promiscuous_enable(uint16_t port_id)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a3210d6c792e04a719d8cdf12c0fce224"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a3210d6c792e04a719d8cdf12c0fce224">rte_event_eth_rx_adapter_service_id_get</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_service_id_get(uint8_t id, uint32_t *service_id)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a22dcfd3f5f2b34f657131d66132e23a7"><div class="ttname"><a href="rte__ethdev_8h.html#a22dcfd3f5f2b34f657131d66132e23a7">rte_eth_dev_is_valid_port</a></div><div class="ttdeci">int rte_eth_dev_is_valid_port(uint16_t port_id)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a8a28375b279ded9125c99a46bf3956ef"><div class="ttname"><a href="rte__ethdev_8h.html#a8a28375b279ded9125c99a46bf3956ef">rte_eth_macaddr_get</a></div><div class="ttdeci">int rte_eth_macaddr_get(uint16_t port_id, struct rte_ether_addr *mac_addr)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_a0ad043071ccc7a261d79a759dc9c6f0c"><div class="ttname"><a href="structrte__event__queue__conf.html#a0ad043071ccc7a261d79a759dc9c6f0c">rte_event_queue_conf::priority</a></div><div class="ttdeci">uint8_t priority</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00592">rte_eventdev.h:592</a></div></div>
<div class="ttc" id="astructrte__event__eth__rx__adapter__queue__conf_html"><div class="ttname"><a href="structrte__event__eth__rx__adapter__queue__conf.html">rte_event_eth_rx_adapter_queue_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__rx__adapter_8h_source.html#l00141">rte_event_eth_rx_adapter.h:141</a></div></div>
<div class="ttc" id="arte__common_8h_html_ac5169870c983b3463cb226bdb8a94880"><div class="ttname"><a href="rte__common_8h.html#ac5169870c983b3463cb226bdb8a94880">rte_exit</a></div><div class="ttdeci">__rte_noreturn void rte_exit(int exit_code, const char *format,...) __rte_format_printf(2</div></div>
<div class="ttc" id="astructrte__event__dev__config_html_a7dda51b4194009dca0a5763af04a0335"><div class="ttname"><a href="structrte__event__dev__config.html#a7dda51b4194009dca0a5763af04a0335">rte_event_dev_config::nb_event_port_enqueue_depth</a></div><div class="ttdeci">uint32_t nb_event_port_enqueue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00503">rte_eventdev.h:503</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a27f0abd90e6784a4dc1c4f07ece2715a"><div class="ttname"><a href="rte__eventdev_8h.html#a27f0abd90e6784a4dc1c4f07ece2715a">rte_event_port_link</a></div><div class="ttdeci">int rte_event_port_link(uint8_t dev_id, uint8_t port_id, const uint8_t queues[], const uint8_t priorities[], uint16_t nb_links)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ac087670e6e885abcdf046c8e74844cd4"><div class="ttname"><a href="rte__eventdev_8h.html#ac087670e6e885abcdf046c8e74844cd4">rte_event_port_setup</a></div><div class="ttdeci">int rte_event_port_setup(uint8_t dev_id, uint8_t port_id, const struct rte_event_port_conf *port_conf)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ab927860cf68a0c0a8caf96fe9feb2a23"><div class="ttname"><a href="rte__eventdev_8h.html#ab927860cf68a0c0a8caf96fe9feb2a23">RTE_EVENT_OP_RELEASE</a></div><div class="ttdeci">#define RTE_EVENT_OP_RELEASE</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01036">rte_eventdev.h:1005</a></div></div>
<div class="ttc" id="astructrte__event_html_a7c048c65cf7361ad984ca61d1d9f5b3b"><div class="ttname"><a href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">rte_event::queue_id</a></div><div class="ttdeci">uint8_t queue_id</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01077">rte_eventdev.h:1077</a></div></div>
<div class="ttc" id="arte__service_8h_html_ac98cd1ba6bee29d631cfd293c0872b77"><div class="ttname"><a href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a></div><div class="ttdeci">int32_t rte_service_set_runstate_mapped_check(uint32_t id, int32_t enable)</div></div>
<div class="ttc" id="arte__lcore_8h_html_adfb2b334e7e73f534f25e8888a8a775f"><div class="ttname"><a href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a></div><div class="ttdeci">static unsigned rte_lcore_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="rte__lcore_8h_source.html#l00075">rte_lcore.h:75</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_abe12d7b973444febfd97570d7f3f69d8"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#abe12d7b973444febfd97570d7f3f69d8">rte_event_eth_rx_adapter_queue_add</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_queue_add(uint8_t id, uint16_t eth_dev_id, int32_t rx_queue_id, const struct rte_event_eth_rx_adapter_queue_conf *conf)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_ae7110b5d5dced8f42505bff5d9e3f0ea"><div class="ttname"><a href="rte__ethdev_8h.html#ae7110b5d5dced8f42505bff5d9e3f0ea">DEV_TX_OFFLOAD_MBUF_FAST_FREE</a></div><div class="ttdeci">#define DEV_TX_OFFLOAD_MBUF_FAST_FREE</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01401">rte_ethdev.h:1397</a></div></div>
<div class="ttc" id="astructrte__eth__rss__conf_html_ad70f17882a835e5d4e38c64a9f872fdc"><div class="ttname"><a href="structrte__eth__rss__conf.html#ad70f17882a835e5d4e38c64a9f872fdc">rte_eth_rss_conf::rss_hf</a></div><div class="ttdeci">uint64_t rss_hf</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00457">rte_ethdev.h:457</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a416488eee18e9e740dba1c61a312f06a"><div class="ttname"><a href="rte__eventdev_8h.html#a416488eee18e9e740dba1c61a312f06a">RTE_EVENT_OP_FORWARD</a></div><div class="ttdeci">#define RTE_EVENT_OP_FORWARD</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01004">rte_eventdev.h:997</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_af5d3efc148e69c47d8bfb16c71a7f72d"><div class="ttname"><a href="rte__eventdev_8h.html#af5d3efc148e69c47d8bfb16c71a7f72d">RTE_EVENT_DEV_CAP_DISTRIBUTED_SCHED</a></div><div class="ttdeci">#define RTE_EVENT_DEV_CAP_DISTRIBUTED_SCHED</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00245">rte_eventdev.h:237</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a6541eb8822285c7b77455636201d5134"><div class="ttname"><a href="rte__eventdev_8h.html#a6541eb8822285c7b77455636201d5134">rte_event_dev_count</a></div><div class="ttdeci">uint8_t rte_event_dev_count(void)</div></div>
<div class="ttc" id="astructrte__eth__txmode_html_a6cfe3b3ee46e9a8b8c62a64294b0b564"><div class="ttname"><a href="structrte__eth__txmode.html#a6cfe3b3ee46e9a8b8c62a64294b0b564">rte_eth_txmode::offloads</a></div><div class="ttdeci">uint64_t offloads</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00959">rte_ethdev.h:959</a></div></div>
<div class="ttc" id="astructrte__event__dev__info_html_adeb44cf1abea6a0f8c28c77816dc863d"><div class="ttname"><a href="structrte__event__dev__info.html#adeb44cf1abea6a0f8c28c77816dc863d">rte_event_dev_info::dev</a></div><div class="ttdeci">struct rte_device * dev</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00358">rte_eventdev.h:358</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a9ab708089665bebcd65cefe5383b24f2"><div class="ttname"><a href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a></div><div class="ttdeci">uint16_t rte_eth_dev_count_avail(void)</div></div>
<div class="ttc" id="astructrte__event_html"><div class="ttname"><a href="structrte__event.html">rte_event</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01043">rte_eventdev.h:1043</a></div></div>
<div class="ttc" id="astructrte__event__dev__config_html_aebd006fc3899659df0c64802f7b751c8"><div class="ttname"><a href="structrte__event__dev__config.html#aebd006fc3899659df0c64802f7b751c8">rte_event_dev_config::nb_events_limit</a></div><div class="ttdeci">int32_t nb_events_limit</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00472">rte_eventdev.h:472</a></div></div>
<div class="ttc" id="astructrte__eth__rxmode_html_a6cfe3b3ee46e9a8b8c62a64294b0b564"><div class="ttname"><a href="structrte__eth__rxmode.html#a6cfe3b3ee46e9a8b8c62a64294b0b564">rte_eth_rxmode::offloads</a></div><div class="ttdeci">uint64_t offloads</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00412">rte_ethdev.h:412</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_ab6e99f06a45adaa095b257b93ebaf201"><div class="ttname"><a href="rte__eventdev_8h.html#ab6e99f06a45adaa095b257b93ebaf201">rte_event_dev_start</a></div><div class="ttdeci">int rte_event_dev_start(uint8_t dev_id)</div></div>
<div class="ttc" id="astructrte__mempool_html"><div class="ttname"><a href="structrte__mempool.html">rte_mempool</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__mempool_8h_source.html#l00207">rte_mempool.h:207</a></div></div>
<div class="ttc" id="arte__mbuf_8h_html_a593921f13307803b94bbb4e0932db962"><div class="ttname"><a href="rte__mbuf_8h.html#a593921f13307803b94bbb4e0932db962">rte_pktmbuf_pool_create</a></div><div class="ttdeci">struct rte_mempool * rte_pktmbuf_pool_create(const char *name, unsigned n, unsigned cache_size, uint16_t priv_size, uint16_t data_room_size, int socket_id)</div></div>
<div class="ttc" id="astructrte__event__dev__config_html_a703c026d74436b05fc656652324101e4"><div class="ttname"><a href="structrte__event__dev__config.html#a703c026d74436b05fc656652324101e4">rte_event_dev_config::nb_event_queues</a></div><div class="ttdeci">uint8_t nb_event_queues</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00480">rte_eventdev.h:480</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a5edd34a4114d6a3fda57c5eca9dc745f"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a5edd34a4114d6a3fda57c5eca9dc745f">rte_event_eth_tx_adapter_create</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_create(uint8_t id, uint8_t dev_id, struct rte_event_port_conf *port_config)</div></div>
<div class="ttc" id="arte__service_8h_html_af2726779871ce03d78a1558ccf454619"><div class="ttname"><a href="rte__service_8h.html#af2726779871ce03d78a1558ccf454619">rte_service_runstate_set</a></div><div class="ttdeci">int32_t rte_service_runstate_set(uint32_t id, uint32_t runstate)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_af75a5ef694d67cc0653942d7b2bb6b78"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#af75a5ef694d67cc0653942d7b2bb6b78">rte_event_eth_tx_adapter_start</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_start(uint8_t id)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_a8bb3902202de82dc39d640ea3e402f45"><div class="ttname"><a href="structrte__event__queue__conf.html#a8bb3902202de82dc39d640ea3e402f45">rte_event_queue_conf::event_queue_cfg</a></div><div class="ttdeci">uint32_t event_queue_cfg</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00585">rte_eventdev.h:585</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a36ba70a5a6fce2c2c1f774828ba78f8d"><div class="ttname"><a href="rte__ethdev_8h.html#a36ba70a5a6fce2c2c1f774828ba78f8d">rte_eth_rx_queue_setup</a></div><div class="ttdeci">int rte_eth_rx_queue_setup(uint16_t port_id, uint16_t rx_queue_id, uint16_t nb_rx_desc, unsigned int socket_id, const struct rte_eth_rxconf *rx_conf, struct rte_mempool *mb_pool)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_aba559138ff70b32510631ad1ce5b8da5"><div class="ttname"><a href="rte__eventdev_8h.html#aba559138ff70b32510631ad1ce5b8da5">RTE_EVENT_DEV_PRIORITY_LOWEST</a></div><div class="ttdeci">#define RTE_EVENT_DEV_PRIORITY_LOWEST</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00315">rte_eventdev.h:311</a></div></div>
<div class="ttc" id="astructrte__eth__conf_html_addc9c7bb19ed12f1171c543493553806"><div class="ttname"><a href="structrte__eth__conf.html#addc9c7bb19ed12f1171c543493553806">rte_eth_conf::rss_conf</a></div><div class="ttdeci">struct rte_eth_rss_conf rss_conf</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01327">rte_ethdev.h:1309</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a3c199a28e97411266a069bd07c9757fa"><div class="ttname"><a href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_ATOMIC</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00961">rte_eventdev.h:944</a></div></div>
<div class="ttc" id="astructrte__event_html_a61d971d79c079636b0ede211cd7a2b26"><div class="ttname"><a href="structrte__event.html#a61d971d79c079636b0ede211cd7a2b26">rte_event::mbuf</a></div><div class="ttdeci">struct rte_mbuf * mbuf</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01109">rte_eventdev.h:1109</a></div></div>
<div class="ttc" id="astructrte__eth__conf_html_a084e132696e8d0f59f643d822c8cedb7"><div class="ttname"><a href="structrte__eth__conf.html#a084e132696e8d0f59f643d822c8cedb7">rte_eth_conf::rx_adv_conf</a></div><div class="ttdeci">struct rte_eth_conf::@153 rx_adv_conf</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ac15be67634b343dc7dc7b6d63630abdd"><div class="ttname"><a href="rte__eventdev_8h.html#ac15be67634b343dc7dc7b6d63630abdd">RTE_EVENT_TYPE_CPU</a></div><div class="ttdeci">#define RTE_EVENT_TYPE_CPU</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00986">rte_eventdev.h:983</a></div></div>
<div class="ttc" id="arte__malloc_8h_html_a08b4f906349631c8c5ac8781192871ab"><div class="ttname"><a href="rte__malloc_8h.html#a08b4f906349631c8c5ac8781192871ab">rte_realloc</a></div><div class="ttdeci">void void * rte_realloc(void *ptr, size_t size, unsigned int align) __rte_alloc_size(2)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_af1e7d0094442b3a158e89f120a21687d"><div class="ttname"><a href="rte__eventdev_8h.html#af1e7d0094442b3a158e89f120a21687d">rte_event_dev_configure</a></div><div class="ttdeci">int rte_event_dev_configure(uint8_t dev_id, const struct rte_event_dev_config *dev_conf)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a0938b6c89c22b3de3ee9e8bfa1da2ae7"><div class="ttname"><a href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a></div><div class="ttdeci">#define RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01118">rte_eventdev.h:1115</a></div></div>
<div class="ttc" id="astructrte__eth__conf_html_a1c33c9d2e5cdb14b62ed386bf3159e07"><div class="ttname"><a href="structrte__eth__conf.html#a1c33c9d2e5cdb14b62ed386bf3159e07">rte_eth_conf::txmode</a></div><div class="ttdeci">struct rte_eth_txmode txmode</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01294">rte_ethdev.h:1302</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a2af1610d3ede24979267333cf2da1aab"><div class="ttname"><a href="rte__eventdev_8h.html#a2af1610d3ede24979267333cf2da1aab">rte_event_dequeue_burst</a></div><div class="ttdeci">static uint16_t rte_event_dequeue_burst(uint8_t dev_id, uint8_t port_id, struct rte_event ev[], uint16_t nb_events, uint64_t timeout_ticks)</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01645">rte_eventdev.h:1645</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a70bebdfb5211f97b81b46ff08594ddda"><div class="ttname"><a href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">rte_event_port_conf::new_event_threshold</a></div><div class="ttdeci">int32_t new_event_threshold</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00713">rte_eventdev.h:713</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a335e46a7e6c7b3c17629b007d0a85e62"><div class="ttname"><a href="rte__eventdev_8h.html#a335e46a7e6c7b3c17629b007d0a85e62">rte_event_dev_service_id_get</a></div><div class="ttdeci">int rte_event_dev_service_id_get(uint8_t dev_id, uint32_t *service_id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a56aa49dc89eb44d2e35bd72bd809db17"><div class="ttname"><a href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_caps_get(uint8_t dev_id, uint16_t eth_port_id, uint32_t *caps)</div></div>
<div class="ttc" id="astructrte__event__dev__config_html"><div class="ttname"><a href="structrte__event__dev__config.html">rte_event_dev_config</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00463">rte_eventdev.h:463</a></div></div>
<div class="ttc" id="astructrte__service__spec_html"><div class="ttname"><a href="structrte__service__spec.html">rte_service_spec</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__service__component_8h_source.html#l00031">rte_service_component.h:31</a></div></div>
<div class="ttc" id="astructrte__eth__dev__info_html"><div class="ttname"><a href="structrte__eth__dev__info.html">rte_eth_dev_info</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01504">rte_ethdev.h:1504</a></div></div>
<div class="ttc" id="astructrte__ether__addr_html"><div class="ttname"><a href="structrte__ether__addr.html">rte_ether_addr</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ether_8h_source.html#l00064">rte_ether.h:64</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ad7b46c67203d37fe3a34f11076d970d6"><div class="ttname"><a href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a></div><div class="ttdeci">#define RTE_ETH_FOREACH_DEV(p)</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01858">rte_ethdev.h:1858</a></div></div>
<div class="ttc" id="arte__service_8h_html_a198cc1b4dfbcbdec9d78d5986bd8b5da"><div class="ttname"><a href="rte__service_8h.html#a198cc1b4dfbcbdec9d78d5986bd8b5da">rte_service_run_iter_on_app_lcore</a></div><div class="ttdeci">int32_t rte_service_run_iter_on_app_lcore(uint32_t id, uint32_t serialize_multithread_unsafe)</div></div>
<div class="ttc" id="astructrte__eth__conf_html"><div class="ttname"><a href="structrte__eth__conf.html">rte_eth_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01293">rte_ethdev.h:1293</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ad032e25f712e6ffeb0c19eab1ec1fd2e"><div class="ttname"><a href="rte__ethdev_8h.html#ad032e25f712e6ffeb0c19eab1ec1fd2e">rte_eth_dev_socket_id</a></div><div class="ttdeci">int rte_eth_dev_socket_id(uint16_t port_id)</div></div>
<div class="ttc" id="arte__malloc_8h_html_a1fc82f67711b13aca7e05dc9d58f9dbd"><div class="ttname"><a href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a></div><div class="ttdeci">void void rte_free(void *ptr)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html"><div class="ttname"><a href="structrte__event__queue__conf.html">rte_event_queue_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00562">rte_eventdev.h:562</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a586b8e86131b4ec0ccaf464e847ccf3eaa06694239b7ecf1efa3c9243b9e7b4c0"><div class="ttname"><a href="rte__ethdev_8h.html#a586b8e86131b4ec0ccaf464e847ccf3eaa06694239b7ecf1efa3c9243b9e7b4c0">ETH_MQ_RX_RSS</a></div><div class="ttdeci">@ ETH_MQ_RX_RSS</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00355">rte_ethdev.h:355</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a97bc90e0843c1a5dad5e417f4443788e"><div class="ttname"><a href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">rte_event_port_conf::dequeue_depth</a></div><div class="ttdeci">uint16_t dequeue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00726">rte_eventdev.h:726</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a366ab13bc5be32cbc9ee15e294b4c9a2"><div class="ttname"><a href="rte__eventdev_8h.html#a366ab13bc5be32cbc9ee15e294b4c9a2">RTE_SCHED_TYPE_ORDERED</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_ORDERED</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00942">rte_eventdev.h:917</a></div></div>
<div class="ttc" id="arte__ether_8h_html_af1fb088707ce5b2ebb7825cb69b5cb58"><div class="ttname"><a href="rte__ether_8h.html#af1fb088707ce5b2ebb7825cb69b5cb58">RTE_ETHER_MAX_LEN</a></div><div class="ttdeci">#define RTE_ETHER_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="rte__ether_8h_source.html#l00037">rte_ether.h:37</a></div></div>
<div class="ttc" id="astructrte__event_html_ac4c8cd07c5e4964f925a5498f3e46920"><div class="ttname"><a href="structrte__event.html#ac4c8cd07c5e4964f925a5498f3e46920">rte_event::sub_event_type</a></div><div class="ttdeci">uint32_t sub_event_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01056">rte_eventdev.h:1056</a></div></div>
<div class="ttc" id="astructrte__event_html_a86ef5882fb17753ee8501713dade7347"><div class="ttname"><a href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">rte_event::sched_type</a></div><div class="ttdeci">uint8_t sched_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01072">rte_eventdev.h:1072</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a0d769782a0685a51977a7e98e751b4dc"><div class="ttname"><a href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">rte_event_port_conf::enqueue_depth</a></div><div class="ttdeci">uint16_t enqueue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00732">rte_eventdev.h:732</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html"><div class="ttname"><a href="structrte__event__port__conf.html">rte_event_port_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00712">rte_eventdev.h:712</a></div></div>
<div class="ttc" id="astructrte__event_html_a3fe410a28ee11b520d9dd574d2139f4b"><div class="ttname"><a href="structrte__event.html#a3fe410a28ee11b520d9dd574d2139f4b">rte_event::op</a></div><div class="ttdeci">uint8_t op</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01064">rte_eventdev.h:1064</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
