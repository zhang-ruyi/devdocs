<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: examples/l2fwd-event/main.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/l2fwd-event/main.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright(C) 2019 Marvell International Ltd.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__string__fns_8h.html">rte_string_fns.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;l2fwd_event.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;l2fwd_poll.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* display usage */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">l2fwd_event_usage(<span class="keyword">const</span> <span class="keywordtype">char</span> *prgname)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;%s [EAL options] -- -p PORTMASK [-q NQ]\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -p PORTMASK: hexadecimal bitmask of ports to configure\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -q NQ: number of queue (=ports) per lcore (default is 1)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -T PERIOD: statistics will be refreshed each PERIOD seconds &quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;        (0 to disable, 10 default, 86400 maximum)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --[no-]mac-updating: Enable or disable MAC addresses updating (enabled by default)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;      When enabled:\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;       - The source MAC address is replaced by the TX port MAC address\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;       - The destination MAC address is replaced by 02:00:00:00:00:TX_PORT_ID\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --mode: Packet transfer mode for I/O, poll or eventdev\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;          Default mode = eventdev\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --eventq-sched: Event queue schedule type, ordered, atomic or parallel.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                  Default: atomic\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                  Valid only if --mode=eventdev\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  --config: Configure forwarding port pair mapping\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;        Default: alternate port pairs\n\n&quot;</span>,</div>
<div class="line">           prgname);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_event_parse_portmask(<span class="keyword">const</span> <span class="keywordtype">char</span> *portmask)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *end = NULL;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> pm;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* parse hexadecimal string */</span></div>
<div class="line">    pm = strtoul(portmask, &amp;end, 16);</div>
<div class="line">    <span class="keywordflow">if</span> ((portmask[0] == <span class="charliteral">&#39;\0&#39;</span>) || (end == NULL) || (*end != <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> pm;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_event_parse_nqueue(<span class="keyword">const</span> <span class="keywordtype">char</span> *q_arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *end = NULL;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> n;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* parse hexadecimal string */</span></div>
<div class="line">    n = strtoul(q_arg, &amp;end, 10);</div>
<div class="line">    <span class="keywordflow">if</span> ((q_arg[0] == <span class="charliteral">&#39;\0&#39;</span>) || (end == NULL) || (*end != <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    <span class="keywordflow">if</span> (n == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    <span class="keywordflow">if</span> (n &gt;= MAX_RX_QUEUE_PER_LCORE)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> n;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_event_parse_timer_period(<span class="keyword">const</span> <span class="keywordtype">char</span> *q_arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *end = NULL;</div>
<div class="line">    <span class="keywordtype">int</span> n;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* parse number string */</span></div>
<div class="line">    n = strtol(q_arg, &amp;end, 10);</div>
<div class="line">    <span class="keywordflow">if</span> ((q_arg[0] == <span class="charliteral">&#39;\0&#39;</span>) || (end == NULL) || (*end != <span class="charliteral">&#39;\0&#39;</span>))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    <span class="keywordflow">if</span> (n &gt;= MAX_TIMER_PERIOD)</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> n;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">l2fwd_event_parse_mode(<span class="keyword">const</span> <span class="keywordtype">char</span> *optarg,</div>
<div class="line">               <span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!strncmp(optarg, <span class="stringliteral">&quot;poll&quot;</span>, 4))</div>
<div class="line">        rsrc-&gt;event_mode = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(optarg, <span class="stringliteral">&quot;eventdev&quot;</span>, 8))</div>
<div class="line">        rsrc-&gt;event_mode = <span class="keyword">true</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">l2fwd_event_parse_eventq_sched(<span class="keyword">const</span> <span class="keywordtype">char</span> *optarg,</div>
<div class="line">                   <span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!strncmp(optarg, <span class="stringliteral">&quot;ordered&quot;</span>, 7))</div>
<div class="line">        rsrc-&gt;sched_type = <a name="a0"></a><a class="code" href="rte__eventdev_8h.html#a366ab13bc5be32cbc9ee15e294b4c9a2">RTE_SCHED_TYPE_ORDERED</a>;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(optarg, <span class="stringliteral">&quot;atomic&quot;</span>, 6))</div>
<div class="line">        rsrc-&gt;sched_type = <a name="a1"></a><a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncmp(optarg, <span class="stringliteral">&quot;parallel&quot;</span>, 8))</div>
<div class="line">        rsrc-&gt;sched_type = <a name="a2"></a><a class="code" href="rte__eventdev_8h.html#ac88982845a12ff215c721fccb18ed4a7">RTE_SCHED_TYPE_PARALLEL</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_parse_port_pair_config(<span class="keyword">const</span> <span class="keywordtype">char</span> *q_arg, <span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">enum</span> fieldnames {</div>
<div class="line">        FLD_PORT1 = 0,</div>
<div class="line">        FLD_PORT2,</div>
<div class="line">        _NUM_FLD</div>
<div class="line">    };</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *p0 = q_arg;</div>
<div class="line">    uint16_t int_fld[_NUM_FLD];</div>
<div class="line">    <span class="keywordtype">char</span> *str_fld[_NUM_FLD];</div>
<div class="line">    uint16_t port_pair = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;</div>
<div class="line">    <span class="keywordtype">char</span> s[256];</div>
<div class="line">    <span class="keywordtype">char</span> *end;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((p = strchr(p0, <span class="charliteral">&#39;(&#39;</span>)) != NULL) {</div>
<div class="line">        ++p;</div>
<div class="line">        p0 = strchr(p, <span class="charliteral">&#39;)&#39;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (p0 == NULL)</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">        size = p0 - p;</div>
<div class="line">        <span class="keywordflow">if</span> (size &gt;= <span class="keyword">sizeof</span>(s))</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">        memcpy(s, p, size);</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a3"></a><a class="code" href="rte__string__fns_8h.html#af3ffc4e2ca821bc44f7fd08afbfe3638">rte_strsplit</a>(s, <span class="keyword">sizeof</span>(s), str_fld,</div>
<div class="line">                    _NUM_FLD, <span class="charliteral">&#39;,&#39;</span>) != _NUM_FLD)</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; _NUM_FLD; i++) {</div>
<div class="line">            errno = 0;</div>
<div class="line">            int_fld[i] = strtoul(str_fld[i], &amp;end, 0);</div>
<div class="line">            <span class="keywordflow">if</span> (errno != 0 || end == str_fld[i] ||</div>
<div class="line">                int_fld[i] &gt;= RTE_MAX_ETHPORTS)</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (port_pair &gt;= RTE_MAX_ETHPORTS / 2) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;exceeded max number of port pair params: Current %d Max = %d\n&quot;</span>,</div>
<div class="line">                   port_pair, RTE_MAX_ETHPORTS / 2);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((rsrc-&gt;dst_ports[int_fld[FLD_PORT1]] != UINT32_MAX) ||</div>
<div class="line">            (rsrc-&gt;dst_ports[int_fld[FLD_PORT2]] != UINT32_MAX)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Duplicate port pair (%d,%d) config\n&quot;</span>,</div>
<div class="line">                    int_fld[FLD_PORT1], int_fld[FLD_PORT2]);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        rsrc-&gt;dst_ports[int_fld[FLD_PORT1]] = int_fld[FLD_PORT2];</div>
<div class="line">        rsrc-&gt;dst_ports[int_fld[FLD_PORT2]] = int_fld[FLD_PORT1];</div>
<div class="line"> </div>
<div class="line">        port_pair++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    rsrc-&gt;port_pairs = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> short_options[] =</div>
<div class="line">    <span class="stringliteral">&quot;p:&quot;</span>  <span class="comment">/* portmask */</span></div>
<div class="line">    <span class="stringliteral">&quot;q:&quot;</span>  <span class="comment">/* number of queues */</span></div>
<div class="line">    <span class="stringliteral">&quot;T:&quot;</span>  <span class="comment">/* timer period */</span></div>
<div class="line">    ;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define CMD_LINE_OPT_MAC_UPDATING &quot;mac-updating&quot;</span></div>
<div class="line"><span class="preprocessor">#define CMD_LINE_OPT_NO_MAC_UPDATING &quot;no-mac-updating&quot;</span></div>
<div class="line"><span class="preprocessor">#define CMD_LINE_OPT_MODE &quot;mode&quot;</span></div>
<div class="line"><span class="preprocessor">#define CMD_LINE_OPT_EVENTQ_SCHED &quot;eventq-sched&quot;</span></div>
<div class="line"><span class="preprocessor">#define CMD_LINE_OPT_PORT_PAIR_CONF &quot;config&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> {</div>
<div class="line">    <span class="comment">/* long options mapped to a short option */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* first long only option value must be &gt;= 256, so that we won&#39;t</span></div>
<div class="line"><span class="comment">     * conflict with short options</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    CMD_LINE_OPT_MIN_NUM = 256,</div>
<div class="line">    CMD_LINE_OPT_MODE_NUM,</div>
<div class="line">    CMD_LINE_OPT_EVENTQ_SCHED_NUM,</div>
<div class="line">    CMD_LINE_OPT_PORT_PAIR_CONF_NUM,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Parse the argument given in the command line of the application */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_event_parse_args(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv, <span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> mac_updating = 1;</div>
<div class="line">    <span class="keyword">struct </span>option lgopts[] = {</div>
<div class="line">        { CMD_LINE_OPT_MAC_UPDATING, no_argument, &amp;mac_updating, 1},</div>
<div class="line">        { CMD_LINE_OPT_NO_MAC_UPDATING, no_argument, &amp;mac_updating, 0},</div>
<div class="line">        { CMD_LINE_OPT_MODE, required_argument, NULL,</div>
<div class="line">                            CMD_LINE_OPT_MODE_NUM},</div>
<div class="line">        { CMD_LINE_OPT_EVENTQ_SCHED, required_argument, NULL,</div>
<div class="line">                        CMD_LINE_OPT_EVENTQ_SCHED_NUM},</div>
<div class="line">        { CMD_LINE_OPT_PORT_PAIR_CONF, required_argument, NULL,</div>
<div class="line">                    CMD_LINE_OPT_PORT_PAIR_CONF_NUM},</div>
<div class="line">        {NULL, 0, 0, 0}</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">int</span> opt, ret, timer_secs;</div>
<div class="line">    <span class="keywordtype">char</span> *prgname = argv[0];</div>
<div class="line">    uint16_t port_id;</div>
<div class="line">    <span class="keywordtype">int</span> option_index;</div>
<div class="line">    <span class="keywordtype">char</span> **argvopt;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* reset l2fwd_dst_ports */</span></div>
<div class="line">    <span class="keywordflow">for</span> (port_id = 0; port_id &lt; RTE_MAX_ETHPORTS; port_id++)</div>
<div class="line">        rsrc-&gt;dst_ports[port_id] = UINT32_MAX;</div>
<div class="line"> </div>
<div class="line">    argvopt = argv;</div>
<div class="line">    while ((opt = getopt_long(argc, argvopt, short_options,</div>
<div class="line">                  lgopts, &amp;option_index)) != EOF) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">        <span class="comment">/* portmask */</span></div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div>
<div class="line">            rsrc-&gt;enabled_port_mask =</div>
<div class="line">                    l2fwd_event_parse_portmask(optarg);</div>
<div class="line">            <span class="keywordflow">if</span> (rsrc-&gt;enabled_port_mask == 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;invalid portmask\n&quot;</span>);</div>
<div class="line">                l2fwd_event_usage(prgname);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* nqueue */</span></div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div>
<div class="line">            rsrc-&gt;rx_queue_per_lcore =</div>
<div class="line">                    l2fwd_event_parse_nqueue(optarg);</div>
<div class="line">            <span class="keywordflow">if</span> (rsrc-&gt;rx_queue_per_lcore == 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;invalid queue number\n&quot;</span>);</div>
<div class="line">                l2fwd_event_usage(prgname);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* timer period */</span></div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div>
<div class="line">            timer_secs = l2fwd_event_parse_timer_period(optarg);</div>
<div class="line">            <span class="keywordflow">if</span> (timer_secs &lt; 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;invalid timer period\n&quot;</span>);</div>
<div class="line">                l2fwd_event_usage(prgname);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            rsrc-&gt;timer_period = timer_secs;</div>
<div class="line">            <span class="comment">/* convert to number of cycles */</span></div>
<div class="line">            rsrc-&gt;timer_period *= <a name="a4"></a><a class="code" href="rte__cycles_8h.html#a18f8d53cce1fcc6c1d35000752017151">rte_get_timer_hz</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> CMD_LINE_OPT_MODE_NUM:</div>
<div class="line">            l2fwd_event_parse_mode(optarg, rsrc);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> CMD_LINE_OPT_EVENTQ_SCHED_NUM:</div>
<div class="line">            l2fwd_event_parse_eventq_sched(optarg, rsrc);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> CMD_LINE_OPT_PORT_PAIR_CONF_NUM:</div>
<div class="line">            ret = l2fwd_parse_port_pair_config(optarg, rsrc);</div>
<div class="line">            <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Invalid port pair config\n&quot;</span>);</div>
<div class="line">                l2fwd_event_usage(prgname);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* long options */</span></div>
<div class="line">        <span class="keywordflow">case</span> 0:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            l2fwd_event_usage(prgname);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    rsrc-&gt;mac_updating = mac_updating;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (optind &gt;= 0)</div>
<div class="line">        argv[optind-1] = prgname;</div>
<div class="line"> </div>
<div class="line">    ret = optind-1;</div>
<div class="line">    optind = 1; <span class="comment">/* reset getopt lib */</span></div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Check port pair config with enabled port mask,</span></div>
<div class="line"><span class="comment"> * and for valid port pair combinations.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">check_port_pair_config(<span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    uint32_t port_pair_mask = 0;</div>
<div class="line">    uint32_t portid;</div>
<div class="line">    uint16_t index;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (index = 0; index &lt; <a name="a5"></a><a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>(); index++) {</div>
<div class="line">        <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp; (1 &lt;&lt; index)) == 0 ||</div>
<div class="line">            (port_pair_mask &amp; (1 &lt;&lt; index)))</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        portid = rsrc-&gt;dst_ports[index];</div>
<div class="line">        <span class="keywordflow">if</span> (portid == UINT32_MAX) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;port %u is enabled in but no valid port pair\n&quot;</span>,</div>
<div class="line">                   index);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a6"></a><a class="code" href="rte__ethdev_8h.html#a22dcfd3f5f2b34f657131d66132e23a7">rte_eth_dev_is_valid_port</a>(index)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;port %u is not valid\n&quot;</span>, index);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="rte__ethdev_8h.html#a22dcfd3f5f2b34f657131d66132e23a7">rte_eth_dev_is_valid_port</a>(portid)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;port %u is not valid\n&quot;</span>, portid);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (port_pair_mask &amp; (1 &lt;&lt; portid) &amp;&amp;</div>
<div class="line">                rsrc-&gt;dst_ports[portid] != index) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;port %u is used in other port pairs\n&quot;</span>, portid);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        port_pair_mask |= (1 &lt;&lt; portid);</div>
<div class="line">        port_pair_mask |= (1 &lt;&lt; index);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">l2fwd_launch_one_lcore(<span class="keywordtype">void</span> *args)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>l2fwd_resources *rsrc = args;</div>
<div class="line">    <span class="keyword">struct </span>l2fwd_poll_resources *poll_rsrc = rsrc-&gt;poll_rsrc;</div>
<div class="line">    <span class="keyword">struct </span>l2fwd_event_resources *evt_rsrc = rsrc-&gt;evt_rsrc;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;event_mode)</div>
<div class="line">        evt_rsrc-&gt;ops.l2fwd_event_loop(rsrc);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        poll_rsrc-&gt;poll_main_loop(rsrc);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Check the link status of all ports in up to 9s, and print them finally */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">check_all_ports_link_status(<span class="keyword">struct</span> l2fwd_resources *rsrc,</div>
<div class="line">                uint32_t port_mask)</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#define CHECK_INTERVAL 100 </span><span class="comment">/* 100ms */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define MAX_CHECK_TIME 90 </span><span class="comment">/* 9s (90 * 100ms) in total */</span><span class="preprocessor"></span></div>
<div class="line">    uint16_t port_id;</div>
<div class="line">    uint8_t count, all_ports_up, print_flag = 0;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a7"></a><a class="code" href="structrte__eth__link.html">rte_eth_link</a> link;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keywordtype">char</span> link_status_text[<a name="a8"></a><a class="code" href="rte__ethdev_8h.html#a7a31d6736244603b6a1d7efdd32a8834">RTE_ETH_LINK_MAX_STR_LEN</a>];</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nChecking link status...&quot;</span>);</div>
<div class="line">    fflush(stdout);</div>
<div class="line">    <span class="keywordflow">for</span> (count = 0; count &lt;= MAX_CHECK_TIME; count++) {</div>
<div class="line">        <span class="keywordflow">if</span> (rsrc-&gt;force_quit)</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        all_ports_up = 1;</div>
<div class="line">        <a name="a9"></a><a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">            <span class="keywordflow">if</span> (rsrc-&gt;force_quit)</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            <span class="keywordflow">if</span> ((port_mask &amp; (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            memset(&amp;link, 0, <span class="keyword">sizeof</span>(link));</div>
<div class="line">            ret = <a name="a10"></a><a class="code" href="rte__ethdev_8h.html#ad1263899f41301923c483c3b4ce0486f">rte_eth_link_get_nowait</a>(port_id, &amp;link);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                all_ports_up = 0;</div>
<div class="line">                <span class="keywordflow">if</span> (print_flag == 1)</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Port %u link get failed: %s\n&quot;</span>,</div>
<div class="line">                        port_id, <a name="a11"></a><a class="code" href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a>(-ret));</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* print link status if flag set */</span></div>
<div class="line">            <span class="keywordflow">if</span> (print_flag == 1) {</div>
<div class="line">                <a name="a12"></a><a class="code" href="rte__ethdev_8h.html#a5f51139368b8d1a2c22fdecd90bc4d98">rte_eth_link_to_str</a>(link_status_text,</div>
<div class="line">                    <span class="keyword">sizeof</span>(link_status_text), &amp;link);</div>
<div class="line">                printf(<span class="stringliteral">&quot;Port %d %s\n&quot;</span>, port_id,</div>
<div class="line">                       link_status_text);</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* clear all_ports_up flag if any link down */</span></div>
<div class="line">            <span class="keywordflow">if</span> (link.link_status == <a name="a13"></a><a class="code" href="rte__ethdev_8h.html#a08c012f37e07726170ff67daf667d850">ETH_LINK_DOWN</a>) {</div>
<div class="line">                all_ports_up = 0;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/* after finally printing all link status, get out */</span></div>
<div class="line">        <span class="keywordflow">if</span> (print_flag == 1)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (all_ports_up == 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line">            fflush(stdout);</div>
<div class="line">            <a name="a14"></a><a class="code" href="rte__cycles_8h.html#af73b844d50b98de74b1a0e1730262f85">rte_delay_ms</a>(CHECK_INTERVAL);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* set the print_flag if all ports up or timeout */</span></div>
<div class="line">        <span class="keywordflow">if</span> (all_ports_up == 1 || count == (MAX_CHECK_TIME - 1)) {</div>
<div class="line">            print_flag = 1;</div>
<div class="line">            printf(<span class="stringliteral">&quot;done\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Print out statistics on packets dropped */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">print_stats(<span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    uint64_t total_packets_dropped, total_packets_tx, total_packets_rx;</div>
<div class="line">    uint32_t port_id;</div>
<div class="line"> </div>
<div class="line">    total_packets_dropped = 0;</div>
<div class="line">    total_packets_tx = 0;</div>
<div class="line">    total_packets_rx = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> clr[] = {27, <span class="charliteral">&#39;[&#39;</span>, <span class="charliteral">&#39;2&#39;</span>, <span class="charliteral">&#39;J&#39;</span>, <span class="charliteral">&#39;\0&#39;</span> };</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> topLeft[] = {27, <span class="charliteral">&#39;[&#39;</span>, <span class="charliteral">&#39;1&#39;</span>, <span class="charliteral">&#39;;&#39;</span>, <span class="charliteral">&#39;1&#39;</span>, <span class="charliteral">&#39;H&#39;</span>, <span class="charliteral">&#39;\0&#39;</span> };</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Clear screen and move to top left */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;%s%s&quot;</span>, clr, topLeft);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nPort statistics ====================================&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (port_id = 0; port_id &lt; RTE_MAX_ETHPORTS; port_id++) {</div>
<div class="line">        <span class="comment">/* skip disabled ports */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp; (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        printf(<span class="stringliteral">&quot;\nStatistics for port %u ------------------------------&quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;\nPackets sent: %29&quot;</span>PRIu64</div>
<div class="line">               <span class="stringliteral">&quot;\nPackets received: %25&quot;</span>PRIu64</div>
<div class="line">               <span class="stringliteral">&quot;\nPackets dropped: %26&quot;</span>PRIu64,</div>
<div class="line">               port_id,</div>
<div class="line">               rsrc-&gt;port_stats[port_id].tx,</div>
<div class="line">               rsrc-&gt;port_stats[port_id].rx,</div>
<div class="line">               rsrc-&gt;port_stats[port_id].dropped);</div>
<div class="line"> </div>
<div class="line">        total_packets_dropped +=</div>
<div class="line">                    rsrc-&gt;port_stats[port_id].dropped;</div>
<div class="line">        total_packets_tx += rsrc-&gt;port_stats[port_id].tx;</div>
<div class="line">        total_packets_rx += rsrc-&gt;port_stats[port_id].rx;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;event_mode) {</div>
<div class="line">        <span class="keyword">struct </span>l2fwd_event_resources *evt_rsrc = rsrc-&gt;evt_rsrc;</div>
<div class="line">        <span class="keyword">struct </span><a name="_a15"></a><a class="code" href="structrte__event__eth__rx__adapter__stats.html">rte_event_eth_rx_adapter_stats</a> rx_adptr_stats;</div>
<div class="line">        <span class="keyword">struct </span><a name="_a16"></a><a class="code" href="structrte__event__eth__tx__adapter__stats.html">rte_event_eth_tx_adapter_stats</a> tx_adptr_stats;</div>
<div class="line">        <span class="keywordtype">int</span> ret, i;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; evt_rsrc-&gt;rx_adptr.nb_rx_adptr; i++) {</div>
<div class="line">            ret = <a name="a17"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#aa5772baf3a09c2776af8566ff8ee014c">rte_event_eth_rx_adapter_stats_get</a>(</div>
<div class="line">                    evt_rsrc-&gt;rx_adptr.rx_adptr[i],</div>
<div class="line">                    &amp;rx_adptr_stats);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;\nRx adapter[%d] statistics====================&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot;\nReceive queue poll count: %17&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nReceived packet count: %20&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nEventdev enqueue count: %19&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nEventdev enqueue retry count: %13&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nReceived packet dropped count: %12&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nRx enqueue start timestamp: %15&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nRx enqueue block cycles: %18&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nRx enqueue unblock timestamp: %13&quot;</span>PRIu64,</div>
<div class="line">                   evt_rsrc-&gt;rx_adptr.rx_adptr[i],</div>
<div class="line">                   rx_adptr_stats.rx_poll_count,</div>
<div class="line">                   rx_adptr_stats.rx_packets,</div>
<div class="line">                   rx_adptr_stats.rx_enq_count,</div>
<div class="line">                   rx_adptr_stats.rx_enq_retry,</div>
<div class="line">                   rx_adptr_stats.rx_dropped,</div>
<div class="line">                   rx_adptr_stats.rx_enq_start_ts,</div>
<div class="line">                   rx_adptr_stats.rx_enq_block_cycles,</div>
<div class="line">                   rx_adptr_stats.rx_enq_end_ts);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt;  evt_rsrc-&gt;tx_adptr.nb_tx_adptr; i++) {</div>
<div class="line">            ret = <a name="a18"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#ac4b5b1501d4e75bf459e69c4503e275a">rte_event_eth_tx_adapter_stats_get</a>(</div>
<div class="line">                    evt_rsrc-&gt;tx_adptr.tx_adptr[i],</div>
<div class="line">                    &amp;tx_adptr_stats);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;\nTx adapter[%d] statistics====================&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot;\nNumber of transmit retries: %15&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nNumber of packets transmitted: %12&quot;</span>PRIu64</div>
<div class="line">                   <span class="stringliteral">&quot;\nNumber of packets dropped: %16&quot;</span>PRIu64,</div>
<div class="line">                   evt_rsrc-&gt;tx_adptr.tx_adptr[i],</div>
<div class="line">                   tx_adptr_stats.tx_retry,</div>
<div class="line">                   tx_adptr_stats.tx_packets,</div>
<div class="line">                   tx_adptr_stats.tx_dropped);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;\nAggregate lcore statistics =========================&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\nTotal packets sent: %23&quot;</span>PRIu64</div>
<div class="line">           <span class="stringliteral">&quot;\nTotal packets received: %19&quot;</span>PRIu64</div>
<div class="line">           <span class="stringliteral">&quot;\nTotal packets dropped: %20&quot;</span>PRIu64,</div>
<div class="line">           total_packets_tx,</div>
<div class="line">           total_packets_rx,</div>
<div class="line">           total_packets_dropped);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n====================================================\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    fflush(stdout);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">l2fwd_event_print_stats(<span class="keyword">struct</span> l2fwd_resources *rsrc)</div>
<div class="line">{</div>
<div class="line">    uint64_t prev_tsc = 0, diff_tsc, cur_tsc, timer_tsc = 0;</div>
<div class="line">    <span class="keyword">const</span> uint64_t timer_period = rsrc-&gt;timer_period;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!rsrc-&gt;force_quit) {</div>
<div class="line">        <span class="comment">/* if timer is enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> (timer_period &gt; 0) {</div>
<div class="line">            cur_tsc = rte_rdtsc();</div>
<div class="line">            diff_tsc = cur_tsc - prev_tsc;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* advance the timer */</span></div>
<div class="line">            timer_tsc += diff_tsc;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* if timer has reached its timeout */</span></div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a19"></a><a class="code" href="rte__branch__prediction_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a>(timer_tsc &gt;= timer_period)) {</div>
<div class="line">                print_stats(rsrc);</div>
<div class="line">                <span class="comment">/* reset the timer */</span></div>
<div class="line">                timer_tsc = 0;</div>
<div class="line">            }</div>
<div class="line">            prev_tsc = cur_tsc;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">signal_handler(<span class="keywordtype">int</span> signum)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>l2fwd_resources *rsrc = l2fwd_get_rsrc();</div>
<div class="line">    <span class="keywordflow">if</span> (signum == SIGINT || signum == SIGTERM) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\nSignal %d received, preparing to exit...\n&quot;</span>,</div>
<div class="line">                signum);</div>
<div class="line">        rsrc-&gt;force_quit = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>l2fwd_resources *rsrc;</div>
<div class="line">    uint16_t nb_ports_available = 0;</div>
<div class="line">    uint32_t nb_ports_in_mask = 0;</div>
<div class="line">    uint16_t port_id, last_port;</div>
<div class="line">    uint32_t nb_mbufs;</div>
<div class="line">    uint16_t nb_ports;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* init EAL */</span></div>
<div class="line">    ret = <a name="a20"></a><a class="code" href="rte__eal_8h.html#a5c3f4dddc25e38c5a186ecd8a69260e3">rte_eal_init</a>(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <a name="a21"></a><a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;Invalid EAL arguments\n&quot;</span>);</div>
<div class="line">    argc -= ret;</div>
<div class="line">    argv += ret;</div>
<div class="line"> </div>
<div class="line">    rsrc = l2fwd_get_rsrc();</div>
<div class="line"> </div>
<div class="line">    signal(SIGINT, signal_handler);</div>
<div class="line">    signal(SIGTERM, signal_handler);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* parse application arguments (after the EAL ones) */</span></div>
<div class="line">    ret = l2fwd_event_parse_args(argc, argv, rsrc);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;Invalid L2FWD arguments\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;MAC updating %s\n&quot;</span>, rsrc-&gt;mac_updating ? <span class="stringliteral">&quot;enabled&quot;</span> :</div>
<div class="line">            <span class="stringliteral">&quot;disabled&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    nb_ports = <a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (nb_ports == 0)</div>
<div class="line">        <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;No Ethernet ports - bye\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* check port mask to possible port mask */</span></div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;enabled_port_mask &amp; ~((1 &lt;&lt; nb_ports) - 1))</div>
<div class="line">        <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;Invalid portmask; possible (0x%x)\n&quot;</span>,</div>
<div class="line">            (1 &lt;&lt; nb_ports) - 1);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!rsrc-&gt;port_pairs) {</div>
<div class="line">        last_port = 0;</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Each logical core is assigned a dedicated TX queue on each</span></div>
<div class="line"><span class="comment">         * port.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">            <span class="comment">/* skip ports that are not enabled */</span></div>
<div class="line">            <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp; (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (nb_ports_in_mask % 2) {</div>
<div class="line">                rsrc-&gt;dst_ports[port_id] = last_port;</div>
<div class="line">                rsrc-&gt;dst_ports[last_port] = port_id;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                last_port = port_id;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            nb_ports_in_mask++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (nb_ports_in_mask % 2) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Notice: odd number of ports in portmask.\n&quot;</span>);</div>
<div class="line">            rsrc-&gt;dst_ports[last_port] = last_port;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (check_port_pair_config(rsrc) &lt; 0)</div>
<div class="line">            <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;Invalid port pair config\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    nb_mbufs = <a name="a22"></a><a class="code" href="rte__common_8h.html#a8df8b303b8ea240cf6aebf937fd21eaf">RTE_MAX</a>(nb_ports * (RTE_TEST_RX_DESC_DEFAULT +</div>
<div class="line">                       RTE_TEST_TX_DESC_DEFAULT +</div>
<div class="line">                       MAX_PKT_BURST + <a name="a23"></a><a class="code" href="rte__lcore_8h.html#a1728dc7f14571ba778d3b5b41aa09283">rte_lcore_count</a>() *</div>
<div class="line">                       MEMPOOL_CACHE_SIZE), 8192U);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create the mbuf pool */</span></div>
<div class="line">    rsrc-&gt;pktmbuf_pool = <a name="a24"></a><a class="code" href="rte__mbuf_8h.html#a593921f13307803b94bbb4e0932db962">rte_pktmbuf_pool_create</a>(<span class="stringliteral">&quot;mbuf_pool&quot;</span>,</div>
<div class="line">            nb_mbufs, MEMPOOL_CACHE_SIZE, 0,</div>
<div class="line">            RTE_MBUF_DEFAULT_BUF_SIZE, <a name="a25"></a><a class="code" href="rte__lcore_8h.html#a7c8da4664df26a64cf05dc508a4f26df">rte_socket_id</a>());</div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;pktmbuf_pool == NULL)</div>
<div class="line">        <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;Cannot init mbuf pool\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    nb_ports_available = l2fwd_event_init_ports(rsrc);</div>
<div class="line">    <span class="keywordflow">if</span> (!nb_ports_available)</div>
<div class="line">        <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;All available ports are disabled. Please set portmask.\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure eventdev parameters if required */</span></div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;event_mode)</div>
<div class="line">        l2fwd_event_resource_setup(rsrc);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        l2fwd_poll_resource_setup(rsrc);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* initialize port stats */</span></div>
<div class="line">    memset(&amp;rsrc-&gt;port_stats, 0,</div>
<div class="line">                    <span class="keyword">sizeof</span>(<span class="keyword">struct</span> l2fwd_port_statistics));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* All settings are done. Now enable eth devices */</span></div>
<div class="line">    <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">        <span class="comment">/* skip ports that are not enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp;</div>
<div class="line">                    (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a26"></a><a class="code" href="rte__ethdev_8h.html#afdc834c1c52e9fb512301990468ca7c2">rte_eth_dev_start</a>(port_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">            <a class="code" href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a>(<span class="stringliteral">&quot;rte_eth_dev_start:err=%d, port=%u\n&quot;</span>, ret,</div>
<div class="line">                  port_id);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;event_mode)</div>
<div class="line">        l2fwd_event_service_setup(rsrc);</div>
<div class="line"> </div>
<div class="line">    check_all_ports_link_status(rsrc, rsrc-&gt;enabled_port_mask);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* launch per-lcore init on every lcore */</span></div>
<div class="line">    <a name="a27"></a><a class="code" href="rte__launch_8h.html#acc0b1cfdc31fa73329acd51dcea31210">rte_eal_mp_remote_launch</a>(l2fwd_launch_one_lcore, rsrc,</div>
<div class="line">                 <a name="a28"></a><a class="code" href="rte__launch_8h.html#a7fe96b0e5d3a6a8cf9b8d1a27cf3f159ae26b470d25055b3b60b92a53274da9b8">SKIP_MAIN</a>);</div>
<div class="line">    l2fwd_event_print_stats(rsrc);</div>
<div class="line">    <span class="keywordflow">if</span> (rsrc-&gt;event_mode) {</div>
<div class="line">        <span class="keyword">struct </span>l2fwd_event_resources *evt_rsrc =</div>
<div class="line">                            rsrc-&gt;evt_rsrc;</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; evt_rsrc-&gt;rx_adptr.nb_rx_adptr; i++)</div>
<div class="line">            <a name="a29"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a7f450da6c7dc2404adcfb86ab16b3aa1">rte_event_eth_rx_adapter_stop</a>(</div>
<div class="line">                evt_rsrc-&gt;rx_adptr.rx_adptr[i]);</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; evt_rsrc-&gt;tx_adptr.nb_tx_adptr; i++)</div>
<div class="line">            <a name="a30"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#aa3e9c8dac17672582165dc751a4298c8">rte_event_eth_tx_adapter_stop</a>(</div>
<div class="line">                evt_rsrc-&gt;tx_adptr.tx_adptr[i]);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">            <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp;</div>
<div class="line">                            (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            ret = <a name="a31"></a><a class="code" href="rte__ethdev_8h.html#a6fc010cf6216331c50bc02d2fd4e614f">rte_eth_dev_stop</a>(port_id);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">                printf(<span class="stringliteral">&quot;rte_eth_dev_stop:err=%d, port=%u\n&quot;</span>,</div>
<div class="line">                       ret, port_id);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a32"></a><a class="code" href="rte__launch_8h.html#a7760d6e89a309af9b80767be641bfa18">rte_eal_mp_wait_lcore</a>();</div>
<div class="line">        <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">            <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp;</div>
<div class="line">                            (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            <a name="a33"></a><a class="code" href="rte__ethdev_8h.html#ac2c7507787a5520e8049fff94432169e">rte_eth_dev_close</a>(port_id);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a name="a34"></a><a class="code" href="rte__eventdev_8h.html#a644f6cc4ab24a5c07bfff9b0f5c42e8e">rte_event_dev_stop</a>(evt_rsrc-&gt;event_d_id);</div>
<div class="line">        <a name="a35"></a><a class="code" href="rte__eventdev_8h.html#af70f4ed704d89a4ffce3b4c105bac076">rte_event_dev_close</a>(evt_rsrc-&gt;event_d_id);</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="rte__launch_8h.html#a7760d6e89a309af9b80767be641bfa18">rte_eal_mp_wait_lcore</a>();</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line">            <span class="keywordflow">if</span> ((rsrc-&gt;enabled_port_mask &amp;</div>
<div class="line">                            (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            printf(<span class="stringliteral">&quot;Closing port %d...&quot;</span>, port_id);</div>
<div class="line">            ret = <a class="code" href="rte__ethdev_8h.html#a6fc010cf6216331c50bc02d2fd4e614f">rte_eth_dev_stop</a>(port_id);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">                printf(<span class="stringliteral">&quot;rte_eth_dev_stop:err=%d, port=%u\n&quot;</span>,</div>
<div class="line">                       ret, port_id);</div>
<div class="line">            <a class="code" href="rte__ethdev_8h.html#ac2c7507787a5520e8049fff94432169e">rte_eth_dev_close</a>(port_id);</div>
<div class="line">            printf(<span class="stringliteral">&quot; Done\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;Bye...\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="arte__common_8h_html_a8df8b303b8ea240cf6aebf937fd21eaf"><div class="ttname"><a href="rte__common_8h.html#a8df8b303b8ea240cf6aebf937fd21eaf">RTE_MAX</a></div><div class="ttdeci">#define RTE_MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00583">rte_common.h:583</a></div></div>
<div class="ttc" id="arte__launch_8h_html_a7760d6e89a309af9b80767be641bfa18"><div class="ttname"><a href="rte__launch_8h.html#a7760d6e89a309af9b80767be641bfa18">rte_eal_mp_wait_lcore</a></div><div class="ttdeci">void rte_eal_mp_wait_lcore(void)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a5f51139368b8d1a2c22fdecd90bc4d98"><div class="ttname"><a href="rte__ethdev_8h.html#a5f51139368b8d1a2c22fdecd90bc4d98">rte_eth_link_to_str</a></div><div class="ttdeci">__rte_experimental int rte_eth_link_to_str(char *str, size_t len, const struct rte_eth_link *eth_link)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a644f6cc4ab24a5c07bfff9b0f5c42e8e"><div class="ttname"><a href="rte__eventdev_8h.html#a644f6cc4ab24a5c07bfff9b0f5c42e8e">rte_event_dev_stop</a></div><div class="ttdeci">void rte_event_dev_stop(uint8_t dev_id)</div></div>
<div class="ttc" id="arte__branch__prediction_8h_html_ac6c45889010c1bd68631771b64f18101"><div class="ttname"><a href="rte__branch__prediction_8h.html#ac6c45889010c1bd68631771b64f18101">unlikely</a></div><div class="ttdeci">#define unlikely(x)</div><div class="ttdef"><b>Definition:</b> <a href="rte__branch__prediction_8h_source.html#l00038">rte_branch_prediction.h:38</a></div></div>
<div class="ttc" id="arte__launch_8h_html_acc0b1cfdc31fa73329acd51dcea31210"><div class="ttname"><a href="rte__launch_8h.html#acc0b1cfdc31fa73329acd51dcea31210">rte_eal_mp_remote_launch</a></div><div class="ttdeci">int rte_eal_mp_remote_launch(lcore_function_t *f, void *arg, enum rte_rmt_call_main_t call_main)</div></div>
<div class="ttc" id="arte__lcore_8h_html_a7c8da4664df26a64cf05dc508a4f26df"><div class="ttname"><a href="rte__lcore_8h.html#a7c8da4664df26a64cf05dc508a4f26df">rte_socket_id</a></div><div class="ttdeci">unsigned int rte_socket_id(void)</div></div>
<div class="ttc" id="arte__errno_8h_html_a129a7eb4cfa1f5bdac5783bf49137d06"><div class="ttname"><a href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a></div><div class="ttdeci">const char * rte_strerror(int errnum)</div></div>
<div class="ttc" id="arte__string__fns_8h_html_af3ffc4e2ca821bc44f7fd08afbfe3638"><div class="ttname"><a href="rte__string__fns_8h.html#af3ffc4e2ca821bc44f7fd08afbfe3638">rte_strsplit</a></div><div class="ttdeci">int rte_strsplit(char *string, int stringlen, char **tokens, int maxtokens, char delim)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_aa5772baf3a09c2776af8566ff8ee014c"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#aa5772baf3a09c2776af8566ff8ee014c">rte_event_eth_rx_adapter_stats_get</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_stats_get(uint8_t id, struct rte_event_eth_rx_adapter_stats *stats)</div></div>
<div class="ttc" id="astructrte__eth__link_html"><div class="ttname"><a href="structrte__eth__link.html">rte_eth_link</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00313">rte_ethdev.h:313</a></div></div>
<div class="ttc" id="arte__string__fns_8h_html"><div class="ttname"><a href="rte__string__fns_8h.html">rte_string_fns.h</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_aa3e9c8dac17672582165dc751a4298c8"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#aa3e9c8dac17672582165dc751a4298c8">rte_event_eth_tx_adapter_stop</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_stop(uint8_t id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ac88982845a12ff215c721fccb18ed4a7"><div class="ttname"><a href="rte__eventdev_8h.html#ac88982845a12ff215c721fccb18ed4a7">RTE_SCHED_TYPE_PARALLEL</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_PARALLEL</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00974">rte_eventdev.h:963</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ad1263899f41301923c483c3b4ce0486f"><div class="ttname"><a href="rte__ethdev_8h.html#ad1263899f41301923c483c3b4ce0486f">rte_eth_link_get_nowait</a></div><div class="ttdeci">int rte_eth_link_get_nowait(uint16_t port_id, struct rte_eth_link *link)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a22dcfd3f5f2b34f657131d66132e23a7"><div class="ttname"><a href="rte__ethdev_8h.html#a22dcfd3f5f2b34f657131d66132e23a7">rte_eth_dev_is_valid_port</a></div><div class="ttdeci">int rte_eth_dev_is_valid_port(uint16_t port_id)</div></div>
<div class="ttc" id="arte__lcore_8h_html_a1728dc7f14571ba778d3b5b41aa09283"><div class="ttname"><a href="rte__lcore_8h.html#a1728dc7f14571ba778d3b5b41aa09283">rte_lcore_count</a></div><div class="ttdeci">unsigned int rte_lcore_count(void)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_afdc834c1c52e9fb512301990468ca7c2"><div class="ttname"><a href="rte__ethdev_8h.html#afdc834c1c52e9fb512301990468ca7c2">rte_eth_dev_start</a></div><div class="ttdeci">int rte_eth_dev_start(uint16_t port_id)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a08c012f37e07726170ff67daf667d850"><div class="ttname"><a href="rte__ethdev_8h.html#a08c012f37e07726170ff67daf667d850">ETH_LINK_DOWN</a></div><div class="ttdeci">#define ETH_LINK_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00323">rte_ethdev.h:323</a></div></div>
<div class="ttc" id="arte__launch_8h_html_a7fe96b0e5d3a6a8cf9b8d1a27cf3f159ae26b470d25055b3b60b92a53274da9b8"><div class="ttname"><a href="rte__launch_8h.html#a7fe96b0e5d3a6a8cf9b8d1a27cf3f159ae26b470d25055b3b60b92a53274da9b8">SKIP_MAIN</a></div><div class="ttdeci">@ SKIP_MAIN</div><div class="ttdef"><b>Definition:</b> <a href="rte__launch_8h_source.html#l00072">rte_launch.h:72</a></div></div>
<div class="ttc" id="arte__debug_8h_html_a9fcab5683ce1c1164c52c17579cc2b5f"><div class="ttname"><a href="rte__debug_8h.html#a9fcab5683ce1c1164c52c17579cc2b5f">rte_panic</a></div><div class="ttdeci">#define rte_panic(...)</div><div class="ttdef"><b>Definition:</b> <a href="rte__debug_8h_source.html#l00043">rte_debug.h:43</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a9ab708089665bebcd65cefe5383b24f2"><div class="ttname"><a href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a></div><div class="ttdeci">uint16_t rte_eth_dev_count_avail(void)</div></div>
<div class="ttc" id="astructrte__event__eth__rx__adapter__stats_html"><div class="ttname"><a href="structrte__event__eth__rx__adapter__stats.html">rte_event_eth_rx_adapter_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__rx__adapter_8h_source.html#l00175">rte_event_eth_rx_adapter.h:175</a></div></div>
<div class="ttc" id="arte__eal_8h_html_a5c3f4dddc25e38c5a186ecd8a69260e3"><div class="ttname"><a href="rte__eal_8h.html#a5c3f4dddc25e38c5a186ecd8a69260e3">rte_eal_init</a></div><div class="ttdeci">int rte_eal_init(int argc, char **argv)</div></div>
<div class="ttc" id="arte__mbuf_8h_html_a593921f13307803b94bbb4e0932db962"><div class="ttname"><a href="rte__mbuf_8h.html#a593921f13307803b94bbb4e0932db962">rte_pktmbuf_pool_create</a></div><div class="ttdeci">struct rte_mempool * rte_pktmbuf_pool_create(const char *name, unsigned n, unsigned cache_size, uint16_t priv_size, uint16_t data_room_size, int socket_id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a3c199a28e97411266a069bd07c9757fa"><div class="ttname"><a href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_ATOMIC</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00961">rte_eventdev.h:944</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_af70f4ed704d89a4ffce3b4c105bac076"><div class="ttname"><a href="rte__eventdev_8h.html#af70f4ed704d89a4ffce3b4c105bac076">rte_event_dev_close</a></div><div class="ttdeci">int rte_event_dev_close(uint8_t dev_id)</div></div>
<div class="ttc" id="astructrte__event__eth__tx__adapter__stats_html"><div class="ttname"><a href="structrte__event__eth__tx__adapter__stats.html">rte_event_eth_tx_adapter_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__tx__adapter_8h_source.html#l00129">rte_event_eth_tx_adapter.h:129</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_ac4b5b1501d4e75bf459e69c4503e275a"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#ac4b5b1501d4e75bf459e69c4503e275a">rte_event_eth_tx_adapter_stats_get</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_stats_get(uint8_t id, struct rte_event_eth_tx_adapter_stats *stats)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a6fc010cf6216331c50bc02d2fd4e614f"><div class="ttname"><a href="rte__ethdev_8h.html#a6fc010cf6216331c50bc02d2fd4e614f">rte_eth_dev_stop</a></div><div class="ttdeci">int rte_eth_dev_stop(uint16_t port_id)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a7f450da6c7dc2404adcfb86ab16b3aa1"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a7f450da6c7dc2404adcfb86ab16b3aa1">rte_event_eth_rx_adapter_stop</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_stop(uint8_t id)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a7a31d6736244603b6a1d7efdd32a8834"><div class="ttname"><a href="rte__ethdev_8h.html#a7a31d6736244603b6a1d7efdd32a8834">RTE_ETH_LINK_MAX_STR_LEN</a></div><div class="ttdeci">#define RTE_ETH_LINK_MAX_STR_LEN</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00327">rte_ethdev.h:327</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ad7b46c67203d37fe3a34f11076d970d6"><div class="ttname"><a href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a></div><div class="ttdeci">#define RTE_ETH_FOREACH_DEV(p)</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01858">rte_ethdev.h:1858</a></div></div>
<div class="ttc" id="arte__cycles_8h_html_af73b844d50b98de74b1a0e1730262f85"><div class="ttname"><a href="rte__cycles_8h.html#af73b844d50b98de74b1a0e1730262f85">rte_delay_ms</a></div><div class="ttdeci">static void rte_delay_ms(unsigned ms)</div><div class="ttdef"><b>Definition:</b> <a href="rte__cycles_8h_source.html#l00148">rte_cycles.h:148</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a366ab13bc5be32cbc9ee15e294b4c9a2"><div class="ttname"><a href="rte__eventdev_8h.html#a366ab13bc5be32cbc9ee15e294b4c9a2">RTE_SCHED_TYPE_ORDERED</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_ORDERED</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00942">rte_eventdev.h:917</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ac2c7507787a5520e8049fff94432169e"><div class="ttname"><a href="rte__ethdev_8h.html#ac2c7507787a5520e8049fff94432169e">rte_eth_dev_close</a></div><div class="ttdeci">int rte_eth_dev_close(uint16_t port_id)</div></div>
<div class="ttc" id="arte__cycles_8h_html_a18f8d53cce1fcc6c1d35000752017151"><div class="ttname"><a href="rte__cycles_8h.html#a18f8d53cce1fcc6c1d35000752017151">rte_get_timer_hz</a></div><div class="ttdeci">static uint64_t rte_get_timer_hz(void)</div><div class="ttdef"><b>Definition:</b> <a href="rte__cycles_8h_source.html#l00116">rte_cycles.h:116</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
