<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: examples/pipeline/cli.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/pipeline/cli.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright(c) 2020 Intel Corporation</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__common_8h.html">rte_common.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__ethdev_8h.html">rte_ethdev.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__swx__port__ethdev_8h.html">rte_swx_port_ethdev.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__swx__port__source__sink_8h.html">rte_swx_port_source_sink.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__swx__pipeline_8h.html">rte_swx_pipeline.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__swx__ctl_8h.html">rte_swx_ctl.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;cli.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;obj.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;thread.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef CMD_MAX_TOKENS</span></div>
<div class="line"><span class="preprocessor">#define CMD_MAX_TOKENS     256</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MSG_OUT_OF_MEMORY   &quot;Not enough memory.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_CMD_UNKNOWN     &quot;Unknown command \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_CMD_UNIMPLEM    &quot;Command \&quot;%s\&quot; not implemented.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_ARG_NOT_ENOUGH  &quot;Not enough arguments for command \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_ARG_TOO_MANY    &quot;Too many arguments for command \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_ARG_MISMATCH    &quot;Wrong number of arguments for command \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_ARG_NOT_FOUND   &quot;Argument \&quot;%s\&quot; not found.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_ARG_INVALID     &quot;Invalid value for argument \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_FILE_ERR        &quot;Error in file \&quot;%s\&quot; at line %u.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_FILE_NOT_ENOUGH &quot;Not enough rules in file \&quot;%s\&quot;.\n&quot;</span></div>
<div class="line"><span class="preprocessor">#define MSG_CMD_FAIL        &quot;Command \&quot;%s\&quot; failed.\n&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define skip_white_spaces(pos)          \</span></div>
<div class="line"><span class="preprocessor">({                      \</span></div>
<div class="line"><span class="preprocessor">    __typeof__(pos) _p = (pos);     \</span></div>
<div class="line"><span class="preprocessor">    for ( ; isspace(*_p); _p++)     \</span></div>
<div class="line"><span class="preprocessor">        ;               \</span></div>
<div class="line"><span class="preprocessor">    _p;                 \</span></div>
<div class="line"><span class="preprocessor">})</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parser_read_uint64(uint64_t *value, <span class="keyword">const</span> <span class="keywordtype">char</span> *p)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *next;</div>
<div class="line">    uint64_t val;</div>
<div class="line"> </div>
<div class="line">    p = skip_white_spaces(p);</div>
<div class="line">    <span class="keywordflow">if</span> (!isdigit(*p))</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    val = strtoul(p, &amp;next, 10);</div>
<div class="line">    <span class="keywordflow">if</span> (p == next)</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    p = next;</div>
<div class="line">    <span class="keywordflow">switch</span> (*p) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>:</div>
<div class="line">        val *= 1024ULL;</div>
<div class="line">        <span class="comment">/* fall through */</span></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>:</div>
<div class="line">        val *= 1024ULL;</div>
<div class="line">        <span class="comment">/* fall through */</span></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:</div>
<div class="line">        val *= 1024ULL;</div>
<div class="line">        <span class="comment">/* fall through */</span></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;K&#39;</span>:</div>
<div class="line">        val *= 1024ULL;</div>
<div class="line">        p++;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = skip_white_spaces(p);</div>
<div class="line">    <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;\0&#39;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    *value = val;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parser_read_uint32(uint32_t *value, <span class="keyword">const</span> <span class="keywordtype">char</span> *p)</div>
<div class="line">{</div>
<div class="line">    uint64_t val = 0;</div>
<div class="line">    <span class="keywordtype">int</span> ret = parser_read_uint64(&amp;val, p);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (val &gt; UINT32_MAX)</div>
<div class="line">        <span class="keywordflow">return</span> -ERANGE;</div>
<div class="line"> </div>
<div class="line">    *value = val;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parser_read_uint16(uint16_t *value, <span class="keyword">const</span> <span class="keywordtype">char</span> *p)</div>
<div class="line">{</div>
<div class="line">    uint64_t val = 0;</div>
<div class="line">    <span class="keywordtype">int</span> ret = parser_read_uint64(&amp;val, p);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (val &gt; UINT16_MAX)</div>
<div class="line">        <span class="keywordflow">return</span> -ERANGE;</div>
<div class="line"> </div>
<div class="line">    *value = val;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define PARSE_DELIMITER &quot; \f\n\r\t\v&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">parse_tokenize_string(<span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">char</span> *tokens[], uint32_t *n_tokens)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((<span class="keywordtype">string</span> == NULL) ||</div>
<div class="line">        (tokens == NULL) ||</div>
<div class="line">        (*n_tokens &lt; 1))</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; *n_tokens; i++) {</div>
<div class="line">        tokens[i] = strtok_r(<span class="keywordtype">string</span>, PARSE_DELIMITER, &amp;<span class="keywordtype">string</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (tokens[i] == NULL)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((i == *n_tokens) &amp;&amp; strtok_r(<span class="keywordtype">string</span>, PARSE_DELIMITER, &amp;<span class="keywordtype">string</span>))</div>
<div class="line">        <span class="keywordflow">return</span> -E2BIG;</div>
<div class="line"> </div>
<div class="line">    *n_tokens = i;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">is_comment(<span class="keywordtype">char</span> *in)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> ((strlen(in) &amp;&amp; index(<span class="stringliteral">&quot;!#%;&quot;</span>, in[0])) ||</div>
<div class="line">        (strncmp(in, <span class="stringliteral">&quot;//&quot;</span>, 2) == 0) ||</div>
<div class="line">        (strncmp(in, <span class="stringliteral">&quot;--&quot;</span>, 2) == 0))</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_mempool_help[] =</div>
<div class="line"><span class="stringliteral">&quot;mempool &lt;mempool_name&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   buffer &lt;buffer_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   pool &lt;pool_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   cache &lt;cache_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   cpu &lt;cpu_id&gt;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_mempool(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>mempool_params p;</div>
<div class="line">    <span class="keywordtype">char</span> *name;</div>
<div class="line">    <span class="keyword">struct </span>mempool *mempool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 10) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    name = tokens[1];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;buffer&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;buffer&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.buffer_size, tokens[3]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;buffer_size&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[4], <span class="stringliteral">&quot;pool&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;pool&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.pool_size, tokens[5]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;pool_size&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[6], <span class="stringliteral">&quot;cache&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;cache&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.cache_size, tokens[7]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;cache_size&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[8], <span class="stringliteral">&quot;cpu&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;cpu&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.cpu_id, tokens[9]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;cpu_id&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    mempool = mempool_create(obj, name, &amp;p);</div>
<div class="line">    <span class="keywordflow">if</span> (mempool == NULL) {</div>
<div class="line">        snprintf(out, out_size, MSG_CMD_FAIL, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_link_help[] =</div>
<div class="line"><span class="stringliteral">&quot;link &lt;link_name&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   dev &lt;device_name&gt; | port &lt;port_id&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   rxq &lt;n_queues&gt; &lt;queue_size&gt; &lt;mempool_name&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   txq &lt;n_queues&gt; &lt;queue_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   promiscuous on | off\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   [rss &lt;qid_0&gt; ... &lt;qid_n&gt;]\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_link(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>link_params p;</div>
<div class="line">    <span class="keyword">struct </span>link_params_rss rss;</div>
<div class="line">    <span class="keyword">struct </span>link *link;</div>
<div class="line">    <span class="keywordtype">char</span> *name;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;p, 0, <span class="keyword">sizeof</span>(p));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((n_tokens &lt; 13) || (n_tokens &gt; 14 + LINK_RXQ_RSS_MAX)) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    name = tokens[1];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;dev&quot;</span>) == 0)</div>
<div class="line">        p.dev_name = tokens[3];</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;port&quot;</span>) == 0) {</div>
<div class="line">        p.dev_name = NULL;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (parser_read_uint16(&amp;p.port_id, tokens[3]) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;port_id&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;dev or port&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[4], <span class="stringliteral">&quot;rxq&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;rxq&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.rx.n_queues, tokens[5]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;n_queues&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.rx.queue_size, tokens[6]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;queue_size&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p.rx.mempool_name = tokens[7];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[8], <span class="stringliteral">&quot;txq&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;txq&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.tx.n_queues, tokens[9]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;n_queues&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;p.tx.queue_size, tokens[10]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;queue_size&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[11], <span class="stringliteral">&quot;promiscuous&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;promiscuous&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[12], <span class="stringliteral">&quot;on&quot;</span>) == 0)</div>
<div class="line">        p.promiscuous = 1;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(tokens[12], <span class="stringliteral">&quot;off&quot;</span>) == 0)</div>
<div class="line">        p.promiscuous = 0;</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;on or off&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* RSS */</span></div>
<div class="line">    p.rx.rss = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens &gt; 13) {</div>
<div class="line">        uint32_t queue_id, i;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[13], <span class="stringliteral">&quot;rss&quot;</span>) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;rss&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        p.rx.rss = &amp;rss;</div>
<div class="line"> </div>
<div class="line">        rss.n_queues = 0;</div>
<div class="line">        <span class="keywordflow">for</span> (i = 14; i &lt; n_tokens; i++) {</div>
<div class="line">            <span class="keywordflow">if</span> (parser_read_uint32(&amp;queue_id, tokens[i]) != 0) {</div>
<div class="line">                snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                    <span class="stringliteral">&quot;queue_id&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            rss.queue_id[rss.n_queues] = queue_id;</div>
<div class="line">            rss.n_queues++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    link = link_create(obj, name, &amp;p);</div>
<div class="line">    <span class="keywordflow">if</span> (link == NULL) {</div>
<div class="line">        snprintf(out, out_size, MSG_CMD_FAIL, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Print the link stats and info */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">print_link_info(<span class="keyword">struct</span> link *link, <span class="keywordtype">char</span> *out, <span class="keywordtype">size_t</span> out_size)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a0"></a><a class="code" href="structrte__eth__stats.html">rte_eth_stats</a> stats;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a1"></a><a class="code" href="structrte__ether__addr.html">rte_ether_addr</a> mac_addr;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a2"></a><a class="code" href="structrte__eth__link.html">rte_eth_link</a> eth_link;</div>
<div class="line">    uint16_t mtu;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;stats, 0, <span class="keyword">sizeof</span>(stats));</div>
<div class="line">    <a name="a3"></a><a class="code" href="rte__ethdev_8h.html#adec226574c53ae413252c9b15f6f4bab">rte_eth_stats_get</a>(link-&gt;port_id, &amp;stats);</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a4"></a><a class="code" href="rte__ethdev_8h.html#a8a28375b279ded9125c99a46bf3956ef">rte_eth_macaddr_get</a>(link-&gt;port_id, &amp;mac_addr);</div>
<div class="line">    <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s: MAC address get failed: %s&quot;</span>,</div>
<div class="line">             link-&gt;name, <a name="a5"></a><a class="code" href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a>(-ret));</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a6"></a><a class="code" href="rte__ethdev_8h.html#a56200b0c25f3ecab5abe9bd2b647c215">rte_eth_link_get</a>(link-&gt;port_id, &amp;eth_link);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s: link get failed: %s&quot;</span>,</div>
<div class="line">             link-&gt;name, <a class="code" href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a>(-ret));</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a7"></a><a class="code" href="rte__ethdev_8h.html#a386c83c7cc16ec9886ecf2925e7be4a3">rte_eth_dev_get_mtu</a>(link-&gt;port_id, &amp;mtu);</div>
<div class="line"> </div>
<div class="line">    snprintf(out, out_size,</div>
<div class="line">        <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;%s: flags=&lt;%s&gt; mtu %u\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tether %02X:%02X:%02X:%02X:%02X:%02X rxqueues %u txqueues %u\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tport# %u  speed %s\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tRX packets %&quot;</span> PRIu64<span class="stringliteral">&quot;  bytes %&quot;</span> PRIu64<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tRX errors %&quot;</span> PRIu64<span class="stringliteral">&quot;  missed %&quot;</span> PRIu64<span class="stringliteral">&quot;  no-mbuf %&quot;</span> PRIu64<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tTX packets %&quot;</span> PRIu64<span class="stringliteral">&quot;  bytes %&quot;</span> PRIu64<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\tTX errors %&quot;</span> PRIu64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">        link-&gt;name,</div>
<div class="line">        eth_link.link_status == 0 ? <span class="stringliteral">&quot;DOWN&quot;</span> : <span class="stringliteral">&quot;UP&quot;</span>,</div>
<div class="line">        mtu,</div>
<div class="line">        mac_addr.addr_bytes[0], mac_addr.addr_bytes[1],</div>
<div class="line">        mac_addr.addr_bytes[2], mac_addr.addr_bytes[3],</div>
<div class="line">        mac_addr.addr_bytes[4], mac_addr.addr_bytes[5],</div>
<div class="line">        link-&gt;n_rxq,</div>
<div class="line">        link-&gt;n_txq,</div>
<div class="line">        link-&gt;port_id,</div>
<div class="line">        <a name="a8"></a><a class="code" href="rte__ethdev_8h.html#ade8a6c56c3b7c65fa4cabf1d1106fdc7">rte_eth_link_speed_to_str</a>(eth_link.link_speed),</div>
<div class="line">        stats.ipackets,</div>
<div class="line">        stats.ibytes,</div>
<div class="line">        stats.ierrors,</div>
<div class="line">        stats.imissed,</div>
<div class="line">        stats.rx_nombuf,</div>
<div class="line">        stats.opackets,</div>
<div class="line">        stats.obytes,</div>
<div class="line">        stats.oerrors);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * link show [&lt;link_name&gt;]</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_link_show(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">          uint32_t n_tokens,</div>
<div class="line">          <span class="keywordtype">char</span> *out,</div>
<div class="line">          <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">          <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>link *link;</div>
<div class="line">    <span class="keywordtype">char</span> *link_name;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 2 &amp;&amp; n_tokens != 3) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens == 2) {</div>
<div class="line">        link = link_next(obj, NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (link != NULL) {</div>
<div class="line">            out_size = out_size - strlen(out);</div>
<div class="line">            out = &amp;out[strlen(out)];</div>
<div class="line"> </div>
<div class="line">            print_link_info(link, out, out_size);</div>
<div class="line">            link = link_next(obj, link);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        out_size = out_size - strlen(out);</div>
<div class="line">        out = &amp;out[strlen(out)];</div>
<div class="line"> </div>
<div class="line">        link_name = tokens[2];</div>
<div class="line">        link = link_find(obj, link_name);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (link == NULL) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                    <span class="stringliteral">&quot;Link does not exist&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        print_link_info(link, out, out_size);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_create_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; create &lt;numa_node&gt;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_create(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    <span class="keywordtype">char</span> *name;</div>
<div class="line">    uint32_t numa_node;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 4) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    name = tokens[1];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;numa_node, tokens[3]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;numa_node&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = pipeline_create(obj, name, (<span class="keywordtype">int</span>)numa_node);</div>
<div class="line">    <span class="keywordflow">if</span> (!p) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;pipeline create error.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_port_in_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; port in &lt;port_id&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   link &lt;link_name&gt; rxq &lt;queue_id&gt; bsz &lt;burst_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   | source &lt;mempool_name&gt; &lt;file_name&gt;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_port_in(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line">    uint32_t port_id = 0, t0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens &lt; 6) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = pipeline_find(obj, tokens[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;port&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;port&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[3], <span class="stringliteral">&quot;in&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;in&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;port_id, tokens[4]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;port_id&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    t0 = 5;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[t0], <span class="stringliteral">&quot;link&quot;</span>) == 0) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a9"></a><a class="code" href="structrte__swx__port__ethdev__reader__params.html">rte_swx_port_ethdev_reader_params</a> params;</div>
<div class="line">        <span class="keyword">struct </span>link *link;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (n_tokens &lt; t0 + 6) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_MISMATCH,</div>
<div class="line">                <span class="stringliteral">&quot;pipeline port in link&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        link = link_find(obj, tokens[t0 + 1]);</div>
<div class="line">        <span class="keywordflow">if</span> (!link) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;link_name&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        params.dev_name = link-&gt;dev_name;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[t0 + 2], <span class="stringliteral">&quot;rxq&quot;</span>) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;rxq&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (parser_read_uint16(&amp;params.queue_id, tokens[t0 + 3]) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;queue_id&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[t0 + 4], <span class="stringliteral">&quot;bsz&quot;</span>) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;bsz&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (parser_read_uint32(&amp;params.burst_size, tokens[t0 + 5])) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;burst_size&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        t0 += 6;</div>
<div class="line"> </div>
<div class="line">        status = <a name="a10"></a><a class="code" href="rte__swx__pipeline_8h.html#a6036e26529510d4ac56bc60350bf385a">rte_swx_pipeline_port_in_config</a>(p-&gt;p,</div>
<div class="line">            port_id,</div>
<div class="line">            <span class="stringliteral">&quot;ethdev&quot;</span>,</div>
<div class="line">            &amp;params);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(tokens[t0], <span class="stringliteral">&quot;source&quot;</span>) == 0) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a11"></a><a class="code" href="structrte__swx__port__source__params.html">rte_swx_port_source_params</a> params;</div>
<div class="line">        <span class="keyword">struct </span>mempool *mp;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (n_tokens &lt; t0 + 3) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_MISMATCH,</div>
<div class="line">                <span class="stringliteral">&quot;pipeline port in source&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        mp = mempool_find(obj, tokens[t0 + 1]);</div>
<div class="line">        <span class="keywordflow">if</span> (!mp) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;mempool_name&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        params.pool = mp-&gt;m;</div>
<div class="line"> </div>
<div class="line">        params.file_name = tokens[t0 + 2];</div>
<div class="line"> </div>
<div class="line">        t0 += 3;</div>
<div class="line"> </div>
<div class="line">        status = <a class="code" href="rte__swx__pipeline_8h.html#a6036e26529510d4ac56bc60350bf385a">rte_swx_pipeline_port_in_config</a>(p-&gt;p,</div>
<div class="line">            port_id,</div>
<div class="line">            <span class="stringliteral">&quot;source&quot;</span>,</div>
<div class="line">            &amp;params);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;port in error.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != t0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_port_out_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; port out &lt;port_id&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   link &lt;link_name&gt; txq &lt;txq_id&gt; bsz &lt;burst_size&gt;\n&quot;</span></div>
<div class="line"><span class="stringliteral">&quot;   | sink &lt;file_name&gt; | none\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_port_out(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line">    uint32_t port_id = 0, t0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens &lt; 6) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = pipeline_find(obj, tokens[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;port&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;port&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[3], <span class="stringliteral">&quot;out&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;out&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;port_id, tokens[4]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;port_id&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    t0 = 5;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[t0], <span class="stringliteral">&quot;link&quot;</span>) == 0) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a12"></a><a class="code" href="structrte__swx__port__ethdev__writer__params.html">rte_swx_port_ethdev_writer_params</a> params;</div>
<div class="line">        <span class="keyword">struct </span>link *link;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (n_tokens &lt; t0 + 6) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_MISMATCH,</div>
<div class="line">                <span class="stringliteral">&quot;pipeline port out link&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        link = link_find(obj, tokens[t0 + 1]);</div>
<div class="line">        <span class="keywordflow">if</span> (!link) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;link_name&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">        params.dev_name = link-&gt;dev_name;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[t0 + 2], <span class="stringliteral">&quot;txq&quot;</span>) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;txq&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (parser_read_uint16(&amp;params.queue_id, tokens[t0 + 3]) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;queue_id&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[t0 + 4], <span class="stringliteral">&quot;bsz&quot;</span>) != 0) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;bsz&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (parser_read_uint32(&amp;params.burst_size, tokens[t0 + 5])) {</div>
<div class="line">            snprintf(out, out_size, MSG_ARG_INVALID,</div>
<div class="line">                <span class="stringliteral">&quot;burst_size&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        t0 += 6;</div>
<div class="line"> </div>
<div class="line">        status = <a name="a13"></a><a class="code" href="rte__swx__pipeline_8h.html#a4346c8f10fac6984bba35ab6f4b17ded">rte_swx_pipeline_port_out_config</a>(p-&gt;p,</div>
<div class="line">            port_id,</div>
<div class="line">            <span class="stringliteral">&quot;ethdev&quot;</span>,</div>
<div class="line">            &amp;params);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(tokens[t0], <span class="stringliteral">&quot;sink&quot;</span>) == 0) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a14"></a><a class="code" href="structrte__swx__port__sink__params.html">rte_swx_port_sink_params</a> params;</div>
<div class="line"> </div>
<div class="line">        params.<a name="a15"></a><a class="code" href="structrte__swx__port__sink__params.html#a89e7a505203c95130b3355a263a38fe2">file_name</a> = strcmp(tokens[t0 + 1], <span class="stringliteral">&quot;none&quot;</span>) ?</div>
<div class="line">            tokens[t0 + 1] : NULL;</div>
<div class="line"> </div>
<div class="line">        t0 += 2;</div>
<div class="line"> </div>
<div class="line">        status = <a class="code" href="rte__swx__pipeline_8h.html#a4346c8f10fac6984bba35ab6f4b17ded">rte_swx_pipeline_port_out_config</a>(p-&gt;p,</div>
<div class="line">            port_id,</div>
<div class="line">            <span class="stringliteral">&quot;sink&quot;</span>,</div>
<div class="line">            &amp;params);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;port out error.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != t0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_build_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; build &lt;spec_file&gt;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_build(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p = NULL;</div>
<div class="line">    FILE *spec = NULL;</div>
<div class="line">    uint32_t err_line;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *err_msg;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 4) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = pipeline_find(obj, tokens[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    spec = fopen(tokens[3], <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (!spec) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Cannot open file %s.\n&quot;</span>, tokens[3]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = <a name="a16"></a><a class="code" href="rte__swx__pipeline_8h.html#a186d248301aafc608a01d8bb690267ca">rte_swx_pipeline_build_from_spec</a>(p-&gt;p,</div>
<div class="line">        spec,</div>
<div class="line">        &amp;err_line,</div>
<div class="line">        &amp;err_msg);</div>
<div class="line">    fclose(spec);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Error %d at line %u: %s\n.&quot;</span>,</div>
<div class="line">            status, err_line, err_msg);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p-&gt;ctl = <a name="a17"></a><a class="code" href="rte__swx__ctl_8h.html#a6d7ceccfbc0ba37e98b5bba7573fe3b7">rte_swx_ctl_pipeline_create</a>(p-&gt;p);</div>
<div class="line">    <span class="keywordflow">if</span> (!p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Pipeline control create failed.&quot;</span>);</div>
<div class="line">        <a name="a18"></a><a class="code" href="rte__swx__pipeline_8h.html#abd5a6e7904b24149286cd31e428056bf">rte_swx_pipeline_free</a>(p-&gt;p);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">table_entry_free(<span class="keyword">struct</span> <a name="_a19"></a><a class="code" href="structrte__swx__table__entry.html">rte_swx_table_entry</a> *entry)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!entry)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    free(entry-&gt;<a name="a20"></a><a class="code" href="structrte__swx__table__entry.html#a302e2291dbff57f770bf469af498ec3a">key</a>);</div>
<div class="line">    free(entry-&gt;<a name="a21"></a><a class="code" href="structrte__swx__table__entry.html#a9520dc6e47b2381d5e38213b09db5b6f">key_mask</a>);</div>
<div class="line">    free(entry-&gt;<a name="a22"></a><a class="code" href="structrte__swx__table__entry.html#ab0a820307ec40efaa2c3b59e4e2bc60d">action_data</a>);</div>
<div class="line">    free(entry);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_table_update_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; table &lt;table_name&gt; update &lt;file_name_add&gt; &quot;</span></div>
<div class="line"><span class="stringliteral">&quot;&lt;file_name_delete&gt; &lt;file_name_default&gt;&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_table_update(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    <span class="keywordtype">char</span> *pipeline_name, *table_name, *line = NULL;</div>
<div class="line">    <span class="keywordtype">char</span> *file_name_add, *file_name_delete, *file_name_default;</div>
<div class="line">    FILE *file_add = NULL, *file_delete = NULL, *file_default = NULL;</div>
<div class="line">    uint32_t line_id;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 8) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pipeline_name = tokens[1];</div>
<div class="line">    p = pipeline_find(obj, pipeline_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || !p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;pipeline_name&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;table&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;table&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    table_name = tokens[3];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[4], <span class="stringliteral">&quot;update&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;update&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    file_name_add = tokens[5];</div>
<div class="line">    file_name_delete = tokens[6];</div>
<div class="line">    file_name_default = tokens[7];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* File open. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(file_name_add, <span class="stringliteral">&quot;none&quot;</span>)) {</div>
<div class="line">        file_add = fopen(file_name_add, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!file_add) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;Cannot open file %s&quot;</span>,</div>
<div class="line">                file_name_add);</div>
<div class="line">            <span class="keywordflow">goto</span> error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(file_name_delete, <span class="stringliteral">&quot;none&quot;</span>)) {</div>
<div class="line">        file_delete = fopen(file_name_delete, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!file_delete) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;Cannot open file %s&quot;</span>,</div>
<div class="line">                file_name_delete);</div>
<div class="line">            <span class="keywordflow">goto</span> error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(file_name_default, <span class="stringliteral">&quot;none&quot;</span>)) {</div>
<div class="line">        file_default = fopen(file_name_default, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (!file_default) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;Cannot open file %s&quot;</span>,</div>
<div class="line">                file_name_default);</div>
<div class="line">            <span class="keywordflow">goto</span> error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!file_add &amp;&amp; !file_delete &amp;&amp; !file_default) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Nothing to be done.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Buffer allocation. */</span></div>
<div class="line">    line = malloc(2048);</div>
<div class="line">    <span class="keywordflow">if</span> (!line) {</div>
<div class="line">        snprintf(out, out_size, MSG_OUT_OF_MEMORY);</div>
<div class="line">        <span class="keywordflow">goto</span> error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Add. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (file_add)</div>
<div class="line">        <span class="keywordflow">for</span> (line_id = 1; ; line_id++) {</div>
<div class="line">            <span class="keyword">struct </span><a class="code" href="structrte__swx__table__entry.html">rte_swx_table_entry</a> *entry;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (fgets(line, 2048, file_add) == NULL)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            entry = <a name="a23"></a><a class="code" href="rte__swx__ctl_8h.html#a027e3bfd07f8407d3d9b8c69dc0f0e33">rte_swx_ctl_pipeline_table_entry_read</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                line);</div>
<div class="line">            <span class="keywordflow">if</span> (!entry) {</div>
<div class="line">                snprintf(out, out_size, MSG_FILE_ERR,</div>
<div class="line">                    file_name_add, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            status = <a name="a24"></a><a class="code" href="rte__swx__ctl_8h.html#a20d4a9cd44df3c327a1c45067359355f">rte_swx_ctl_pipeline_table_entry_add</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                entry);</div>
<div class="line">            table_entry_free(entry);</div>
<div class="line">            <span class="keywordflow">if</span> (status) {</div>
<div class="line">                snprintf(out, out_size,</div>
<div class="line">                    <span class="stringliteral">&quot;Invalid entry in file %s at line %u&quot;</span>,</div>
<div class="line">                    file_name_add, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Delete. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (file_delete)</div>
<div class="line">        <span class="keywordflow">for</span> (line_id = 1; ; line_id++) {</div>
<div class="line">            <span class="keyword">struct </span><a class="code" href="structrte__swx__table__entry.html">rte_swx_table_entry</a> *entry;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (fgets(line, 2048, file_delete) == NULL)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            entry = <a class="code" href="rte__swx__ctl_8h.html#a027e3bfd07f8407d3d9b8c69dc0f0e33">rte_swx_ctl_pipeline_table_entry_read</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                line);</div>
<div class="line">            <span class="keywordflow">if</span> (!entry) {</div>
<div class="line">                snprintf(out, out_size, MSG_FILE_ERR,</div>
<div class="line">                    file_name_delete, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            status = <a name="a25"></a><a class="code" href="rte__swx__ctl_8h.html#a25e2a811957ee835ff345b4ec7b344e3">rte_swx_ctl_pipeline_table_entry_delete</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                entry);</div>
<div class="line">            table_entry_free(entry);</div>
<div class="line">            <span class="keywordflow">if</span> (status)  {</div>
<div class="line">                snprintf(out, out_size,</div>
<div class="line">                    <span class="stringliteral">&quot;Invalid entry in file %s at line %u&quot;</span>,</div>
<div class="line">                    file_name_delete, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Default. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (file_default)</div>
<div class="line">        <span class="keywordflow">for</span> (line_id = 1; ; line_id++) {</div>
<div class="line">            <span class="keyword">struct </span><a class="code" href="structrte__swx__table__entry.html">rte_swx_table_entry</a> *entry;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (fgets(line, 2048, file_default) == NULL)</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            entry = <a class="code" href="rte__swx__ctl_8h.html#a027e3bfd07f8407d3d9b8c69dc0f0e33">rte_swx_ctl_pipeline_table_entry_read</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                line);</div>
<div class="line">            <span class="keywordflow">if</span> (!entry) {</div>
<div class="line">                snprintf(out, out_size, MSG_FILE_ERR,</div>
<div class="line">                    file_name_default, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            status = <a name="a26"></a><a class="code" href="rte__swx__ctl_8h.html#a767c9d536878e77bb70e9b6b3fee6173">rte_swx_ctl_pipeline_table_default_entry_add</a>(p-&gt;ctl,</div>
<div class="line">                table_name,</div>
<div class="line">                entry);</div>
<div class="line">            table_entry_free(entry);</div>
<div class="line">            <span class="keywordflow">if</span> (status) {</div>
<div class="line">                snprintf(out, out_size,</div>
<div class="line">                    <span class="stringliteral">&quot;Invalid entry in file %s at line %u&quot;</span>,</div>
<div class="line">                    file_name_default, line_id);</div>
<div class="line">                <span class="keywordflow">goto</span> error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    status = <a name="a27"></a><a class="code" href="rte__swx__ctl_8h.html#a9f15a2c666a5d267c0ef58a2fad0cd40">rte_swx_ctl_pipeline_commit</a>(p-&gt;ctl, 1);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Commit failed.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <a name="a28"></a><a class="code" href="rte__swx__ctl_8h.html#a05b619602c034e616f83d673bc0982a9">rte_swx_ctl_pipeline_table_fprintf</a>(stdout, p-&gt;ctl, table_name);</div>
<div class="line"> </div>
<div class="line">    free(line);</div>
<div class="line">    <span class="keywordflow">if</span> (file_add)</div>
<div class="line">        fclose(file_add);</div>
<div class="line">    <span class="keywordflow">if</span> (file_delete)</div>
<div class="line">        fclose(file_delete);</div>
<div class="line">    <span class="keywordflow">if</span> (file_default)</div>
<div class="line">        fclose(file_default);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">error:</div>
<div class="line">    <a name="a29"></a><a class="code" href="rte__swx__ctl_8h.html#a1445a4892165e9da893f894e0e79bb15">rte_swx_ctl_pipeline_abort</a>(p-&gt;ctl);</div>
<div class="line">    free(line);</div>
<div class="line">    <span class="keywordflow">if</span> (file_add)</div>
<div class="line">        fclose(file_add);</div>
<div class="line">    <span class="keywordflow">if</span> (file_delete)</div>
<div class="line">        fclose(file_delete);</div>
<div class="line">    <span class="keywordflow">if</span> (file_default)</div>
<div class="line">        fclose(file_default);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_pipeline_stats_help[] =</div>
<div class="line"><span class="stringliteral">&quot;pipeline &lt;pipeline_name&gt; stats\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_pipeline_stats(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a30"></a><a class="code" href="structrte__swx__ctl__pipeline__info.html">rte_swx_ctl_pipeline_info</a> info;</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    uint32_t i;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 3) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    p = pipeline_find(obj, tokens[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || !p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;pipeline_name&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;stats&quot;</span>)) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;stats&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = <a name="a31"></a><a class="code" href="rte__swx__ctl_8h.html#ab1a07ee9e21d75bb42f12f97fe60d61a">rte_swx_ctl_pipeline_info_get</a>(p-&gt;p, &amp;info);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;Pipeline info get error.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    snprintf(out, out_size, <span class="stringliteral">&quot;Input ports:\n&quot;</span>);</div>
<div class="line">    out_size -= strlen(out);</div>
<div class="line">    out += strlen(out);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; info.n_ports_in; i++) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a32"></a><a class="code" href="structrte__swx__port__in__stats.html">rte_swx_port_in_stats</a> stats;</div>
<div class="line"> </div>
<div class="line">        <a name="a33"></a><a class="code" href="rte__swx__ctl_8h.html#a7cda0caec600ebf91652164998cf59db">rte_swx_ctl_pipeline_port_in_stats_read</a>(p-&gt;p, i, &amp;stats);</div>
<div class="line"> </div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\tPort %u:&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; packets %&quot;</span> PRIu64</div>
<div class="line">            <span class="stringliteral">&quot; bytes %&quot;</span> PRIu64</div>
<div class="line">            <span class="stringliteral">&quot; empty %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">            i, stats.n_pkts, stats.n_bytes, stats.n_empty);</div>
<div class="line">        out_size -= strlen(out);</div>
<div class="line">        out += strlen(out);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    snprintf(out, out_size, <span class="stringliteral">&quot;Output ports:\n&quot;</span>);</div>
<div class="line">    out_size -= strlen(out);</div>
<div class="line">    out += strlen(out);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; info.n_ports_out; i++) {</div>
<div class="line">        <span class="keyword">struct </span><a name="_a34"></a><a class="code" href="structrte__swx__port__out__stats.html">rte_swx_port_out_stats</a> stats;</div>
<div class="line"> </div>
<div class="line">        <a name="a35"></a><a class="code" href="rte__swx__ctl_8h.html#a0d158aae0e85658d8b1759b1992b7ef0">rte_swx_ctl_pipeline_port_out_stats_read</a>(p-&gt;p, i, &amp;stats);</div>
<div class="line"> </div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\tPort %u:&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; packets %&quot;</span> PRIu64</div>
<div class="line">            <span class="stringliteral">&quot; bytes %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line">            i, stats.n_pkts, stats.n_bytes);</div>
<div class="line">        out_size -= strlen(out);</div>
<div class="line">        out += strlen(out);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_thread_pipeline_enable_help[] =</div>
<div class="line"><span class="stringliteral">&quot;thread &lt;thread_id&gt; pipeline &lt;pipeline_name&gt; enable\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_thread_pipeline_enable(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *pipeline_name;</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    uint32_t thread_id;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 5) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;thread_id, tokens[1]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;thread_id&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;pipeline&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;pipeline&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pipeline_name = tokens[3];</div>
<div class="line">    p = pipeline_find(obj, pipeline_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || !p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;pipeline_name&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[4], <span class="stringliteral">&quot;enable&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;enable&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = thread_pipeline_enable(thread_id, obj, pipeline_name);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, MSG_CMD_FAIL, <span class="stringliteral">&quot;thread pipeline enable&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> cmd_thread_pipeline_disable_help[] =</div>
<div class="line"><span class="stringliteral">&quot;thread &lt;thread_id&gt; pipeline &lt;pipeline_name&gt; disable\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_thread_pipeline_disable(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">    uint32_t n_tokens,</div>
<div class="line">    <span class="keywordtype">char</span> *out,</div>
<div class="line">    <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>pipeline *p;</div>
<div class="line">    <span class="keywordtype">char</span> *pipeline_name;</div>
<div class="line">    uint32_t thread_id;</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens != 5) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_MISMATCH, tokens[0]);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parser_read_uint32(&amp;thread_id, tokens[1]) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;thread_id&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;pipeline&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;pipeline&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pipeline_name = tokens[3];</div>
<div class="line">    p = pipeline_find(obj, pipeline_name);</div>
<div class="line">    <span class="keywordflow">if</span> (!p || !p-&gt;ctl) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_INVALID, <span class="stringliteral">&quot;pipeline_name&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[4], <span class="stringliteral">&quot;disable&quot;</span>) != 0) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_NOT_FOUND, <span class="stringliteral">&quot;disable&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    status = thread_pipeline_disable(thread_id, obj, pipeline_name);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, MSG_CMD_FAIL,</div>
<div class="line">            <span class="stringliteral">&quot;thread pipeline disable&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">cmd_help(<span class="keywordtype">char</span> **tokens,</div>
<div class="line">     uint32_t n_tokens,</div>
<div class="line">     <span class="keywordtype">char</span> *out,</div>
<div class="line">     <span class="keywordtype">size_t</span> out_size,</div>
<div class="line">     <span class="keywordtype">void</span> *arg <a name="a36"></a><a class="code" href="rte__common_8h.html#ae1a7c8799cb57669ae2ddf367b21533f">__rte_unused</a>)</div>
<div class="line">{</div>
<div class="line">    tokens++;</div>
<div class="line">    n_tokens--;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens == 0) {</div>
<div class="line">        snprintf(out, out_size,</div>
<div class="line">            <span class="stringliteral">&quot;Type &#39;help &lt;command&gt;&#39; for command details.\n\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;List of commands:\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tmempool\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tlink\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline create\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline port in\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline port out\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline build\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline table update\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tpipeline stats\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tthread pipeline enable\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\tthread pipeline disable\n\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;mempool&quot;</span>) == 0) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>, cmd_mempool_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;link&quot;</span>) == 0) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>, cmd_link_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (n_tokens == 2) &amp;&amp; (strcmp(tokens[1], <span class="stringliteral">&quot;create&quot;</span>) == 0)) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>, cmd_pipeline_create_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (n_tokens == 3) &amp;&amp; (strcmp(tokens[1], <span class="stringliteral">&quot;port&quot;</span>) == 0)) {</div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;in&quot;</span>) == 0) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>,</div>
<div class="line">                cmd_pipeline_port_in_help);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;out&quot;</span>) == 0) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>,</div>
<div class="line">                cmd_pipeline_port_out_help);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (n_tokens == 2) &amp;&amp; (strcmp(tokens[1], <span class="stringliteral">&quot;build&quot;</span>) == 0)) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>, cmd_pipeline_build_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (n_tokens == 3) &amp;&amp;</div>
<div class="line">        (strcmp(tokens[1], <span class="stringliteral">&quot;table&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (strcmp(tokens[2], <span class="stringliteral">&quot;update&quot;</span>) == 0)) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>,</div>
<div class="line">            cmd_pipeline_table_update_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (n_tokens == 2) &amp;&amp; (strcmp(tokens[1], <span class="stringliteral">&quot;stats&quot;</span>) == 0)) {</div>
<div class="line">        snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>, cmd_pipeline_stats_help);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((n_tokens == 3) &amp;&amp;</div>
<div class="line">        (strcmp(tokens[0], <span class="stringliteral">&quot;thread&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">        (strcmp(tokens[1], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0)) {</div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;enable&quot;</span>) == 0) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>,</div>
<div class="line">                cmd_thread_pipeline_enable_help);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[2], <span class="stringliteral">&quot;disable&quot;</span>) == 0) {</div>
<div class="line">            snprintf(out, out_size, <span class="stringliteral">&quot;\n%s\n&quot;</span>,</div>
<div class="line">                cmd_thread_pipeline_disable_help);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    snprintf(out, out_size, <span class="stringliteral">&quot;Invalid command\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">cli_process(<span class="keywordtype">char</span> *in, <span class="keywordtype">char</span> *out, <span class="keywordtype">size_t</span> out_size, <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *tokens[CMD_MAX_TOKENS];</div>
<div class="line">    uint32_t n_tokens = <a name="a37"></a><a class="code" href="rte__common_8h.html#ac963da91b35efa4700b73a1f4eb1d8a6">RTE_DIM</a>(tokens);</div>
<div class="line">    <span class="keywordtype">int</span> status;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (is_comment(in))</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    status = parse_tokenize_string(in, tokens, &amp;n_tokens);</div>
<div class="line">    <span class="keywordflow">if</span> (status) {</div>
<div class="line">        snprintf(out, out_size, MSG_ARG_TOO_MANY, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (n_tokens == 0)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;help&quot;</span>) == 0) {</div>
<div class="line">        cmd_help(tokens, n_tokens, out, out_size, obj);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;mempool&quot;</span>) == 0) {</div>
<div class="line">        cmd_mempool(tokens, n_tokens, out, out_size, obj);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;link&quot;</span>) == 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (strcmp(tokens[1], <span class="stringliteral">&quot;show&quot;</span>) == 0) {</div>
<div class="line">            cmd_link_show(tokens, n_tokens, out, out_size, obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        cmd_link(tokens, n_tokens, out, out_size, obj);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;pipeline&quot;</span>) == 0) {</div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 3) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;create&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_create(tokens, n_tokens, out, out_size,</div>
<div class="line">                obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 4) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;port&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[3], <span class="stringliteral">&quot;in&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_port_in(tokens, n_tokens, out, out_size,</div>
<div class="line">                obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 4) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;port&quot;</span>) == 0) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[3], <span class="stringliteral">&quot;out&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_port_out(tokens, n_tokens, out, out_size,</div>
<div class="line">                obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 3) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;build&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_build(tokens, n_tokens, out, out_size,</div>
<div class="line">                obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 3) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;table&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_table_update(tokens, n_tokens, out,</div>
<div class="line">                out_size, obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 3) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[2], <span class="stringliteral">&quot;stats&quot;</span>) == 0)) {</div>
<div class="line">            cmd_pipeline_stats(tokens, n_tokens, out, out_size,</div>
<div class="line">                obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(tokens[0], <span class="stringliteral">&quot;thread&quot;</span>) == 0) {</div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 5) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[4], <span class="stringliteral">&quot;enable&quot;</span>) == 0)) {</div>
<div class="line">            cmd_thread_pipeline_enable(tokens, n_tokens,</div>
<div class="line">                out, out_size, obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((n_tokens &gt;= 5) &amp;&amp;</div>
<div class="line">            (strcmp(tokens[4], <span class="stringliteral">&quot;disable&quot;</span>) == 0)) {</div>
<div class="line">            cmd_thread_pipeline_disable(tokens, n_tokens,</div>
<div class="line">                out, out_size, obj);</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    snprintf(out, out_size, MSG_CMD_UNKNOWN, tokens[0]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">cli_script_process(<span class="keyword">const</span> <span class="keywordtype">char</span> *file_name,</div>
<div class="line">    <span class="keywordtype">size_t</span> msg_in_len_max,</div>
<div class="line">    <span class="keywordtype">size_t</span> msg_out_len_max,</div>
<div class="line">    <span class="keywordtype">void</span> *obj)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> *msg_in = NULL, *msg_out = NULL;</div>
<div class="line">    FILE *f = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check input arguments */</span></div>
<div class="line">    <span class="keywordflow">if</span> ((file_name == NULL) ||</div>
<div class="line">        (strlen(file_name) == 0) ||</div>
<div class="line">        (msg_in_len_max == 0) ||</div>
<div class="line">        (msg_out_len_max == 0))</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"> </div>
<div class="line">    msg_in = malloc(msg_in_len_max + 1);</div>
<div class="line">    msg_out = malloc(msg_out_len_max + 1);</div>
<div class="line">    <span class="keywordflow">if</span> ((msg_in == NULL) ||</div>
<div class="line">        (msg_out == NULL)) {</div>
<div class="line">        free(msg_out);</div>
<div class="line">        free(msg_in);</div>
<div class="line">        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Open input file */</span></div>
<div class="line">    f = fopen(file_name, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (f == NULL) {</div>
<div class="line">        free(msg_out);</div>
<div class="line">        free(msg_in);</div>
<div class="line">        <span class="keywordflow">return</span> -EIO;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Read file */</span></div>
<div class="line">    <span class="keywordflow">for</span> ( ; ; ) {</div>
<div class="line">        <span class="keywordflow">if</span> (fgets(msg_in, msg_in_len_max + 1, f) == NULL)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;%s&quot;</span>, msg_in);</div>
<div class="line">        msg_out[0] = 0;</div>
<div class="line"> </div>
<div class="line">        cli_process(msg_in,</div>
<div class="line">            msg_out,</div>
<div class="line">            msg_out_len_max,</div>
<div class="line">            obj);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (strlen(msg_out))</div>
<div class="line">            printf(<span class="stringliteral">&quot;%s&quot;</span>, msg_out);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Close file */</span></div>
<div class="line">    fclose(f);</div>
<div class="line">    free(msg_out);</div>
<div class="line">    free(msg_in);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="arte__swx__ctl_8h_html_a027e3bfd07f8407d3d9b8c69dc0f0e33"><div class="ttname"><a href="rte__swx__ctl_8h.html#a027e3bfd07f8407d3d9b8c69dc0f0e33">rte_swx_ctl_pipeline_table_entry_read</a></div><div class="ttdeci">__rte_experimental struct rte_swx_table_entry * rte_swx_ctl_pipeline_table_entry_read(struct rte_swx_ctl_pipeline *ctl, const char *table_name, const char *string)</div></div>
<div class="ttc" id="astructrte__swx__port__source__params_html"><div class="ttname"><a href="structrte__swx__port__source__params.html">rte_swx_port_source_params</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port__source__sink_8h_source.html#l00024">rte_swx_port_source_sink.h:24</a></div></div>
<div class="ttc" id="astructrte__swx__port__sink__params_html_a89e7a505203c95130b3355a263a38fe2"><div class="ttname"><a href="structrte__swx__port__sink__params.html#a89e7a505203c95130b3355a263a38fe2">rte_swx_port_sink_params::file_name</a></div><div class="ttdeci">const char * file_name</div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port__source__sink_8h_source.html#l00047">rte_swx_port_source_sink.h:47</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a767c9d536878e77bb70e9b6b3fee6173"><div class="ttname"><a href="rte__swx__ctl_8h.html#a767c9d536878e77bb70e9b6b3fee6173">rte_swx_ctl_pipeline_table_default_entry_add</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_table_default_entry_add(struct rte_swx_ctl_pipeline *ctl, const char *table_name, struct rte_swx_table_entry *entry)</div></div>
<div class="ttc" id="arte__swx__pipeline_8h_html"><div class="ttname"><a href="rte__swx__pipeline_8h.html">rte_swx_pipeline.h</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a1445a4892165e9da893f894e0e79bb15"><div class="ttname"><a href="rte__swx__ctl_8h.html#a1445a4892165e9da893f894e0e79bb15">rte_swx_ctl_pipeline_abort</a></div><div class="ttdeci">__rte_experimental void rte_swx_ctl_pipeline_abort(struct rte_swx_ctl_pipeline *ctl)</div></div>
<div class="ttc" id="astructrte__swx__port__sink__params_html"><div class="ttname"><a href="structrte__swx__port__sink__params.html">rte_swx_port_sink_params</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port__source__sink_8h_source.html#l00042">rte_swx_port_source_sink.h:42</a></div></div>
<div class="ttc" id="astructrte__swx__ctl__pipeline__info_html"><div class="ttname"><a href="structrte__swx__ctl__pipeline__info.html">rte_swx_ctl_pipeline_info</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__ctl_8h_source.html#l00036">rte_swx_ctl.h:36</a></div></div>
<div class="ttc" id="arte__errno_8h_html_a129a7eb4cfa1f5bdac5783bf49137d06"><div class="ttname"><a href="rte__errno_8h.html#a129a7eb4cfa1f5bdac5783bf49137d06">rte_strerror</a></div><div class="ttdeci">const char * rte_strerror(int errnum)</div></div>
<div class="ttc" id="astructrte__eth__link_html"><div class="ttname"><a href="structrte__eth__link.html">rte_eth_link</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00313">rte_ethdev.h:313</a></div></div>
<div class="ttc" id="astructrte__swx__table__entry_html_a9520dc6e47b2381d5e38213b09db5b6f"><div class="ttname"><a href="structrte__swx__table__entry.html#a9520dc6e47b2381d5e38213b09db5b6f">rte_swx_table_entry::key_mask</a></div><div class="ttdeci">uint8_t * key_mask</div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__table_8h_source.html#l00083">rte_swx_table.h:83</a></div></div>
<div class="ttc" id="arte__swx__port__ethdev_8h_html"><div class="ttname"><a href="rte__swx__port__ethdev_8h.html">rte_swx_port_ethdev.h</a></div></div>
<div class="ttc" id="arte__swx__pipeline_8h_html_abd5a6e7904b24149286cd31e428056bf"><div class="ttname"><a href="rte__swx__pipeline_8h.html#abd5a6e7904b24149286cd31e428056bf">rte_swx_pipeline_free</a></div><div class="ttdeci">__rte_experimental void rte_swx_pipeline_free(struct rte_swx_pipeline *p)</div></div>
<div class="ttc" id="astructrte__swx__port__out__stats_html"><div class="ttname"><a href="structrte__swx__port__out__stats.html">rte_swx_port_out_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port_8h_source.html#l00160">rte_swx_port.h:160</a></div></div>
<div class="ttc" id="astructrte__swx__port__in__stats_html"><div class="ttname"><a href="structrte__swx__port__in__stats.html">rte_swx_port_in_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port_8h_source.html#l00076">rte_swx_port.h:76</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a20d4a9cd44df3c327a1c45067359355f"><div class="ttname"><a href="rte__swx__ctl_8h.html#a20d4a9cd44df3c327a1c45067359355f">rte_swx_ctl_pipeline_table_entry_add</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_table_entry_add(struct rte_swx_ctl_pipeline *ctl, const char *table_name, struct rte_swx_table_entry *entry)</div></div>
<div class="ttc" id="astructrte__swx__port__ethdev__reader__params_html"><div class="ttname"><a href="structrte__swx__port__ethdev__reader__params.html">rte_swx_port_ethdev_reader_params</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port__ethdev_8h_source.html#l00021">rte_swx_port_ethdev.h:21</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a8a28375b279ded9125c99a46bf3956ef"><div class="ttname"><a href="rte__ethdev_8h.html#a8a28375b279ded9125c99a46bf3956ef">rte_eth_macaddr_get</a></div><div class="ttdeci">int rte_eth_macaddr_get(uint16_t port_id, struct rte_ether_addr *mac_addr)</div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a25e2a811957ee835ff345b4ec7b344e3"><div class="ttname"><a href="rte__swx__ctl_8h.html#a25e2a811957ee835ff345b4ec7b344e3">rte_swx_ctl_pipeline_table_entry_delete</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_table_entry_delete(struct rte_swx_ctl_pipeline *ctl, const char *table_name, struct rte_swx_table_entry *entry)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_adec226574c53ae413252c9b15f6f4bab"><div class="ttname"><a href="rte__ethdev_8h.html#adec226574c53ae413252c9b15f6f4bab">rte_eth_stats_get</a></div><div class="ttdeci">int rte_eth_stats_get(uint16_t port_id, struct rte_eth_stats *stats)</div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_ab1a07ee9e21d75bb42f12f97fe60d61a"><div class="ttname"><a href="rte__swx__ctl_8h.html#ab1a07ee9e21d75bb42f12f97fe60d61a">rte_swx_ctl_pipeline_info_get</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_info_get(struct rte_swx_pipeline *p, struct rte_swx_ctl_pipeline_info *pipeline)</div></div>
<div class="ttc" id="arte__swx__port__source__sink_8h_html"><div class="ttname"><a href="rte__swx__port__source__sink_8h.html">rte_swx_port_source_sink.h</a></div></div>
<div class="ttc" id="arte__common_8h_html_ac963da91b35efa4700b73a1f4eb1d8a6"><div class="ttname"><a href="rte__common_8h.html#ac963da91b35efa4700b73a1f4eb1d8a6">RTE_DIM</a></div><div class="ttdeci">#define RTE_DIM(a)</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00809">rte_common.h:809</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ade8a6c56c3b7c65fa4cabf1d1106fdc7"><div class="ttname"><a href="rte__ethdev_8h.html#ade8a6c56c3b7c65fa4cabf1d1106fdc7">rte_eth_link_speed_to_str</a></div><div class="ttdeci">__rte_experimental const char * rte_eth_link_speed_to_str(uint32_t link_speed)</div></div>
<div class="ttc" id="astructrte__swx__port__ethdev__writer__params_html"><div class="ttname"><a href="structrte__swx__port__ethdev__writer__params.html">rte_swx_port_ethdev_writer_params</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__port__ethdev_8h_source.html#l00036">rte_swx_port_ethdev.h:36</a></div></div>
<div class="ttc" id="arte__common_8h_html"><div class="ttname"><a href="rte__common_8h.html">rte_common.h</a></div></div>
<div class="ttc" id="arte__common_8h_html_ae1a7c8799cb57669ae2ddf367b21533f"><div class="ttname"><a href="rte__common_8h.html#ae1a7c8799cb57669ae2ddf367b21533f">__rte_unused</a></div><div class="ttdeci">#define __rte_unused</div><div class="ttdef"><b>Definition:</b> <a href="rte__common_8h_source.html#l00116">rte_common.h:116</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a9f15a2c666a5d267c0ef58a2fad0cd40"><div class="ttname"><a href="rte__swx__ctl_8h.html#a9f15a2c666a5d267c0ef58a2fad0cd40">rte_swx_ctl_pipeline_commit</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_commit(struct rte_swx_ctl_pipeline *ctl, int abort_on_fail)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a56200b0c25f3ecab5abe9bd2b647c215"><div class="ttname"><a href="rte__ethdev_8h.html#a56200b0c25f3ecab5abe9bd2b647c215">rte_eth_link_get</a></div><div class="ttdeci">int rte_eth_link_get(uint16_t port_id, struct rte_eth_link *link)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a386c83c7cc16ec9886ecf2925e7be4a3"><div class="ttname"><a href="rte__ethdev_8h.html#a386c83c7cc16ec9886ecf2925e7be4a3">rte_eth_dev_get_mtu</a></div><div class="ttdeci">int rte_eth_dev_get_mtu(uint16_t port_id, uint16_t *mtu)</div></div>
<div class="ttc" id="arte__swx__ctl_8h_html"><div class="ttname"><a href="rte__swx__ctl_8h.html">rte_swx_ctl.h</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a05b619602c034e616f83d673bc0982a9"><div class="ttname"><a href="rte__swx__ctl_8h.html#a05b619602c034e616f83d673bc0982a9">rte_swx_ctl_pipeline_table_fprintf</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_table_fprintf(FILE *f, struct rte_swx_ctl_pipeline *ctl, const char *table_name)</div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a0d158aae0e85658d8b1759b1992b7ef0"><div class="ttname"><a href="rte__swx__ctl_8h.html#a0d158aae0e85658d8b1759b1992b7ef0">rte_swx_ctl_pipeline_port_out_stats_read</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_port_out_stats_read(struct rte_swx_pipeline *p, uint32_t port_id, struct rte_swx_port_out_stats *stats)</div></div>
<div class="ttc" id="arte__swx__pipeline_8h_html_a6036e26529510d4ac56bc60350bf385a"><div class="ttname"><a href="rte__swx__pipeline_8h.html#a6036e26529510d4ac56bc60350bf385a">rte_swx_pipeline_port_in_config</a></div><div class="ttdeci">__rte_experimental int rte_swx_pipeline_port_in_config(struct rte_swx_pipeline *p, uint32_t port_id, const char *port_type_name, void *args)</div></div>
<div class="ttc" id="arte__ethdev_8h_html"><div class="ttname"><a href="rte__ethdev_8h.html">rte_ethdev.h</a></div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a6d7ceccfbc0ba37e98b5bba7573fe3b7"><div class="ttname"><a href="rte__swx__ctl_8h.html#a6d7ceccfbc0ba37e98b5bba7573fe3b7">rte_swx_ctl_pipeline_create</a></div><div class="ttdeci">__rte_experimental struct rte_swx_ctl_pipeline * rte_swx_ctl_pipeline_create(struct rte_swx_pipeline *p)</div></div>
<div class="ttc" id="arte__swx__ctl_8h_html_a7cda0caec600ebf91652164998cf59db"><div class="ttname"><a href="rte__swx__ctl_8h.html#a7cda0caec600ebf91652164998cf59db">rte_swx_ctl_pipeline_port_in_stats_read</a></div><div class="ttdeci">__rte_experimental int rte_swx_ctl_pipeline_port_in_stats_read(struct rte_swx_pipeline *p, uint32_t port_id, struct rte_swx_port_in_stats *stats)</div></div>
<div class="ttc" id="astructrte__swx__table__entry_html_ab0a820307ec40efaa2c3b59e4e2bc60d"><div class="ttname"><a href="structrte__swx__table__entry.html#ab0a820307ec40efaa2c3b59e4e2bc60d">rte_swx_table_entry::action_data</a></div><div class="ttdeci">uint8_t * action_data</div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__table_8h_source.html#l00100">rte_swx_table.h:100</a></div></div>
<div class="ttc" id="arte__swx__pipeline_8h_html_a4346c8f10fac6984bba35ab6f4b17ded"><div class="ttname"><a href="rte__swx__pipeline_8h.html#a4346c8f10fac6984bba35ab6f4b17ded">rte_swx_pipeline_port_out_config</a></div><div class="ttdeci">__rte_experimental int rte_swx_pipeline_port_out_config(struct rte_swx_pipeline *p, uint32_t port_id, const char *port_type_name, void *args)</div></div>
<div class="ttc" id="astructrte__ether__addr_html"><div class="ttname"><a href="structrte__ether__addr.html">rte_ether_addr</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ether_8h_source.html#l00064">rte_ether.h:64</a></div></div>
<div class="ttc" id="arte__swx__pipeline_8h_html_a186d248301aafc608a01d8bb690267ca"><div class="ttname"><a href="rte__swx__pipeline_8h.html#a186d248301aafc608a01d8bb690267ca">rte_swx_pipeline_build_from_spec</a></div><div class="ttdeci">__rte_experimental int rte_swx_pipeline_build_from_spec(struct rte_swx_pipeline *p, FILE *spec, uint32_t *err_line, const char **err_msg)</div></div>
<div class="ttc" id="astructrte__eth__stats_html"><div class="ttname"><a href="structrte__eth__stats.html">rte_eth_stats</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l00244">rte_ethdev.h:244</a></div></div>
<div class="ttc" id="astructrte__swx__table__entry_html"><div class="ttname"><a href="structrte__swx__table__entry.html">rte_swx_table_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__table_8h_source.html#l00067">rte_swx_table.h:67</a></div></div>
<div class="ttc" id="astructrte__swx__table__entry_html_a302e2291dbff57f770bf469af498ec3a"><div class="ttname"><a href="structrte__swx__table__entry.html#a302e2291dbff57f770bf469af498ec3a">rte_swx_table_entry::key</a></div><div class="ttdeci">uint8_t * key</div><div class="ttdef"><b>Definition:</b> <a href="rte__swx__table_8h_source.html#l00076">rte_swx_table.h:76</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
