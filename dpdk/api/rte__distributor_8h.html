<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: lib/librte_distributor/rte_distributor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_6242a765e90f02e6b399e351944e02df.html">librte_distributor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rte_distributor.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="rte__distributor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab36f2ce70d22f8ea9b5956cb7fd8b8ae"><td class="memItemLeft" align="right" valign="top">struct rte_distributor *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#ab36f2ce70d22f8ea9b5956cb7fd8b8ae">rte_distributor_create</a> (const char *name, unsigned int socket_id, unsigned int num_workers, unsigned int alg_type)</td></tr>
<tr class="separator:ab36f2ce70d22f8ea9b5956cb7fd8b8ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119f848fcaeef33de2dd2c706d97e485"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#a119f848fcaeef33de2dd2c706d97e485">rte_distributor_process</a> (struct rte_distributor *d, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **mbufs, unsigned int num_mbufs)</td></tr>
<tr class="separator:a119f848fcaeef33de2dd2c706d97e485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a763e85fef408b10e7e04242c39bb8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#a74a763e85fef408b10e7e04242c39bb8">rte_distributor_returned_pkts</a> (struct rte_distributor *d, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **mbufs, unsigned int max_mbufs)</td></tr>
<tr class="separator:a74a763e85fef408b10e7e04242c39bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0118904b5623fb2b3829cb36aa7ab6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#ae0118904b5623fb2b3829cb36aa7ab6c">rte_distributor_flush</a> (struct rte_distributor *d)</td></tr>
<tr class="separator:ae0118904b5623fb2b3829cb36aa7ab6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e918becea86b4e0e1e61660fe1e6ce9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#a6e918becea86b4e0e1e61660fe1e6ce9">rte_distributor_clear_returns</a> (struct rte_distributor *d)</td></tr>
<tr class="separator:a6e918becea86b4e0e1e61660fe1e6ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db892bd252ba2cafd542d6514f1b1a8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#a3db892bd252ba2cafd542d6514f1b1a8">rte_distributor_get_pkt</a> (struct rte_distributor *d, unsigned int worker_id, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **pkts, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **oldpkt, unsigned int retcount)</td></tr>
<tr class="separator:a3db892bd252ba2cafd542d6514f1b1a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8d4ae31c7d01bdbd7ba126b6258c975"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#ac8d4ae31c7d01bdbd7ba126b6258c975">rte_distributor_return_pkt</a> (struct rte_distributor *d, unsigned int worker_id, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **oldpkt, int num)</td></tr>
<tr class="separator:ac8d4ae31c7d01bdbd7ba126b6258c975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef7a94948316c3313c6305eb45a25b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#aaef7a94948316c3313c6305eb45a25b2">rte_distributor_request_pkt</a> (struct rte_distributor *d, unsigned int worker_id, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **oldpkt, unsigned int count)</td></tr>
<tr class="separator:aaef7a94948316c3313c6305eb45a25b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61e6e43224c1f951cafe68323d7d264"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__distributor_8h.html#ae61e6e43224c1f951cafe68323d7d264">rte_distributor_poll_pkt</a> (struct rte_distributor *d, unsigned int worker_id, struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **mbufs)</td></tr>
<tr class="separator:ae61e6e43224c1f951cafe68323d7d264"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RTE distributor</p>
<p>The distributor is a component which is designed to pass packets one-at-a-time to workers, with dynamic load balancing. </p>

<p class="definition">Definition in file <a class="el" href="rte__distributor_8h_source.html">rte_distributor.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ab36f2ce70d22f8ea9b5956cb7fd8b8ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab36f2ce70d22f8ea9b5956cb7fd8b8ae">&#9670;&nbsp;</a></span>rte_distributor_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct rte_distributor* rte_distributor_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>socket_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num_workers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>alg_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to create a new distributor instance</p>
<p>Reserves the memory needed for the distributor operation and initializes the distributor to work with the configured number of workers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name to be given to the distributor instance. </td></tr>
    <tr><td class="paramname">socket_id</td><td>The NUMA node on which the memory is to be allocated </td></tr>
    <tr><td class="paramname">num_workers</td><td>The maximum number of workers that will request packets from this distributor </td></tr>
    <tr><td class="paramname">alg_type</td><td>Call the legacy API, or use the new burst API. legacy uses 32-bit flow ID, and works on a single packet at a time. Latest uses 15- bit flow ID and works on up to 8 packets at a time to workers. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The newly created distributor instance </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a64">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="a119f848fcaeef33de2dd2c706d97e485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a119f848fcaeef33de2dd2c706d97e485">&#9670;&nbsp;</a></span>rte_distributor_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_process </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>mbufs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>num_mbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process a set of packets by distributing them among workers that request packets. The distributor will ensure that no two packets that have the same flow id, or tag, in the mbuf will be processed on different cores at the same time.</p>
<p>The user is advocated to set tag for each mbuf before calling this function. If user doesn't set the tag, the tag value can be various values depending on driver implementation and configuration.</p>
<p>This is not multi-thread safe and should only be called on a single lcore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">mbufs</td><td>The mbufs to be distributed </td></tr>
    <tr><td class="paramname">num_mbufs</td><td>The number of mbufs in the mbufs array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of mbufs processed. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a41">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="a74a763e85fef408b10e7e04242c39bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a763e85fef408b10e7e04242c39bb8">&#9670;&nbsp;</a></span>rte_distributor_returned_pkts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_returned_pkts </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>mbufs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>max_mbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a set of mbufs that have been returned to the distributor by workers</p>
<p>This should only be called on the same lcore as <a class="el" href="rte__distributor_8h.html#a119f848fcaeef33de2dd2c706d97e485">rte_distributor_process()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">mbufs</td><td>The mbufs pointer array to be filled in </td></tr>
    <tr><td class="paramname">max_mbufs</td><td>The size of the mbufs array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of mbufs returned in the mbufs array. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a48">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="ae0118904b5623fb2b3829cb36aa7ab6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0118904b5623fb2b3829cb36aa7ab6c">&#9670;&nbsp;</a></span>rte_distributor_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_flush </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush the distributor component, so that there are no in-flight or backlogged packets awaiting processing</p>
<p>This should only be called on the same lcore as <a class="el" href="rte__distributor_8h.html#a119f848fcaeef33de2dd2c706d97e485">rte_distributor_process()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of queued/in-flight packets that were completed by this call. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a50">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="a6e918becea86b4e0e1e61660fe1e6ce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e918becea86b4e0e1e61660fe1e6ce9">&#9670;&nbsp;</a></span>rte_distributor_clear_returns()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rte_distributor_clear_returns </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clears the array of returned packets used as the source for the <a class="el" href="rte__distributor_8h.html#a74a763e85fef408b10e7e04242c39bb8">rte_distributor_returned_pkts()</a> API call.</p>
<p>This should only be called on the same lcore as <a class="el" href="rte__distributor_8h.html#a119f848fcaeef33de2dd2c706d97e485">rte_distributor_process()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
  </table>
  </dd>
</dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a51">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="a3db892bd252ba2cafd542d6514f1b1a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db892bd252ba2cafd542d6514f1b1a8">&#9670;&nbsp;</a></span>rte_distributor_get_pkt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_get_pkt </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>pkts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>oldpkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>retcount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>API called by a worker to get new packets to process. Any previous packets given to the worker is assumed to have completed processing, and may be optionally returned to the distributor via the oldpkt parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">worker_id</td><td>The worker instance number to use - must be less that num_workers passed at distributor creation time. </td></tr>
    <tr><td class="paramname">pkts</td><td>The mbufs pointer array to be filled in (up to 8 packets) </td></tr>
    <tr><td class="paramname">oldpkt</td><td>The previous packets, if any, being processed by the worker </td></tr>
    <tr><td class="paramname">retcount</td><td>The number of packets being returned</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of packets in the pkts array </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="examples_2distributor_2main_8c-example.html#a55">examples/distributor/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="ac8d4ae31c7d01bdbd7ba126b6258c975"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8d4ae31c7d01bdbd7ba126b6258c975">&#9670;&nbsp;</a></span>rte_distributor_return_pkt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_return_pkt </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>oldpkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>API called by a worker to return a completed packet without requesting a new packet, for example, because a worker thread is shutting down</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">worker_id</td><td>The worker instance number to use - must be less that num_workers passed at distributor creation time. </td></tr>
    <tr><td class="paramname">oldpkt</td><td>The previous packets being processed by the worker </td></tr>
    <tr><td class="paramname">num</td><td>The number of packets in the oldpkt array </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaef7a94948316c3313c6305eb45a25b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef7a94948316c3313c6305eb45a25b2">&#9670;&nbsp;</a></span>rte_distributor_request_pkt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rte_distributor_request_pkt </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>oldpkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>API called by a worker to request a new packet to process. Any previous packets given to the worker are assumed to have completed processing, and may be optionally returned to the distributor via the oldpkt parameter. Unlike <a class="el" href="rte__distributor_8h.html#a3db892bd252ba2cafd542d6514f1b1a8">rte_distributor_get_pkt()</a>, this function does not wait for new packets to be provided by the distributor.</p>
<p>NOTE: after calling this function, <a class="el" href="rte__distributor_8h.html#ae61e6e43224c1f951cafe68323d7d264">rte_distributor_poll_pkt()</a> should be used to poll for the packets requested. The <a class="el" href="rte__distributor_8h.html#a3db892bd252ba2cafd542d6514f1b1a8">rte_distributor_get_pkt()</a> API should <em>not</em> be used to try and retrieve the new packets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">worker_id</td><td>The worker instance number to use - must be less that num_workers passed at distributor creation time. </td></tr>
    <tr><td class="paramname">oldpkt</td><td>The returning packets, if any, processed by the worker </td></tr>
    <tr><td class="paramname">count</td><td>The number of returning packets </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae61e6e43224c1f951cafe68323d7d264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61e6e43224c1f951cafe68323d7d264">&#9670;&nbsp;</a></span>rte_distributor_poll_pkt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_distributor_poll_pkt </td>
          <td>(</td>
          <td class="paramtype">struct rte_distributor *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>worker_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structrte__mbuf.html">rte_mbuf</a> **&#160;</td>
          <td class="paramname"><em>mbufs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>API called by a worker to check for new packets that were previously requested by a call to <a class="el" href="rte__distributor_8h.html#aaef7a94948316c3313c6305eb45a25b2">rte_distributor_request_pkt()</a>. It does not wait for the new packets to be available, but returns if the request has not yet been fulfilled by the distributor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d</td><td>The distributor instance to be used </td></tr>
    <tr><td class="paramname">worker_id</td><td>The worker instance number to use - must be less that num_workers passed at distributor creation time. </td></tr>
    <tr><td class="paramname">mbufs</td><td>The array of mbufs being given to the worker</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of packets being given to the worker thread, -1 if no packets are yet available (burst API - RTE_DIST_ALG_BURST) 0 if no packets are yet available (legacy single API - RTE_DIST_ALG_SINGLE) </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
