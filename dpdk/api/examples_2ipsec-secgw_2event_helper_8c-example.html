<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPDK: examples/ipsec-secgw/event_helper.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPDK
   &#160;<span id="projectnumber">20.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">examples/ipsec-secgw/event_helper.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2020 Marvell International Ltd.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__bitmap_8h.html">rte_bitmap.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__ethdev_8h.html">rte_ethdev.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__eventdev_8h.html">rte_eventdev.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__event__eth__rx__adapter_8h.html">rte_event_eth_rx_adapter.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__event__eth__tx__adapter_8h.html">rte_event_eth_tx_adapter.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="rte__malloc_8h.html">rte_malloc.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;event_helper.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> eth_core_running;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_get_enabled_cores(<span class="keyword">struct</span> <a name="_a0"></a><a class="code" href="structrte__bitmap.html">rte_bitmap</a> *eth_core_mask)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, count = 0;</div>
<div class="line"> </div>
<div class="line">    <a name="a1"></a><a class="code" href="rte__lcore_8h.html#a034c95b6412f09e8de11d430267dc1ba">RTE_LCORE_FOREACH</a>(i) {</div>
<div class="line">        <span class="comment">/* Check if this core is enabled in core mask*/</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a2"></a><a class="code" href="rte__bitmap_8h.html#a5b89bc7e8cfb31e59604936095ba8086">rte_bitmap_get</a>(eth_core_mask, i)) {</div>
<div class="line">            <span class="comment">/* Found enabled core */</span></div>
<div class="line">            count++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> count;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">eh_get_next_eth_core(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> prev_core = -1;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> next_core;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Make sure we have at least one eth core running, else the following</span></div>
<div class="line"><span class="comment">     * logic would lead to an infinite loop.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eh_get_enabled_cores(em_conf-&gt;eth_core_mask) == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No enabled eth core found&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> RTE_MAX_LCORE;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Only some cores are marked as eth cores, skip others */</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">/* Get the next core */</span></div>
<div class="line">        next_core = <a name="a3"></a><a class="code" href="rte__lcore_8h.html#acab656f5b00c29090db4500efabedd98">rte_get_next_lcore</a>(prev_core, 0, 1);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check if we have reached max lcores */</span></div>
<div class="line">        <span class="keywordflow">if</span> (next_core == RTE_MAX_LCORE)</div>
<div class="line">            <span class="keywordflow">return</span> next_core;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update prev_core */</span></div>
<div class="line">        prev_core = next_core;</div>
<div class="line">    } <span class="keywordflow">while</span> (!(<a class="code" href="rte__bitmap_8h.html#a5b89bc7e8cfb31e59604936095ba8086">rte_bitmap_get</a>(em_conf-&gt;eth_core_mask, next_core)));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> next_core;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span></div>
<div class="line">eh_get_next_active_core(<span class="keyword">struct</span> eventmode_conf *em_conf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> prev_core)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> next_core;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get next active core skipping cores reserved as eth cores */</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">/* Get the next core */</span></div>
<div class="line">        next_core = <a class="code" href="rte__lcore_8h.html#acab656f5b00c29090db4500efabedd98">rte_get_next_lcore</a>(prev_core, 0, 0);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check if we have reached max lcores */</span></div>
<div class="line">        <span class="keywordflow">if</span> (next_core == RTE_MAX_LCORE)</div>
<div class="line">            <span class="keywordflow">return</span> next_core;</div>
<div class="line"> </div>
<div class="line">        prev_core = next_core;</div>
<div class="line">    } <span class="keywordflow">while</span> (<a class="code" href="rte__bitmap_8h.html#a5b89bc7e8cfb31e59604936095ba8086">rte_bitmap_get</a>(em_conf-&gt;eth_core_mask, next_core));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> next_core;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>eventdev_params *</div>
<div class="line">eh_get_eventdev_params(<span class="keyword">struct</span> eventmode_conf *em_conf, uint8_t eventdev_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_eventdev; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (em_conf-&gt;eventdev_config[i].eventdev_id == eventdev_id)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* No match */</span></div>
<div class="line">    <span class="keywordflow">if</span> (i == em_conf-&gt;nb_eventdev)</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> &amp;(em_conf-&gt;eventdev_config[i]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span></div>
<div class="line">eh_dev_has_rx_internal_port(uint8_t eventdev_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">int</span> j, ret;</div>
<div class="line"> </div>
<div class="line">    <a name="a4"></a><a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(j) {</div>
<div class="line">        uint32_t caps = 0;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a5"></a><a class="code" href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a>(eventdev_id, j, &amp;caps);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!(caps &amp; <a name="a6"></a><a class="code" href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a>))</div>
<div class="line">            flag = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> flag;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span></div>
<div class="line">eh_dev_has_tx_internal_port(uint8_t eventdev_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> flag = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">int</span> j, ret;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(j) {</div>
<div class="line">        uint32_t caps = 0;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a7"></a><a class="code" href="rte__eventdev_8h.html#ad147297659da4017ff8a8cec1757548c">rte_event_eth_tx_adapter_caps_get</a>(eventdev_id, j, &amp;caps);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0)</div>
<div class="line">            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!(caps &amp; <a name="a8"></a><a class="code" href="rte__eventdev_8h.html#a3b6c6cbdc5b9091cc561ab38983be324">RTE_EVENT_ETH_TX_ADAPTER_CAP_INTERNAL_PORT</a>))</div>
<div class="line">            flag = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> flag;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span></div>
<div class="line">eh_dev_has_burst_mode(uint8_t dev_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a9"></a><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> dev_info;</div>
<div class="line"> </div>
<div class="line">    <a name="a10"></a><a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(dev_id, &amp;dev_info);</div>
<div class="line">    <span class="keywordflow">return</span> (dev_info.event_dev_cap &amp; <a name="a11"></a><a class="code" href="rte__eventdev_8h.html#ae64cc76b136d54ca0c86332ed3723b15">RTE_EVENT_DEV_CAP_BURST_MODE</a>) ?</div>
<div class="line">            true : <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_set_default_conf_eventdev(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> lcore_count, nb_eventdev, nb_eth_dev, ret;</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> dev_info;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of event devices */</span></div>
<div class="line">    nb_eventdev = <a name="a12"></a><a class="code" href="rte__eventdev_8h.html#a6541eb8822285c7b77455636201d5134">rte_event_dev_count</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (nb_eventdev == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No event devices detected&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (nb_eventdev != 1) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Event mode does not support multiple event devices. &quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;Please provide only one event device.&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of eth devs */</span></div>
<div class="line">    nb_eth_dev = <a name="a13"></a><a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (nb_eth_dev == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No eth devices detected&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of lcores */</span></div>
<div class="line">    lcore_count = <a name="a14"></a><a class="code" href="rte__lcore_8h.html#a1728dc7f14571ba778d3b5b41aa09283">rte_lcore_count</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Read event device info */</span></div>
<div class="line">    ret = <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(0, &amp;dev_info);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to read event device info %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check if enough ports are available */</span></div>
<div class="line">    <span class="keywordflow">if</span> (dev_info.max_event_ports &lt; 2) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Not enough event ports available&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the first event dev conf */</span></div>
<div class="line">    eventdev_config = &amp;(em_conf-&gt;eventdev_config[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Save number of queues &amp; ports available */</span></div>
<div class="line">    eventdev_config-&gt;eventdev_id = 0;</div>
<div class="line">    eventdev_config-&gt;nb_eventqueue = dev_info.max_event_queues;</div>
<div class="line">    eventdev_config-&gt;nb_eventport = dev_info.max_event_ports;</div>
<div class="line">    eventdev_config-&gt;ev_queue_mode = <a name="a15"></a><a class="code" href="rte__eventdev_8h.html#a6b417a1b2250685f2b583aa30a259241">RTE_EVENT_QUEUE_CFG_ALL_TYPES</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check if there are more queues than required */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eventdev_config-&gt;nb_eventqueue &gt; nb_eth_dev + 1) {</div>
<div class="line">        <span class="comment">/* One queue is reserved for Tx */</span></div>
<div class="line">        eventdev_config-&gt;nb_eventqueue = nb_eth_dev + 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check if there are more ports than required */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eventdev_config-&gt;nb_eventport &gt; lcore_count) {</div>
<div class="line">        <span class="comment">/* One port per lcore is enough */</span></div>
<div class="line">        eventdev_config-&gt;nb_eventport = lcore_count;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Update the number of event devices */</span></div>
<div class="line">    em_conf-&gt;nb_eventdev++;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_do_capability_check(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keywordtype">int</span> all_internal_ports = 1;</div>
<div class="line">    uint32_t eventdev_id;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_eventdev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the event dev conf */</span></div>
<div class="line">        eventdev_config = &amp;(em_conf-&gt;eventdev_config[i]);</div>
<div class="line">        eventdev_id = eventdev_config-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check if event device has internal port for Rx &amp; Tx */</span></div>
<div class="line">        <span class="keywordflow">if</span> (eh_dev_has_rx_internal_port(eventdev_id) &amp;&amp;</div>
<div class="line">            eh_dev_has_tx_internal_port(eventdev_id)) {</div>
<div class="line">            eventdev_config-&gt;all_internal_ports = 1;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            all_internal_ports = 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * If Rx &amp; Tx internal ports are supported by all event devices then</span></div>
<div class="line"><span class="comment">     * eth cores won&#39;t be required. Override the eth core mask requested</span></div>
<div class="line"><span class="comment">     * and decrement number of event queues by one as it won&#39;t be needed</span></div>
<div class="line"><span class="comment">     * for Tx.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (all_internal_ports) {</div>
<div class="line">        <a name="a16"></a><a class="code" href="rte__bitmap_8h.html#acb51f3acdb709b19c9ca94a08bfdec50">rte_bitmap_reset</a>(em_conf-&gt;eth_core_mask);</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_eventdev; i++)</div>
<div class="line">            em_conf-&gt;eventdev_config[i].nb_eventqueue--;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_set_default_conf_link(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lcore_id = -1;</div>
<div class="line">    <span class="keywordtype">int</span> i, link_index;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Create a 1:1 mapping from event ports to cores. If the number</span></div>
<div class="line"><span class="comment">     * of event ports is lesser than the cores, some cores won&#39;t</span></div>
<div class="line"><span class="comment">     * execute worker. If there are more event ports, then some ports</span></div>
<div class="line"><span class="comment">     * won&#39;t be used.</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * The event queue-port mapping is done according to the link. Since</span></div>
<div class="line"><span class="comment">     * we are falling back to the default link config, enabling</span></div>
<div class="line"><span class="comment">     * &quot;all_ev_queue_to_ev_port&quot; mode flag. This will map all queues</span></div>
<div class="line"><span class="comment">     * to the port.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    em_conf-&gt;ext_params.all_ev_queue_to_ev_port = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get first event dev conf */</span></div>
<div class="line">    eventdev_config = &amp;(em_conf-&gt;eventdev_config[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Loop through the ports */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; eventdev_config-&gt;nb_eventport; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get next active core id */</span></div>
<div class="line">        lcore_id = eh_get_next_active_core(em_conf,</div>
<div class="line">                lcore_id);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (lcore_id == RTE_MAX_LCORE) {</div>
<div class="line">            <span class="comment">/* Reached max cores */</span></div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Save the current combination as one link */</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the index */</span></div>
<div class="line">        link_index = em_conf-&gt;nb_link;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the corresponding link */</span></div>
<div class="line">        link = &amp;(em_conf-&gt;link[link_index]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Save link */</span></div>
<div class="line">        link-&gt;eventdev_id = eventdev_config-&gt;eventdev_id;</div>
<div class="line">        link-&gt;event_port_id = i;</div>
<div class="line">        link-&gt;lcore_id = lcore_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Don&#39;t set eventq_id as by default all queues</span></div>
<div class="line"><span class="comment">         * need to be mapped to the port, which is controlled</span></div>
<div class="line"><span class="comment">         * by the operating mode.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update number of links */</span></div>
<div class="line">        em_conf-&gt;nb_link++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_set_default_conf_rx_adapter(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_connection_info *conn;</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_conf *adapter;</div>
<div class="line">    <span class="keywordtype">bool</span> rx_internal_port = <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> single_ev_queue = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">int</span> nb_eventqueue;</div>
<div class="line">    uint32_t caps = 0;</div>
<div class="line">    <span class="keywordtype">int</span> eventdev_id;</div>
<div class="line">    <span class="keywordtype">int</span> nb_eth_dev;</div>
<div class="line">    <span class="keywordtype">int</span> adapter_id;</div>
<div class="line">    <span class="keywordtype">int</span> conn_id;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create one adapter with eth queues mapped to event queue(s) */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_eventdev == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No event devs registered&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of eth devs */</span></div>
<div class="line">    nb_eth_dev = <a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Use the first event dev */</span></div>
<div class="line">    eventdev_config = &amp;(em_conf-&gt;eventdev_config[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventdev ID */</span></div>
<div class="line">    eventdev_id = eventdev_config-&gt;eventdev_id;</div>
<div class="line">    adapter_id = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get adapter conf */</span></div>
<div class="line">    adapter = &amp;(em_conf-&gt;rx_adapter[adapter_id]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set adapter conf */</span></div>
<div class="line">    adapter-&gt;eventdev_id = eventdev_id;</div>
<div class="line">    adapter-&gt;adapter_id = adapter_id;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * If event device does not have internal ports for passing</span></div>
<div class="line"><span class="comment">     * packets then reserved one queue for Tx path</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    nb_eventqueue = eventdev_config-&gt;all_internal_ports ?</div>
<div class="line">            eventdev_config-&gt;nb_eventqueue :</div>
<div class="line">            eventdev_config-&gt;nb_eventqueue - 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Map all queues of eth device (port) to an event queue. If there</span></div>
<div class="line"><span class="comment">     * are more event queues than eth ports then create 1:1 mapping.</span></div>
<div class="line"><span class="comment">     * Otherwise map all eth ports to a single event queue.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (nb_eth_dev &gt; nb_eventqueue)</div>
<div class="line">        single_ev_queue = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_eth_dev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Use only the ports enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((em_conf-&gt;eth_portmask &amp; (1 &lt;&lt; i)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the connection id */</span></div>
<div class="line">        conn_id = adapter-&gt;nb_connections;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the connection */</span></div>
<div class="line">        conn = &amp;(adapter-&gt;conn[conn_id]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Set mapping between eth ports &amp; event queues*/</span></div>
<div class="line">        conn-&gt;ethdev_id = i;</div>
<div class="line">        conn-&gt;eventq_id = single_ev_queue ? 0 : i;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add all eth queues eth port to event queue */</span></div>
<div class="line">        conn-&gt;ethdev_rx_qid = -1;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get Rx adapter capabilities */</span></div>
<div class="line">        ret = <a class="code" href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a>(eventdev_id, i, &amp;caps);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get event device %d eth rx adapter&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot; capabilities for port %d&quot;</span>, eventdev_id, i);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!(caps &amp; <a class="code" href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a>))</div>
<div class="line">            rx_internal_port = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update no of connections */</span></div>
<div class="line">        adapter-&gt;nb_connections++;</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (rx_internal_port) {</div>
<div class="line">        <span class="comment">/* Rx core is not required */</span></div>
<div class="line">        adapter-&gt;rx_core_id = -1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* Rx core is required */</span></div>
<div class="line">        adapter-&gt;rx_core_id = eh_get_next_eth_core(em_conf);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We have setup one adapter */</span></div>
<div class="line">    em_conf-&gt;nb_rx_adapter = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_set_default_conf_tx_adapter(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_connection_info *conn;</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_conf *tx_adapter;</div>
<div class="line">    <span class="keywordtype">bool</span> tx_internal_port = <span class="keyword">true</span>;</div>
<div class="line">    uint32_t caps = 0;</div>
<div class="line">    <span class="keywordtype">int</span> eventdev_id;</div>
<div class="line">    <span class="keywordtype">int</span> adapter_id;</div>
<div class="line">    <span class="keywordtype">int</span> nb_eth_dev;</div>
<div class="line">    <span class="keywordtype">int</span> conn_id;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Create one Tx adapter with all eth queues mapped to event queues</span></div>
<div class="line"><span class="comment">     * 1:1.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_eventdev == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No event devs registered&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of eth devs */</span></div>
<div class="line">    nb_eth_dev = <a class="code" href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Use the first event dev */</span></div>
<div class="line">    eventdev_config = &amp;(em_conf-&gt;eventdev_config[0]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventdev ID */</span></div>
<div class="line">    eventdev_id = eventdev_config-&gt;eventdev_id;</div>
<div class="line">    adapter_id = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get adapter conf */</span></div>
<div class="line">    tx_adapter = &amp;(em_conf-&gt;tx_adapter[adapter_id]);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set adapter conf */</span></div>
<div class="line">    tx_adapter-&gt;eventdev_id = eventdev_id;</div>
<div class="line">    tx_adapter-&gt;adapter_id = adapter_id;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Map all Tx queues of the eth device (port) to the event device.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set defaults for connections */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * One eth device (port) is one connection. Map all Tx queues</span></div>
<div class="line"><span class="comment">     * of the device to the Tx adapter.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_eth_dev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Use only the ports enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((em_conf-&gt;eth_portmask &amp; (1 &lt;&lt; i)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the connection id */</span></div>
<div class="line">        conn_id = tx_adapter-&gt;nb_connections;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the connection */</span></div>
<div class="line">        conn = &amp;(tx_adapter-&gt;conn[conn_id]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add ethdev to connections */</span></div>
<div class="line">        conn-&gt;ethdev_id = i;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add all eth tx queues to adapter */</span></div>
<div class="line">        conn-&gt;ethdev_tx_qid = -1;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get Tx adapter capabilities */</span></div>
<div class="line">        ret = <a class="code" href="rte__eventdev_8h.html#ad147297659da4017ff8a8cec1757548c">rte_event_eth_tx_adapter_caps_get</a>(eventdev_id, i, &amp;caps);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get event device %d eth tx adapter&quot;</span></div>
<div class="line">                   <span class="stringliteral">&quot; capabilities for port %d&quot;</span>, eventdev_id, i);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!(caps &amp; <a class="code" href="rte__eventdev_8h.html#a3b6c6cbdc5b9091cc561ab38983be324">RTE_EVENT_ETH_TX_ADAPTER_CAP_INTERNAL_PORT</a>))</div>
<div class="line">            tx_internal_port = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update no of connections */</span></div>
<div class="line">        tx_adapter-&gt;nb_connections++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tx_internal_port) {</div>
<div class="line">        <span class="comment">/* Tx core is not required */</span></div>
<div class="line">        tx_adapter-&gt;tx_core_id = -1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* Tx core is required */</span></div>
<div class="line">        tx_adapter-&gt;tx_core_id = eh_get_next_eth_core(em_conf);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Use one event queue per adapter for submitting packets</span></div>
<div class="line"><span class="comment">         * for Tx. Reserving the last queue available</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="comment">/* Queue numbers start at 0 */</span></div>
<div class="line">        tx_adapter-&gt;tx_ev_queue = eventdev_config-&gt;nb_eventqueue - 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We have setup one adapter */</span></div>
<div class="line">    em_conf-&gt;nb_tx_adapter = 1;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_validate_conf(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Check if event devs are specified. Else probe the event devices</span></div>
<div class="line"><span class="comment">     * and initialize the config with all ports &amp; queues available</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_eventdev == 0) {</div>
<div class="line">        ret = eh_set_default_conf_eventdev(em_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Perform capability check for the selected event devices */</span></div>
<div class="line">    eh_do_capability_check(em_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Check if links are specified. Else generate a default config for</span></div>
<div class="line"><span class="comment">     * the event ports used.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_link == 0) {</div>
<div class="line">        ret = eh_set_default_conf_link(em_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Check if rx adapters are specified. Else generate a default config</span></div>
<div class="line"><span class="comment">     * with one rx adapter and all eth queues - event queue mapped.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_rx_adapter == 0) {</div>
<div class="line">        ret = eh_set_default_conf_rx_adapter(em_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Check if tx adapters are specified. Else generate a default config</span></div>
<div class="line"><span class="comment">     * with one tx adapter.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (em_conf-&gt;nb_tx_adapter == 0) {</div>
<div class="line">        ret = eh_set_default_conf_tx_adapter(em_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_initialize_eventdev(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a17"></a><a class="code" href="structrte__event__queue__conf.html">rte_event_queue_conf</a> eventq_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> evdev_default_conf;</div>
<div class="line">    <span class="keyword">struct </span><a name="_a18"></a><a class="code" href="structrte__event__dev__config.html">rte_event_dev_config</a> eventdev_conf;</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keywordtype">int</span> nb_eventdev = em_conf-&gt;nb_eventdev;</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link;</div>
<div class="line">    uint8_t *queue = NULL;</div>
<div class="line">    uint8_t eventdev_id;</div>
<div class="line">    <span class="keywordtype">int</span> nb_eventqueue;</div>
<div class="line">    uint8_t i, j;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_eventdev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get eventdev config */</span></div>
<div class="line">        eventdev_config = &amp;(em_conf-&gt;eventdev_config[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get event dev ID */</span></div>
<div class="line">        eventdev_id = eventdev_config-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the number of queues */</span></div>
<div class="line">        nb_eventqueue = eventdev_config-&gt;nb_eventqueue;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Reset the default conf */</span></div>
<div class="line">        memset(&amp;evdev_default_conf, 0,</div>
<div class="line">            <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a>));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get default conf of eventdev */</span></div>
<div class="line">        ret = <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(eventdev_id, &amp;evdev_default_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(</div>
<div class="line">                <span class="stringliteral">&quot;Error in getting event device info[devID:%d]&quot;</span>,</div>
<div class="line">                eventdev_id);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        memset(&amp;eventdev_conf, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structrte__event__dev__config.html">rte_event_dev_config</a>));</div>
<div class="line">        eventdev_conf.nb_events_limit =</div>
<div class="line">                evdev_default_conf.max_num_events;</div>
<div class="line">        eventdev_conf.nb_event_queues = nb_eventqueue;</div>
<div class="line">        eventdev_conf.nb_event_ports =</div>
<div class="line">                eventdev_config-&gt;nb_eventport;</div>
<div class="line">        eventdev_conf.nb_event_queue_flows =</div>
<div class="line">                evdev_default_conf.max_event_queue_flows;</div>
<div class="line">        eventdev_conf.nb_event_port_dequeue_depth =</div>
<div class="line">                evdev_default_conf.max_event_port_dequeue_depth;</div>
<div class="line">        eventdev_conf.nb_event_port_enqueue_depth =</div>
<div class="line">                evdev_default_conf.max_event_port_enqueue_depth;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Configure event device */</span></div>
<div class="line">        ret = <a name="a19"></a><a class="code" href="rte__eventdev_8h.html#af1e7d0094442b3a158e89f120a21687d">rte_event_dev_configure</a>(eventdev_id, &amp;eventdev_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Error in configuring event device&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Configure event queues */</span></div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; nb_eventqueue; j++) {</div>
<div class="line"> </div>
<div class="line">            memset(&amp;eventq_conf, 0,</div>
<div class="line">                    <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structrte__event__queue__conf.html">rte_event_queue_conf</a>));</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Per event dev queues can be ATQ or SINGLE LINK */</span></div>
<div class="line">            eventq_conf.<a name="a20"></a><a class="code" href="structrte__event__queue__conf.html#a8bb3902202de82dc39d640ea3e402f45">event_queue_cfg</a> =</div>
<div class="line">                    eventdev_config-&gt;ev_queue_mode;</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * All queues need to be set with sched_type as</span></div>
<div class="line"><span class="comment">             * schedule type for the application stage. One</span></div>
<div class="line"><span class="comment">             * queue would be reserved for the final eth tx</span></div>
<div class="line"><span class="comment">             * stage if event device does not have internal</span></div>
<div class="line"><span class="comment">             * ports. This will be an atomic queue.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">            <span class="keywordflow">if</span> (!eventdev_config-&gt;all_internal_ports &amp;&amp;</div>
<div class="line">                j == nb_eventqueue-1) {</div>
<div class="line">                eventq_conf.<a name="a21"></a><a class="code" href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">schedule_type</a> =</div>
<div class="line">                    <a name="a22"></a><a class="code" href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a>;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                eventq_conf.<a class="code" href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">schedule_type</a> =</div>
<div class="line">                    em_conf-&gt;ext_params.sched_type;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Set max atomic flows to 1024 */</span></div>
<div class="line">            eventq_conf.<a name="a23"></a><a class="code" href="structrte__event__queue__conf.html#a80ea063aa02ba47244c9a40c444c27f4">nb_atomic_flows</a> = 1024;</div>
<div class="line">            eventq_conf.<a name="a24"></a><a class="code" href="structrte__event__queue__conf.html#aa69943329289462766974a416c5d34fb">nb_atomic_order_sequences</a> = 1024;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Setup the queue */</span></div>
<div class="line">            ret = <a name="a25"></a><a class="code" href="rte__eventdev_8h.html#a57a1db34b6c7bb2b05a5db7aab8c6834">rte_event_queue_setup</a>(eventdev_id, j,</div>
<div class="line">                    &amp;eventq_conf);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                EH_LOG_ERR(<span class="stringliteral">&quot;Failed to setup event queue %d&quot;</span>,</div>
<div class="line">                       ret);</div>
<div class="line">                <span class="keywordflow">return</span> ret;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Configure event ports */</span></div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt;  eventdev_config-&gt;nb_eventport; j++) {</div>
<div class="line">            ret = <a name="a26"></a><a class="code" href="rte__eventdev_8h.html#ac087670e6e885abcdf046c8e74844cd4">rte_event_port_setup</a>(eventdev_id, j, NULL);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                EH_LOG_ERR(<span class="stringliteral">&quot;Failed to setup event port %d&quot;</span>,</div>
<div class="line">                       ret);</div>
<div class="line">                <span class="keywordflow">return</span> ret;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Make event queue - event port link */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt;  em_conf-&gt;nb_link; j++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get link info */</span></div>
<div class="line">        link = &amp;(em_conf-&gt;link[j]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get event dev ID */</span></div>
<div class="line">        eventdev_id = link-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * If &quot;all_ev_queue_to_ev_port&quot; params flag is selected, all</span></div>
<div class="line"><span class="comment">         * queues need to be mapped to the port.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (em_conf-&gt;ext_params.all_ev_queue_to_ev_port)</div>
<div class="line">            queue = NULL;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            queue = &amp;(link-&gt;eventq_id);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Link queue to port */</span></div>
<div class="line">        ret = <a name="a27"></a><a class="code" href="rte__eventdev_8h.html#a27f0abd90e6784a4dc1c4f07ece2715a">rte_event_port_link</a>(eventdev_id, link-&gt;event_port_id,</div>
<div class="line">                queue, NULL, 1);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to link event port %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start event devices */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_eventdev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get eventdev config */</span></div>
<div class="line">        eventdev_config = &amp;(em_conf-&gt;eventdev_config[i]);</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a28"></a><a class="code" href="rte__eventdev_8h.html#ab6e99f06a45adaa095b257b93ebaf201">rte_event_dev_start</a>(eventdev_config-&gt;eventdev_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to start event device %d, %d&quot;</span>,</div>
<div class="line">                   i, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_rx_adapter_configure(<span class="keyword">struct</span> eventmode_conf *em_conf,</div>
<div class="line">        <span class="keyword">struct</span> rx_adapter_conf *adapter)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a name="_a29"></a><a class="code" href="structrte__event__eth__rx__adapter__queue__conf.html">rte_event_eth_rx_adapter_queue_conf</a> queue_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> evdev_default_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span><a name="_a30"></a><a class="code" href="structrte__event__port__conf.html">rte_event_port_conf</a> port_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_connection_info *conn;</div>
<div class="line">    uint8_t eventdev_id;</div>
<div class="line">    uint32_t service_id;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keywordtype">int</span> j;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event dev ID */</span></div>
<div class="line">    eventdev_id = adapter-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get default configuration of event dev */</span></div>
<div class="line">    ret = <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(eventdev_id, &amp;evdev_default_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get event dev info %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup port conf */</span></div>
<div class="line">    port_conf.<a name="a31"></a><a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> = 1200;</div>
<div class="line">    port_conf.<a name="a32"></a><a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> =</div>
<div class="line">            evdev_default_conf.<a name="a33"></a><a class="code" href="structrte__event__dev__info.html#a5ecd256765c6af26808cb8abaeeabe25">max_event_port_dequeue_depth</a>;</div>
<div class="line">    port_conf.<a name="a34"></a><a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> =</div>
<div class="line">            evdev_default_conf.<a name="a35"></a><a class="code" href="structrte__event__dev__info.html#a01a4cc1d02df9da2accef27efb5f1eff">max_event_port_enqueue_depth</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create Rx adapter */</span></div>
<div class="line">    ret = <a name="a36"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#ab717883885cffa68e2fff3525f2ff1ad">rte_event_eth_rx_adapter_create</a>(adapter-&gt;adapter_id,</div>
<div class="line">            adapter-&gt;eventdev_id, &amp;port_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to create rx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup various connections in the adapter */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; adapter-&gt;nb_connections; j++) {</div>
<div class="line">        <span class="comment">/* Get connection */</span></div>
<div class="line">        conn = &amp;(adapter-&gt;conn[j]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Setup queue conf */</span></div>
<div class="line">        queue_conf.<a name="a37"></a><a class="code" href="structrte__event__eth__rx__adapter__queue__conf.html#ace15ae1b604b29456e25bfb3f73fbc8a">ev</a>.<a name="a38"></a><a class="code" href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">queue_id</a> = conn-&gt;eventq_id;</div>
<div class="line">        queue_conf.<a class="code" href="structrte__event__eth__rx__adapter__queue__conf.html#ace15ae1b604b29456e25bfb3f73fbc8a">ev</a>.<a name="a39"></a><a class="code" href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">sched_type</a> = em_conf-&gt;ext_params.sched_type;</div>
<div class="line">        queue_conf.<a class="code" href="structrte__event__eth__rx__adapter__queue__conf.html#ace15ae1b604b29456e25bfb3f73fbc8a">ev</a>.<a name="a40"></a><a class="code" href="structrte__event.html#a45def65890de0da17bc0d6e2ca2b3a9f">event_type</a> = <a name="a41"></a><a class="code" href="rte__eventdev_8h.html#ae5a711c45b3d3f125069b1a7cb731435">RTE_EVENT_TYPE_ETHDEV</a>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add queue to the adapter */</span></div>
<div class="line">        ret = <a name="a42"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#abe12d7b973444febfd97570d7f3f69d8">rte_event_eth_rx_adapter_queue_add</a>(adapter-&gt;adapter_id,</div>
<div class="line">                conn-&gt;ethdev_id, conn-&gt;ethdev_rx_qid,</div>
<div class="line">                &amp;queue_conf);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to add eth queue to rx adapter %d&quot;</span>,</div>
<div class="line">                   ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the service ID used by rx adapter */</span></div>
<div class="line">    ret = <a name="a43"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a3210d6c792e04a719d8cdf12c0fce224">rte_event_eth_rx_adapter_service_id_get</a>(adapter-&gt;adapter_id,</div>
<div class="line">                              &amp;service_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get service id used by rx adapter %d&quot;</span>,</div>
<div class="line">               ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a44"></a><a class="code" href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a>(service_id, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start adapter */</span></div>
<div class="line">    ret = <a name="a45"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a681d527bfc9067a30c4dbdc4db527651">rte_event_eth_rx_adapter_start</a>(adapter-&gt;adapter_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to start rx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_initialize_rx_adapter(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_conf *adapter;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure rx adapters */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_rx_adapter; i++) {</div>
<div class="line">        adapter = &amp;(em_conf-&gt;rx_adapter[i]);</div>
<div class="line">        ret = eh_rx_adapter_configure(em_conf, adapter);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to configure rx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> int32_t</div>
<div class="line">eh_start_worker_eth_core(<span class="keyword">struct</span> eventmode_conf *conf, uint32_t lcore_id)</div>
<div class="line">{</div>
<div class="line">    uint32_t service_id[EVENT_MODE_MAX_ADAPTERS_PER_RX_CORE];</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_conf *rx_adapter;</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_conf *tx_adapter;</div>
<div class="line">    <span class="keywordtype">int</span> service_count = 0;</div>
<div class="line">    <span class="keywordtype">int</span> adapter_id;</div>
<div class="line">    int32_t ret;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Entering eth_core processing on lcore %u&quot;</span>, lcore_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Parse adapter config to check which of all Rx adapters need</span></div>
<div class="line"><span class="comment">     * to be handled by this core.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; conf-&gt;nb_rx_adapter; i++) {</div>
<div class="line">        <span class="comment">/* Check if we have exceeded the max allowed */</span></div>
<div class="line">        <span class="keywordflow">if</span> (service_count &gt; EVENT_MODE_MAX_ADAPTERS_PER_RX_CORE) {</div>
<div class="line">            EH_LOG_ERR(</div>
<div class="line">                  <span class="stringliteral">&quot;Exceeded the max allowed adapters per rx core&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        rx_adapter = &amp;(conf-&gt;rx_adapter[i]);</div>
<div class="line">        <span class="keywordflow">if</span> (rx_adapter-&gt;rx_core_id != lcore_id)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Adapter is handled by this core */</span></div>
<div class="line">        adapter_id = rx_adapter-&gt;adapter_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the service ID for the adapters */</span></div>
<div class="line">        ret = <a class="code" href="rte__event__eth__rx__adapter_8h.html#a3210d6c792e04a719d8cdf12c0fce224">rte_event_eth_rx_adapter_service_id_get</a>(adapter_id,</div>
<div class="line">                &amp;(service_id[service_count]));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(</div>
<div class="line">                <span class="stringliteral">&quot;Failed to get service id used by rx adapter&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update service count */</span></div>
<div class="line">        service_count++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Parse adapter config to see which of all Tx adapters need</span></div>
<div class="line"><span class="comment">     * to be handled by this core.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; conf-&gt;nb_tx_adapter; i++) {</div>
<div class="line">        <span class="comment">/* Check if we have exceeded the max allowed */</span></div>
<div class="line">        <span class="keywordflow">if</span> (service_count &gt; EVENT_MODE_MAX_ADAPTERS_PER_TX_CORE) {</div>
<div class="line">            EH_LOG_ERR(</div>
<div class="line">                <span class="stringliteral">&quot;Exceeded the max allowed adapters per tx core&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        tx_adapter = &amp;conf-&gt;tx_adapter[i];</div>
<div class="line">        <span class="keywordflow">if</span> (tx_adapter-&gt;tx_core_id != lcore_id)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Adapter is handled by this core */</span></div>
<div class="line">        adapter_id = tx_adapter-&gt;adapter_id;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the service ID for the adapters */</span></div>
<div class="line">        ret = <a name="a46"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a074f50a48d57c8c6a7785032d2482713">rte_event_eth_tx_adapter_service_id_get</a>(adapter_id,</div>
<div class="line">                &amp;(service_id[service_count]));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(</div>
<div class="line">                <span class="stringliteral">&quot;Failed to get service id used by tx adapter&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Update service count */</span></div>
<div class="line">        service_count++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    eth_core_running = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (eth_core_running) {</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; service_count; i++) {</div>
<div class="line">            <span class="comment">/* Initiate adapter service */</span></div>
<div class="line">            <a name="a47"></a><a class="code" href="rte__service_8h.html#a198cc1b4dfbcbdec9d78d5986bd8b5da">rte_service_run_iter_on_app_lcore</a>(service_id[i], 0);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> int32_t</div>
<div class="line">eh_stop_worker_eth_core(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (eth_core_running) {</div>
<div class="line">        EH_LOG_INFO(<span class="stringliteral">&quot;Stopping eth cores&quot;</span>);</div>
<div class="line">        eth_core_running = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>eh_app_worker_params *</div>
<div class="line">eh_find_worker(uint32_t lcore_id, <span class="keyword">struct</span> eh_conf *conf,</div>
<div class="line">        <span class="keyword">struct</span> eh_app_worker_params *app_wrkrs, uint8_t nb_wrkr_param)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eh_app_worker_params curr_conf = { {{0} }, NULL};</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link = NULL;</div>
<div class="line">    <span class="keyword">struct </span>eh_app_worker_params *tmp_wrkr;</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line">    uint8_t eventdev_id;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode config */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Use event device from the first lcore-event link.</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     * Assumption: All lcore-event links tied to a core are using the</span></div>
<div class="line"><span class="comment">     * same event device. In other words, one core would be polling on</span></div>
<div class="line"><span class="comment">     * queues of a single event device only.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get a link for this lcore */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_link; i++) {</div>
<div class="line">        link = &amp;(em_conf-&gt;link[i]);</div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;lcore_id == lcore_id)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (link == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No valid link found for lcore %d&quot;</span>, lcore_id);</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event dev ID */</span></div>
<div class="line">    eventdev_id = link-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Populate the curr_conf with the capabilities */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check for Tx internal port */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eh_dev_has_tx_internal_port(eventdev_id))</div>
<div class="line">        curr_conf.cap.tx_internal_port = EH_TX_TYPE_INTERNAL_PORT;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        curr_conf.cap.tx_internal_port = EH_TX_TYPE_NO_INTERNAL_PORT;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check for burst mode */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eh_dev_has_burst_mode(eventdev_id))</div>
<div class="line">        curr_conf.cap.burst = EH_RX_TYPE_BURST;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        curr_conf.cap.burst = EH_RX_TYPE_NON_BURST;</div>
<div class="line"> </div>
<div class="line">    curr_conf.cap.ipsec_mode = conf-&gt;ipsec_mode;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Parse the passed list and see if we have matching capabilities */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize the pointer used to traverse the list */</span></div>
<div class="line">    tmp_wrkr = app_wrkrs;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_wrkr_param; i++, tmp_wrkr++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Skip this if capabilities are not matching */</span></div>
<div class="line">        <span class="keywordflow">if</span> (tmp_wrkr-&gt;cap.u64 != curr_conf.cap.u64)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If the checks pass, we have a match */</span></div>
<div class="line">        <span class="keywordflow">return</span> tmp_wrkr;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_verify_match_worker(<span class="keyword">struct</span> eh_app_worker_params *match_wrkr)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Verify registered worker */</span></div>
<div class="line">    <span class="keywordflow">if</span> (match_wrkr-&gt;worker_thread == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;No worker registered&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Success */</span></div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint8_t</div>
<div class="line">eh_get_event_lcore_links(uint32_t lcore_id, <span class="keyword">struct</span> eh_conf *conf,</div>
<div class="line">        <span class="keyword">struct</span> eh_event_link_info **links)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link_cache;</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf = NULL;</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link;</div>
<div class="line">    uint8_t lcore_nb_link = 0;</div>
<div class="line">    <span class="keywordtype">size_t</span> single_link_size;</div>
<div class="line">    <span class="keywordtype">size_t</span> cache_size;</div>
<div class="line">    <span class="keywordtype">int</span> index = 0;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL || links == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid args&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (em_conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of links registered */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_link; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get link */</span></div>
<div class="line">        link = &amp;(em_conf-&gt;link[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check if we have link intended for this lcore */</span></div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;lcore_id == lcore_id) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Update the number of links for this core */</span></div>
<div class="line">            lcore_nb_link++;</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Compute size of one entry to be copied */</span></div>
<div class="line">    single_link_size = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>eh_event_link_info);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Compute size of the buffer required */</span></div>
<div class="line">    cache_size = lcore_nb_link * <span class="keyword">sizeof</span>(<span class="keyword">struct </span>eh_event_link_info);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Compute size of the buffer required */</span></div>
<div class="line">    link_cache = calloc(1, cache_size);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the number of links registered */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_link; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get link */</span></div>
<div class="line">        link = &amp;(em_conf-&gt;link[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Check if we have link intended for this lcore */</span></div>
<div class="line">        <span class="keywordflow">if</span> (link-&gt;lcore_id == lcore_id) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Cache the link */</span></div>
<div class="line">            memcpy(&amp;link_cache[index], link, single_link_size);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Update index */</span></div>
<div class="line">            index++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Update the links for application to use the cached links */</span></div>
<div class="line">    *links = link_cache;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Return the number of cached links */</span></div>
<div class="line">    <span class="keywordflow">return</span> lcore_nb_link;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_tx_adapter_configure(<span class="keyword">struct</span> eventmode_conf *em_conf,</div>
<div class="line">        <span class="keyword">struct</span> tx_adapter_conf *adapter)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__dev__info.html">rte_event_dev_info</a> evdev_default_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structrte__event__port__conf.html">rte_event_port_conf</a> port_conf = {0};</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_connection_info *conn;</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    uint8_t tx_port_id = 0;</div>
<div class="line">    uint8_t eventdev_id;</div>
<div class="line">    uint32_t service_id;</div>
<div class="line">    <span class="keywordtype">int</span> ret, j;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event dev ID */</span></div>
<div class="line">    eventdev_id = adapter-&gt;eventdev_id;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event device conf */</span></div>
<div class="line">    eventdev_config = eh_get_eventdev_params(em_conf, eventdev_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create Tx adapter */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get default configuration of event dev */</span></div>
<div class="line">    ret = <a class="code" href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a>(eventdev_id, &amp;evdev_default_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get event dev info %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup port conf */</span></div>
<div class="line">    port_conf.<a class="code" href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">new_event_threshold</a> =</div>
<div class="line">            evdev_default_conf.<a name="a48"></a><a class="code" href="structrte__event__dev__info.html#a7541b911a3ef8464385d350088c94057">max_num_events</a>;</div>
<div class="line">    port_conf.<a class="code" href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">dequeue_depth</a> =</div>
<div class="line">            evdev_default_conf.<a class="code" href="structrte__event__dev__info.html#a5ecd256765c6af26808cb8abaeeabe25">max_event_port_dequeue_depth</a>;</div>
<div class="line">    port_conf.<a class="code" href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">enqueue_depth</a> =</div>
<div class="line">            evdev_default_conf.<a class="code" href="structrte__event__dev__info.html#a01a4cc1d02df9da2accef27efb5f1eff">max_event_port_enqueue_depth</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create adapter */</span></div>
<div class="line">    ret = <a name="a49"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a5edd34a4114d6a3fda57c5eca9dc745f">rte_event_eth_tx_adapter_create</a>(adapter-&gt;adapter_id,</div>
<div class="line">            adapter-&gt;eventdev_id, &amp;port_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to create tx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup various connections in the adapter */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; adapter-&gt;nb_connections; j++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get connection */</span></div>
<div class="line">        conn = &amp;(adapter-&gt;conn[j]);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Add queue to the adapter */</span></div>
<div class="line">        ret = <a name="a50"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a7151d87dc659b829aa4d752e566a97c6">rte_event_eth_tx_adapter_queue_add</a>(adapter-&gt;adapter_id,</div>
<div class="line">                conn-&gt;ethdev_id, conn-&gt;ethdev_tx_qid);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to add eth queue to tx adapter %d&quot;</span>,</div>
<div class="line">                   ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Check if Tx core is assigned. If Tx core is not assigned then</span></div>
<div class="line"><span class="comment">     * the adapter has internal port for submitting Tx packets and</span></div>
<div class="line"><span class="comment">     * Tx event queue &amp; port setup is not required</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (adapter-&gt;tx_core_id == (uint32_t) (-1)) {</div>
<div class="line">        <span class="comment">/* Internal port is present */</span></div>
<div class="line">        <span class="keywordflow">goto</span> skip_tx_queue_port_setup;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup Tx queue &amp; port */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event port used by the adapter */</span></div>
<div class="line">    ret = <a name="a51"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a101b698421cb33e16e661674e3892df6">rte_event_eth_tx_adapter_event_port_get</a>(</div>
<div class="line">            adapter-&gt;adapter_id, &amp;tx_port_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get tx adapter port id %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Tx event queue is reserved for Tx adapter. Unlink this queue</span></div>
<div class="line"><span class="comment">     * from all other ports</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; eventdev_config-&gt;nb_eventport; j++) {</div>
<div class="line">        <a name="a52"></a><a class="code" href="rte__eventdev_8h.html#ad8dad9f41edf100e192e5610b2f078d5">rte_event_port_unlink</a>(eventdev_id, j,</div>
<div class="line">                      &amp;(adapter-&gt;tx_ev_queue), 1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Link Tx event queue to Tx port */</span></div>
<div class="line">    ret = <a class="code" href="rte__eventdev_8h.html#a27f0abd90e6784a4dc1c4f07ece2715a">rte_event_port_link</a>(eventdev_id, tx_port_id,</div>
<div class="line">            &amp;(adapter-&gt;tx_ev_queue), NULL, 1);</div>
<div class="line">    <span class="keywordflow">if</span> (ret != 1) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to link event queue to port&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the service ID used by Tx adapter */</span></div>
<div class="line">    ret = <a class="code" href="rte__event__eth__tx__adapter_8h.html#a074f50a48d57c8c6a7785032d2482713">rte_event_eth_tx_adapter_service_id_get</a>(adapter-&gt;adapter_id,</div>
<div class="line">                              &amp;service_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret != -ESRCH &amp;&amp; ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get service id used by tx adapter %d&quot;</span>,</div>
<div class="line">               ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a>(service_id, 0);</div>
<div class="line"> </div>
<div class="line">skip_tx_queue_port_setup:</div>
<div class="line">    <span class="comment">/* Start adapter */</span></div>
<div class="line">    ret = <a name="a53"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#af75a5ef694d67cc0653942d7b2bb6b78">rte_event_eth_tx_adapter_start</a>(adapter-&gt;adapter_id);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to start tx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">eh_initialize_tx_adapter(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_conf *adapter;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Configure Tx adapters */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_tx_adapter; i++) {</div>
<div class="line">        adapter = &amp;(em_conf-&gt;tx_adapter[i]);</div>
<div class="line">        ret = eh_tx_adapter_configure(em_conf, adapter);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to configure tx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_display_operating_mode(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> sched_types[][32] = {</div>
<div class="line">        <span class="stringliteral">&quot;RTE_SCHED_TYPE_ORDERED&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;RTE_SCHED_TYPE_ATOMIC&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;RTE_SCHED_TYPE_PARALLEL&quot;</span>,</div>
<div class="line">    };</div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Operating mode:&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;\tScheduling type: \t%s&quot;</span>,</div>
<div class="line">        sched_types[em_conf-&gt;ext_params.sched_type]);</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_display_event_dev_conf(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> queue_mode[][32] = {</div>
<div class="line">        <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;ATQ (ALL TYPE QUEUE)&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;SINGLE LINK&quot;</span>,</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">char</span> print_buf[256] = { 0 };</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Event Device Configuration:&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_eventdev; i++) {</div>
<div class="line">        sprintf(print_buf,</div>
<div class="line">            <span class="stringliteral">&quot;\tDev ID: %-2d \tQueues: %-2d \tPorts: %-2d&quot;</span>,</div>
<div class="line">            em_conf-&gt;eventdev_config[i].eventdev_id,</div>
<div class="line">            em_conf-&gt;eventdev_config[i].nb_eventqueue,</div>
<div class="line">            em_conf-&gt;eventdev_config[i].nb_eventport);</div>
<div class="line">        sprintf(print_buf + strlen(print_buf),</div>
<div class="line">            <span class="stringliteral">&quot;\tQueue mode: %s&quot;</span>,</div>
<div class="line">            queue_mode[em_conf-&gt;eventdev_config[i].ev_queue_mode]);</div>
<div class="line">        EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line">    }</div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_display_rx_adapter_conf(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> nb_rx_adapter = em_conf-&gt;nb_rx_adapter;</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_connection_info *conn;</div>
<div class="line">    <span class="keyword">struct </span>rx_adapter_conf *adapter;</div>
<div class="line">    <span class="keywordtype">char</span> print_buf[256] = { 0 };</div>
<div class="line">    <span class="keywordtype">int</span> i, j;</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Rx adapters configured: %d&quot;</span>, nb_rx_adapter);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_rx_adapter; i++) {</div>
<div class="line">        adapter = &amp;(em_conf-&gt;rx_adapter[i]);</div>
<div class="line">        sprintf(print_buf,</div>
<div class="line">            <span class="stringliteral">&quot;\tRx adaper ID: %-2d\tConnections: %-2d\tEvent dev ID: %-2d&quot;</span>,</div>
<div class="line">            adapter-&gt;adapter_id,</div>
<div class="line">            adapter-&gt;nb_connections,</div>
<div class="line">            adapter-&gt;eventdev_id);</div>
<div class="line">        <span class="keywordflow">if</span> (adapter-&gt;rx_core_id == (uint32_t)-1)</div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tRx core: %-2s&quot;</span>, <span class="stringliteral">&quot;[INTERNAL PORT]&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (adapter-&gt;rx_core_id == RTE_MAX_LCORE)</div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tRx core: %-2s&quot;</span>, <span class="stringliteral">&quot;[NONE]&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tRx core: %-2d&quot;</span>, adapter-&gt;rx_core_id);</div>
<div class="line"> </div>
<div class="line">        EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; adapter-&gt;nb_connections; j++) {</div>
<div class="line">            conn = &amp;(adapter-&gt;conn[j]);</div>
<div class="line"> </div>
<div class="line">            sprintf(print_buf,</div>
<div class="line">                <span class="stringliteral">&quot;\t\tEthdev ID: %-2d&quot;</span>, conn-&gt;ethdev_id);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (conn-&gt;ethdev_rx_qid == -1)</div>
<div class="line">                sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                    <span class="stringliteral">&quot;\tEth rx queue: %-2s&quot;</span>, <span class="stringliteral">&quot;ALL&quot;</span>);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                    <span class="stringliteral">&quot;\tEth rx queue: %-2d&quot;</span>,</div>
<div class="line">                    conn-&gt;ethdev_rx_qid);</div>
<div class="line"> </div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tEvent queue: %-2d&quot;</span>, conn-&gt;eventq_id);</div>
<div class="line">            EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_display_tx_adapter_conf(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> nb_tx_adapter = em_conf-&gt;nb_tx_adapter;</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_connection_info *conn;</div>
<div class="line">    <span class="keyword">struct </span>tx_adapter_conf *adapter;</div>
<div class="line">    <span class="keywordtype">char</span> print_buf[256] = { 0 };</div>
<div class="line">    <span class="keywordtype">int</span> i, j;</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Tx adapters configured: %d&quot;</span>, nb_tx_adapter);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; nb_tx_adapter; i++) {</div>
<div class="line">        adapter = &amp;(em_conf-&gt;tx_adapter[i]);</div>
<div class="line">        sprintf(print_buf,</div>
<div class="line">            <span class="stringliteral">&quot;\tTx adapter ID: %-2d\tConnections: %-2d\tEvent dev ID: %-2d&quot;</span>,</div>
<div class="line">            adapter-&gt;adapter_id,</div>
<div class="line">            adapter-&gt;nb_connections,</div>
<div class="line">            adapter-&gt;eventdev_id);</div>
<div class="line">        <span class="keywordflow">if</span> (adapter-&gt;tx_core_id == (uint32_t)-1)</div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tTx core: %-2s&quot;</span>, <span class="stringliteral">&quot;[INTERNAL PORT]&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (adapter-&gt;tx_core_id == RTE_MAX_LCORE)</div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tTx core: %-2s&quot;</span>, <span class="stringliteral">&quot;[NONE]&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;\tTx core: %-2d,\tInput event queue: %-2d&quot;</span>,</div>
<div class="line">                adapter-&gt;tx_core_id, adapter-&gt;tx_ev_queue);</div>
<div class="line"> </div>
<div class="line">        EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; adapter-&gt;nb_connections; j++) {</div>
<div class="line">            conn = &amp;(adapter-&gt;conn[j]);</div>
<div class="line"> </div>
<div class="line">            sprintf(print_buf,</div>
<div class="line">                <span class="stringliteral">&quot;\t\tEthdev ID: %-2d&quot;</span>, conn-&gt;ethdev_id);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (conn-&gt;ethdev_tx_qid == -1)</div>
<div class="line">                sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                    <span class="stringliteral">&quot;\tEth tx queue: %-2s&quot;</span>, <span class="stringliteral">&quot;ALL&quot;</span>);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                    <span class="stringliteral">&quot;\tEth tx queue: %-2d&quot;</span>,</div>
<div class="line">                    conn-&gt;ethdev_tx_qid);</div>
<div class="line">            EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">eh_display_link_conf(<span class="keyword">struct</span> eventmode_conf *em_conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *link;</div>
<div class="line">    <span class="keywordtype">char</span> print_buf[256] = { 0 };</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;Links configured: %d&quot;</span>, em_conf-&gt;nb_link);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_link; i++) {</div>
<div class="line">        link = &amp;(em_conf-&gt;link[i]);</div>
<div class="line"> </div>
<div class="line">        sprintf(print_buf,</div>
<div class="line">            <span class="stringliteral">&quot;\tEvent dev ID: %-2d\tEvent port: %-2d&quot;</span>,</div>
<div class="line">            link-&gt;eventdev_id,</div>
<div class="line">            link-&gt;event_port_id);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (em_conf-&gt;ext_params.all_ev_queue_to_ev_port)</div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;Event queue: %-2s\t&quot;</span>, <span class="stringliteral">&quot;ALL&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            sprintf(print_buf + strlen(print_buf),</div>
<div class="line">                <span class="stringliteral">&quot;Event queue: %-2d\t&quot;</span>, link-&gt;eventq_id);</div>
<div class="line"> </div>
<div class="line">        sprintf(print_buf + strlen(print_buf),</div>
<div class="line">            <span class="stringliteral">&quot;Lcore: %-2d&quot;</span>, link-&gt;lcore_id);</div>
<div class="line">        EH_LOG_INFO(<span class="stringliteral">&quot;%s&quot;</span>, print_buf);</div>
<div class="line">    }</div>
<div class="line">    EH_LOG_INFO(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>eh_conf *</div>
<div class="line">eh_conf_init(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf = NULL;</div>
<div class="line">    <span class="keyword">struct </span>eh_conf *conf = NULL;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> eth_core_id;</div>
<div class="line">    <span class="keywordtype">void</span> *bitmap = NULL;</div>
<div class="line">    uint32_t nb_bytes;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Allocate memory for config */</span></div>
<div class="line">    conf = calloc(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> eh_conf));</div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to allocate memory for eventmode helper &quot;</span></div>
<div class="line">               <span class="stringliteral">&quot;config&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set default conf */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Packet transfer mode: poll */</span></div>
<div class="line">    conf-&gt;mode = EH_PKT_TRANSFER_MODE_POLL;</div>
<div class="line">    conf-&gt;ipsec_mode = EH_IPSEC_MODE_TYPE_APP;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Keep all ethernet ports enabled by default */</span></div>
<div class="line">    conf-&gt;eth_portmask = -1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Allocate memory for event mode params */</span></div>
<div class="line">    conf-&gt;mode_params = calloc(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> eventmode_conf));</div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to allocate memory for event mode params&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> free_conf;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Allocate and initialize bitmap for eth cores */</span></div>
<div class="line">    nb_bytes = <a name="a54"></a><a class="code" href="rte__bitmap_8h.html#a62cb3ed982d94c948669352dbe50545f">rte_bitmap_get_memory_footprint</a>(RTE_MAX_LCORE);</div>
<div class="line">    <span class="keywordflow">if</span> (!nb_bytes) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to get bitmap footprint&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> free_em_conf;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    bitmap = <a name="a55"></a><a class="code" href="rte__malloc_8h.html#aaf0f048a5fd1672688c662cdfb4536b3">rte_zmalloc</a>(<span class="stringliteral">&quot;event-helper-ethcore-bitmap&quot;</span>, nb_bytes,</div>
<div class="line">                 RTE_CACHE_LINE_SIZE);</div>
<div class="line">    <span class="keywordflow">if</span> (!bitmap) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to allocate memory for eth cores bitmap\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> free_em_conf;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    em_conf-&gt;eth_core_mask = <a name="a56"></a><a class="code" href="rte__bitmap_8h.html#ad8be0de2db024794045b9fe74adb4678">rte_bitmap_init</a>(RTE_MAX_LCORE, bitmap,</div>
<div class="line">                         nb_bytes);</div>
<div class="line">    <span class="keywordflow">if</span> (!em_conf-&gt;eth_core_mask) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to initialize bitmap&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> free_bitmap;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set schedule type as not set */</span></div>
<div class="line">    em_conf-&gt;ext_params.sched_type = SCHED_TYPE_NOT_SET;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set two cores as eth cores for Rx &amp; Tx */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Use first core other than main core as Rx core */</span></div>
<div class="line">    eth_core_id = <a class="code" href="rte__lcore_8h.html#acab656f5b00c29090db4500efabedd98">rte_get_next_lcore</a>(0, <span class="comment">/* curr core */</span></div>
<div class="line">                     1, <span class="comment">/* skip main core */</span></div>
<div class="line">                     0  <span class="comment">/* wrap */</span>);</div>
<div class="line"> </div>
<div class="line">    <a name="a57"></a><a class="code" href="rte__bitmap_8h.html#afee8d22bec7a960a4a4870cbb5ea2086">rte_bitmap_set</a>(em_conf-&gt;eth_core_mask, eth_core_id);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Use next core as Tx core */</span></div>
<div class="line">    eth_core_id = <a class="code" href="rte__lcore_8h.html#acab656f5b00c29090db4500efabedd98">rte_get_next_lcore</a>(eth_core_id,   <span class="comment">/* curr core */</span></div>
<div class="line">                     1,     <span class="comment">/* skip main core */</span></div>
<div class="line">                     0      <span class="comment">/* wrap */</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="rte__bitmap_8h.html#afee8d22bec7a960a4a4870cbb5ea2086">rte_bitmap_set</a>(em_conf-&gt;eth_core_mask, eth_core_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> conf;</div>
<div class="line"> </div>
<div class="line">free_bitmap:</div>
<div class="line">    <a name="a58"></a><a class="code" href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a>(bitmap);</div>
<div class="line">free_em_conf:</div>
<div class="line">    free(em_conf);</div>
<div class="line">free_conf:</div>
<div class="line">    free(conf);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">eh_conf_uninit(<span class="keyword">struct</span> eh_conf *conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!conf || !conf-&gt;mode_params)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Free evenmode configuration memory */</span></div>
<div class="line">    <a class="code" href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a>(em_conf-&gt;eth_core_mask);</div>
<div class="line">    free(em_conf);</div>
<div class="line">    free(conf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">eh_display_conf(<span class="keyword">struct</span> eh_conf *conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event helper configuration&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode != EH_PKT_TRANSFER_MODE_EVENT)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = (<span class="keyword">struct </span>eventmode_conf *)(conf-&gt;mode_params);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display user exposed operating modes */</span></div>
<div class="line">    eh_display_operating_mode(em_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display event device conf */</span></div>
<div class="line">    eh_display_event_dev_conf(em_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display Rx adapter conf */</span></div>
<div class="line">    eh_display_rx_adapter_conf(em_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display Tx adapter conf */</span></div>
<div class="line">    eh_display_tx_adapter_conf(em_conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display event-lcore link */</span></div>
<div class="line">    eh_display_link_conf(em_conf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">int32_t</div>
<div class="line">eh_devs_init(<span class="keyword">struct</span> eh_conf *conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line">    uint16_t port_id;</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event helper configuration&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode != EH_PKT_TRANSFER_MODE_EVENT)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Eventmode conf would need eth portmask */</span></div>
<div class="line">    em_conf-&gt;eth_portmask = conf-&gt;eth_portmask;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Validate the requested config */</span></div>
<div class="line">    ret = eh_validate_conf(em_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to validate the requested config %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Display the current configuration */</span></div>
<div class="line">    eh_display_conf(conf);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Stop eth devices before setting up adapter */</span></div>
<div class="line">    <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Use only the ports enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((conf-&gt;eth_portmask &amp; (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a59"></a><a class="code" href="rte__ethdev_8h.html#a6fc010cf6216331c50bc02d2fd4e614f">rte_eth_dev_stop</a>(port_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to stop port %u, err: %d&quot;</span>,</div>
<div class="line">                    port_id, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup eventdev */</span></div>
<div class="line">    ret = eh_initialize_eventdev(em_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to initialize event dev %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup Rx adapter */</span></div>
<div class="line">    ret = eh_initialize_rx_adapter(em_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to initialize rx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Setup Tx adapter */</span></div>
<div class="line">    ret = eh_initialize_tx_adapter(em_conf);</div>
<div class="line">    <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to initialize tx adapter %d&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start eth devices after setting up adapter */</span></div>
<div class="line">    <a class="code" href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a>(port_id) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Use only the ports enabled */</span></div>
<div class="line">        <span class="keywordflow">if</span> ((conf-&gt;eth_portmask &amp; (1 &lt;&lt; port_id)) == 0)</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a60"></a><a class="code" href="rte__ethdev_8h.html#afdc834c1c52e9fb512301990468ca7c2">rte_eth_dev_start</a>(port_id);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to start eth dev %d, %d&quot;</span>,</div>
<div class="line">                   port_id, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">int32_t</div>
<div class="line">eh_devs_uninit(<span class="keyword">struct</span> eh_conf *conf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line">    <span class="keywordtype">int</span> ret, i, j;</div>
<div class="line">    uint16_t id;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event helper configuration&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode != EH_PKT_TRANSFER_MODE_EVENT)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Stop and release rx adapters */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_rx_adapter; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">id</span> = em_conf-&gt;rx_adapter[i].adapter_id;</div>
<div class="line">        ret = <a name="a61"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#a7f450da6c7dc2404adcfb86ab16b3aa1">rte_event_eth_rx_adapter_stop</a>(<span class="keywordtype">id</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to stop rx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; em_conf-&gt;rx_adapter[i].nb_connections; j++) {</div>
<div class="line"> </div>
<div class="line">            ret = <a name="a62"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#ab061192ba3b603710c4a05dd56ca6fb1">rte_event_eth_rx_adapter_queue_del</a>(<span class="keywordtype">id</span>,</div>
<div class="line">                em_conf-&gt;rx_adapter[i].conn[j].ethdev_id, -1);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                EH_LOG_ERR(</div>
<div class="line">                       <span class="stringliteral">&quot;Failed to remove rx adapter queues %d&quot;</span>,</div>
<div class="line">                       ret);</div>
<div class="line">                <span class="keywordflow">return</span> ret;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a63"></a><a class="code" href="rte__event__eth__rx__adapter_8h.html#ae73dea5fd8835b2e3f30ae3ab91771ba">rte_event_eth_rx_adapter_free</a>(<span class="keywordtype">id</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to free rx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Stop and release event devices */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_eventdev; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">id</span> = em_conf-&gt;eventdev_config[i].eventdev_id;</div>
<div class="line">        <a name="a64"></a><a class="code" href="rte__eventdev_8h.html#a644f6cc4ab24a5c07bfff9b0f5c42e8e">rte_event_dev_stop</a>(<span class="keywordtype">id</span>);</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a65"></a><a class="code" href="rte__eventdev_8h.html#af70f4ed704d89a4ffce3b4c105bac076">rte_event_dev_close</a>(<span class="keywordtype">id</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to close event dev %d, %d&quot;</span>, <span class="keywordtype">id</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Stop and release tx adapters */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; em_conf-&gt;nb_tx_adapter; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">id</span> = em_conf-&gt;tx_adapter[i].adapter_id;</div>
<div class="line">        ret = <a name="a66"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#aa3e9c8dac17672582165dc751a4298c8">rte_event_eth_tx_adapter_stop</a>(<span class="keywordtype">id</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to stop tx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; em_conf-&gt;tx_adapter[i].nb_connections; j++) {</div>
<div class="line"> </div>
<div class="line">            ret = <a name="a67"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#afab3f3ede8be6683ffc99230cc007c72">rte_event_eth_tx_adapter_queue_del</a>(<span class="keywordtype">id</span>,</div>
<div class="line">                em_conf-&gt;tx_adapter[i].conn[j].ethdev_id, -1);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                EH_LOG_ERR(</div>
<div class="line">                    <span class="stringliteral">&quot;Failed to remove tx adapter queues %d&quot;</span>,</div>
<div class="line">                    ret);</div>
<div class="line">                <span class="keywordflow">return</span> ret;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        ret = <a name="a68"></a><a class="code" href="rte__event__eth__tx__adapter_8h.html#a5371c1f3fb984fb1fa382ec21715fdee">rte_event_eth_tx_adapter_free</a>(<span class="keywordtype">id</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">            EH_LOG_ERR(<span class="stringliteral">&quot;Failed to free tx adapter %d&quot;</span>, ret);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">eh_launch_worker(<span class="keyword">struct</span> eh_conf *conf, <span class="keyword">struct</span> eh_app_worker_params *app_wrkr,</div>
<div class="line">        uint8_t nb_wrkr_param)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eh_app_worker_params *match_wrkr;</div>
<div class="line">    <span class="keyword">struct </span>eh_event_link_info *links = NULL;</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line">    uint32_t lcore_id;</div>
<div class="line">    uint8_t nb_links;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event helper configuration&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get core ID */</span></div>
<div class="line">    lcore_id = <a name="a69"></a><a class="code" href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check if this is eth core */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="rte__bitmap_8h.html#a5b89bc7e8cfb31e59604936095ba8086">rte_bitmap_get</a>(em_conf-&gt;eth_core_mask, lcore_id)) {</div>
<div class="line">        eh_start_worker_eth_core(em_conf, lcore_id);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (app_wrkr == NULL || nb_wrkr_param == 0) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid args&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * This is a regular worker thread. The application registers</span></div>
<div class="line"><span class="comment">     * multiple workers with various capabilities. Run worker</span></div>
<div class="line"><span class="comment">     * based on the selected capabilities of the event</span></div>
<div class="line"><span class="comment">     * device configured.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get the first matching worker for the event device */</span></div>
<div class="line">    match_wrkr = eh_find_worker(lcore_id, conf, app_wrkr, nb_wrkr_param);</div>
<div class="line">    <span class="keywordflow">if</span> (match_wrkr == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to match worker registered for lcore %d&quot;</span>,</div>
<div class="line">               lcore_id);</div>
<div class="line">        <span class="keywordflow">goto</span> clean_and_exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Verify sanity of the matched worker */</span></div>
<div class="line">    <span class="keywordflow">if</span> (eh_verify_match_worker(match_wrkr) != 1) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to validate the matched worker&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> clean_and_exit;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get worker links */</span></div>
<div class="line">    nb_links = eh_get_event_lcore_links(lcore_id, conf, &amp;links);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Launch the worker thread */</span></div>
<div class="line">    match_wrkr-&gt;worker_thread(links, nb_links);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Free links info memory */</span></div>
<div class="line">    free(links);</div>
<div class="line"> </div>
<div class="line">clean_and_exit:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Flag eth_cores to stop, if started */</span></div>
<div class="line">    eh_stop_worker_eth_core();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">uint8_t</div>
<div class="line">eh_get_tx_queue(<span class="keyword">struct</span> eh_conf *conf, uint8_t eventdev_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>eventdev_params *eventdev_config;</div>
<div class="line">    <span class="keyword">struct </span>eventmode_conf *em_conf;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event helper configuration&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (conf-&gt;mode_params == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Invalid event mode parameters&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get eventmode conf */</span></div>
<div class="line">    em_conf = conf-&gt;mode_params;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get event device conf */</span></div>
<div class="line">    eventdev_config = eh_get_eventdev_params(em_conf, eventdev_id);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (eventdev_config == NULL) {</div>
<div class="line">        EH_LOG_ERR(<span class="stringliteral">&quot;Failed to read eventdev config&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * The last queue is reserved to be used as atomic queue for the</span></div>
<div class="line"><span class="comment">     * last stage (eth packet tx stage)</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">return</span> eventdev_config-&gt;nb_eventqueue - 1;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
<div class="ttc" id="arte__eventdev_8h_html_ad147297659da4017ff8a8cec1757548c"><div class="ttname"><a href="rte__eventdev_8h.html#ad147297659da4017ff8a8cec1757548c">rte_event_eth_tx_adapter_caps_get</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_caps_get(uint8_t dev_id, uint16_t eth_port_id, uint32_t *caps)</div></div>
<div class="ttc" id="arte__malloc_8h_html_aaf0f048a5fd1672688c662cdfb4536b3"><div class="ttname"><a href="rte__malloc_8h.html#aaf0f048a5fd1672688c662cdfb4536b3">rte_zmalloc</a></div><div class="ttdeci">void * rte_zmalloc(const char *type, size_t size, unsigned align) __rte_alloc_size(2)</div></div>
<div class="ttc" id="arte__bitmap_8h_html_a62cb3ed982d94c948669352dbe50545f"><div class="ttname"><a href="rte__bitmap_8h.html#a62cb3ed982d94c948669352dbe50545f">rte_bitmap_get_memory_footprint</a></div><div class="ttdeci">static uint32_t rte_bitmap_get_memory_footprint(uint32_t n_bits)</div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00148">rte_bitmap.h:148</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a644f6cc4ab24a5c07bfff9b0f5c42e8e"><div class="ttname"><a href="rte__eventdev_8h.html#a644f6cc4ab24a5c07bfff9b0f5c42e8e">rte_event_dev_stop</a></div><div class="ttdeci">void rte_event_dev_stop(uint8_t dev_id)</div></div>
<div class="ttc" id="arte__malloc_8h_html"><div class="ttname"><a href="rte__malloc_8h.html">rte_malloc.h</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_ae73dea5fd8835b2e3f30ae3ab91771ba"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#ae73dea5fd8835b2e3f30ae3ab91771ba">rte_event_eth_rx_adapter_free</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_free(uint8_t id)</div></div>
<div class="ttc" id="astructrte__event__dev__info_html"><div class="ttname"><a href="structrte__event__dev__info.html">rte_event_dev_info</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00356">rte_eventdev.h:356</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html">rte_event_eth_tx_adapter.h</a></div></div>
<div class="ttc" id="arte__bitmap_8h_html_acb51f3acdb709b19c9ca94a08bfdec50"><div class="ttname"><a href="rte__bitmap_8h.html#acb51f3acdb709b19c9ca94a08bfdec50">rte_bitmap_reset</a></div><div class="ttdeci">static void rte_bitmap_reset(struct rte_bitmap *bmp)</div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00317">rte_bitmap.h:317</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a6b417a1b2250685f2b583aa30a259241"><div class="ttname"><a href="rte__eventdev_8h.html#a6b417a1b2250685f2b583aa30a259241">RTE_EVENT_QUEUE_CFG_ALL_TYPES</a></div><div class="ttdeci">#define RTE_EVENT_QUEUE_CFG_ALL_TYPES</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00554">rte_eventdev.h:549</a></div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a5371c1f3fb984fb1fa382ec21715fdee"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a5371c1f3fb984fb1fa382ec21715fdee">rte_event_eth_tx_adapter_free</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_free(uint8_t id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ae5a711c45b3d3f125069b1a7cb731435"><div class="ttname"><a href="rte__eventdev_8h.html#ae5a711c45b3d3f125069b1a7cb731435">RTE_EVENT_TYPE_ETHDEV</a></div><div class="ttdeci">#define RTE_EVENT_TYPE_ETHDEV</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00978">rte_eventdev.h:977</a></div></div>
<div class="ttc" id="arte__lcore_8h_html_a034c95b6412f09e8de11d430267dc1ba"><div class="ttname"><a href="rte__lcore_8h.html#a034c95b6412f09e8de11d430267dc1ba">RTE_LCORE_FOREACH</a></div><div class="ttdeci">#define RTE_LCORE_FOREACH(i)</div><div class="ttdef"><b>Definition:</b> <a href="rte__lcore_8h_source.html#l00231">rte_lcore.h:231</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a681d527bfc9067a30c4dbdc4db527651"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a681d527bfc9067a30c4dbdc4db527651">rte_event_eth_rx_adapter_start</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_start(uint8_t id)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html">rte_event_eth_rx_adapter.h</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a5bd7355a0be9b94bbca0f32796e57358"><div class="ttname"><a href="rte__eventdev_8h.html#a5bd7355a0be9b94bbca0f32796e57358">rte_event_dev_info_get</a></div><div class="ttdeci">int rte_event_dev_info_get(uint8_t dev_id, struct rte_event_dev_info *dev_info)</div></div>
<div class="ttc" id="astructrte__event_html_a45def65890de0da17bc0d6e2ca2b3a9f"><div class="ttname"><a href="structrte__event.html#a45def65890de0da17bc0d6e2ca2b3a9f">rte_event::event_type</a></div><div class="ttdeci">uint32_t event_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01060">rte_eventdev.h:1060</a></div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_ada2bfd939bbb6bd6e9f64c95f81d851e"><div class="ttname"><a href="structrte__event__queue__conf.html#ada2bfd939bbb6bd6e9f64c95f81d851e">rte_event_queue_conf::schedule_type</a></div><div class="ttdeci">uint8_t schedule_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00587">rte_eventdev.h:587</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a57a1db34b6c7bb2b05a5db7aab8c6834"><div class="ttname"><a href="rte__eventdev_8h.html#a57a1db34b6c7bb2b05a5db7aab8c6834">rte_event_queue_setup</a></div><div class="ttdeci">int rte_event_queue_setup(uint8_t dev_id, uint8_t queue_id, const struct rte_event_queue_conf *queue_conf)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_aa3e9c8dac17672582165dc751a4298c8"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#aa3e9c8dac17672582165dc751a4298c8">rte_event_eth_tx_adapter_stop</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_stop(uint8_t id)</div></div>
<div class="ttc" id="astructrte__event__dev__info_html_a7541b911a3ef8464385d350088c94057"><div class="ttname"><a href="structrte__event__dev__info.html#a7541b911a3ef8464385d350088c94057">rte_event_dev_info::max_num_events</a></div><div class="ttdeci">int32_t max_num_events</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00393">rte_eventdev.h:393</a></div></div>
<div class="ttc" id="arte__lcore_8h_html_acab656f5b00c29090db4500efabedd98"><div class="ttname"><a href="rte__lcore_8h.html#acab656f5b00c29090db4500efabedd98">rte_get_next_lcore</a></div><div class="ttdeci">unsigned int rte_get_next_lcore(unsigned int i, int skip_main, int wrap)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a7151d87dc659b829aa4d752e566a97c6"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a7151d87dc659b829aa4d752e566a97c6">rte_event_eth_tx_adapter_queue_add</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_queue_add(uint8_t id, uint16_t eth_dev_id, int32_t queue)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_ab717883885cffa68e2fff3525f2ff1ad"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#ab717883885cffa68e2fff3525f2ff1ad">rte_event_eth_rx_adapter_create</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_create(uint8_t id, uint8_t dev_id, struct rte_event_port_conf *port_config)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ae64cc76b136d54ca0c86332ed3723b15"><div class="ttname"><a href="rte__eventdev_8h.html#ae64cc76b136d54ca0c86332ed3723b15">RTE_EVENT_DEV_CAP_BURST_MODE</a></div><div class="ttdeci">#define RTE_EVENT_DEV_CAP_BURST_MODE</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00260">rte_eventdev.h:253</a></div></div>
<div class="ttc" id="arte__bitmap_8h_html"><div class="ttname"><a href="rte__bitmap_8h.html">rte_bitmap.h</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a3210d6c792e04a719d8cdf12c0fce224"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a3210d6c792e04a719d8cdf12c0fce224">rte_event_eth_rx_adapter_service_id_get</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_service_id_get(uint8_t id, uint32_t *service_id)</div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_ab061192ba3b603710c4a05dd56ca6fb1"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#ab061192ba3b603710c4a05dd56ca6fb1">rte_event_eth_rx_adapter_queue_del</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_queue_del(uint8_t id, uint16_t eth_dev_id, int32_t rx_queue_id)</div></div>
<div class="ttc" id="astructrte__event__eth__rx__adapter__queue__conf_html"><div class="ttname"><a href="structrte__event__eth__rx__adapter__queue__conf.html">rte_event_eth_rx_adapter_queue_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__rx__adapter_8h_source.html#l00141">rte_event_eth_rx_adapter.h:141</a></div></div>
<div class="ttc" id="arte__lcore_8h_html_a1728dc7f14571ba778d3b5b41aa09283"><div class="ttname"><a href="rte__lcore_8h.html#a1728dc7f14571ba778d3b5b41aa09283">rte_lcore_count</a></div><div class="ttdeci">unsigned int rte_lcore_count(void)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a27f0abd90e6784a4dc1c4f07ece2715a"><div class="ttname"><a href="rte__eventdev_8h.html#a27f0abd90e6784a4dc1c4f07ece2715a">rte_event_port_link</a></div><div class="ttdeci">int rte_event_port_link(uint8_t dev_id, uint8_t port_id, const uint8_t queues[], const uint8_t priorities[], uint16_t nb_links)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_ac087670e6e885abcdf046c8e74844cd4"><div class="ttname"><a href="rte__eventdev_8h.html#ac087670e6e885abcdf046c8e74844cd4">rte_event_port_setup</a></div><div class="ttdeci">int rte_event_port_setup(uint8_t dev_id, uint8_t port_id, const struct rte_event_port_conf *port_conf)</div></div>
<div class="ttc" id="astructrte__event_html_a7c048c65cf7361ad984ca61d1d9f5b3b"><div class="ttname"><a href="structrte__event.html#a7c048c65cf7361ad984ca61d1d9f5b3b">rte_event::queue_id</a></div><div class="ttdeci">uint8_t queue_id</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01077">rte_eventdev.h:1077</a></div></div>
<div class="ttc" id="arte__service_8h_html_ac98cd1ba6bee29d631cfd293c0872b77"><div class="ttname"><a href="rte__service_8h.html#ac98cd1ba6bee29d631cfd293c0872b77">rte_service_set_runstate_mapped_check</a></div><div class="ttdeci">int32_t rte_service_set_runstate_mapped_check(uint32_t id, int32_t enable)</div></div>
<div class="ttc" id="arte__lcore_8h_html_adfb2b334e7e73f534f25e8888a8a775f"><div class="ttname"><a href="rte__lcore_8h.html#adfb2b334e7e73f534f25e8888a8a775f">rte_lcore_id</a></div><div class="ttdeci">static unsigned rte_lcore_id(void)</div><div class="ttdef"><b>Definition:</b> <a href="rte__lcore_8h_source.html#l00075">rte_lcore.h:75</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_abe12d7b973444febfd97570d7f3f69d8"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#abe12d7b973444febfd97570d7f3f69d8">rte_event_eth_rx_adapter_queue_add</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_queue_add(uint8_t id, uint16_t eth_dev_id, int32_t rx_queue_id, const struct rte_event_eth_rx_adapter_queue_conf *conf)</div></div>
<div class="ttc" id="arte__bitmap_8h_html_ad8be0de2db024794045b9fe74adb4678"><div class="ttname"><a href="rte__bitmap_8h.html#ad8be0de2db024794045b9fe74adb4678">rte_bitmap_init</a></div><div class="ttdeci">static struct rte_bitmap * rte_bitmap_init(uint32_t n_bits, uint8_t *mem, uint32_t mem_size)</div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00170">rte_bitmap.h:170</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_afdc834c1c52e9fb512301990468ca7c2"><div class="ttname"><a href="rte__ethdev_8h.html#afdc834c1c52e9fb512301990468ca7c2">rte_eth_dev_start</a></div><div class="ttdeci">int rte_eth_dev_start(uint16_t port_id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a6541eb8822285c7b77455636201d5134"><div class="ttname"><a href="rte__eventdev_8h.html#a6541eb8822285c7b77455636201d5134">rte_event_dev_count</a></div><div class="ttdeci">uint8_t rte_event_dev_count(void)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_afab3f3ede8be6683ffc99230cc007c72"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#afab3f3ede8be6683ffc99230cc007c72">rte_event_eth_tx_adapter_queue_del</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_queue_del(uint8_t id, uint16_t eth_dev_id, int32_t queue)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a3b6c6cbdc5b9091cc561ab38983be324"><div class="ttname"><a href="rte__eventdev_8h.html#a3b6c6cbdc5b9091cc561ab38983be324">RTE_EVENT_ETH_TX_ADAPTER_CAP_INTERNAL_PORT</a></div><div class="ttdeci">#define RTE_EVENT_ETH_TX_ADAPTER_CAP_INTERNAL_PORT</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01225">rte_eventdev.h:1223</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_a9ab708089665bebcd65cefe5383b24f2"><div class="ttname"><a href="rte__ethdev_8h.html#a9ab708089665bebcd65cefe5383b24f2">rte_eth_dev_count_avail</a></div><div class="ttdeci">uint16_t rte_eth_dev_count_avail(void)</div></div>
<div class="ttc" id="arte__bitmap_8h_html_a5b89bc7e8cfb31e59604936095ba8086"><div class="ttname"><a href="rte__bitmap_8h.html#a5b89bc7e8cfb31e59604936095ba8086">rte_bitmap_get</a></div><div class="ttdeci">static uint64_t rte_bitmap_get(struct rte_bitmap *bmp, uint32_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00356">rte_bitmap.h:356</a></div></div>
<div class="ttc" id="astructrte__bitmap_html"><div class="ttname"><a href="structrte__bitmap.html">rte_bitmap</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00061">rte_bitmap.h:61</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_ab6e99f06a45adaa095b257b93ebaf201"><div class="ttname"><a href="rte__eventdev_8h.html#ab6e99f06a45adaa095b257b93ebaf201">rte_event_dev_start</a></div><div class="ttdeci">int rte_event_dev_start(uint8_t dev_id)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a074f50a48d57c8c6a7785032d2482713"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a074f50a48d57c8c6a7785032d2482713">rte_event_eth_tx_adapter_service_id_get</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_service_id_get(uint8_t id, uint32_t *service_id)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a5edd34a4114d6a3fda57c5eca9dc745f"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a5edd34a4114d6a3fda57c5eca9dc745f">rte_event_eth_tx_adapter_create</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_create(uint8_t id, uint8_t dev_id, struct rte_event_port_conf *port_config)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_af75a5ef694d67cc0653942d7b2bb6b78"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#af75a5ef694d67cc0653942d7b2bb6b78">rte_event_eth_tx_adapter_start</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_start(uint8_t id)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_a8bb3902202de82dc39d640ea3e402f45"><div class="ttname"><a href="structrte__event__queue__conf.html#a8bb3902202de82dc39d640ea3e402f45">rte_event_queue_conf::event_queue_cfg</a></div><div class="ttdeci">uint32_t event_queue_cfg</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00585">rte_eventdev.h:585</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a3c199a28e97411266a069bd07c9757fa"><div class="ttname"><a href="rte__eventdev_8h.html#a3c199a28e97411266a069bd07c9757fa">RTE_SCHED_TYPE_ATOMIC</a></div><div class="ttdeci">#define RTE_SCHED_TYPE_ATOMIC</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00961">rte_eventdev.h:944</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_af70f4ed704d89a4ffce3b4c105bac076"><div class="ttname"><a href="rte__eventdev_8h.html#af70f4ed704d89a4ffce3b4c105bac076">rte_event_dev_close</a></div><div class="ttdeci">int rte_event_dev_close(uint8_t dev_id)</div></div>
<div class="ttc" id="arte__event__eth__tx__adapter_8h_html_a101b698421cb33e16e661674e3892df6"><div class="ttname"><a href="rte__event__eth__tx__adapter_8h.html#a101b698421cb33e16e661674e3892df6">rte_event_eth_tx_adapter_event_port_get</a></div><div class="ttdeci">int rte_event_eth_tx_adapter_event_port_get(uint8_t id, uint8_t *event_port_id)</div></div>
<div class="ttc" id="arte__ethdev_8h_html"><div class="ttname"><a href="rte__ethdev_8h.html">rte_ethdev.h</a></div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_a80ea063aa02ba47244c9a40c444c27f4"><div class="ttname"><a href="structrte__event__queue__conf.html#a80ea063aa02ba47244c9a40c444c27f4">rte_event_queue_conf::nb_atomic_flows</a></div><div class="ttdeci">uint32_t nb_atomic_flows</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00563">rte_eventdev.h:563</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_af1e7d0094442b3a158e89f120a21687d"><div class="ttname"><a href="rte__eventdev_8h.html#af1e7d0094442b3a158e89f120a21687d">rte_event_dev_configure</a></div><div class="ttdeci">int rte_event_dev_configure(uint8_t dev_id, const struct rte_event_dev_config *dev_conf)</div></div>
<div class="ttc" id="arte__ethdev_8h_html_a6fc010cf6216331c50bc02d2fd4e614f"><div class="ttname"><a href="rte__ethdev_8h.html#a6fc010cf6216331c50bc02d2fd4e614f">rte_eth_dev_stop</a></div><div class="ttdeci">int rte_eth_dev_stop(uint16_t port_id)</div></div>
<div class="ttc" id="arte__eventdev_8h_html_a0938b6c89c22b3de3ee9e8bfa1da2ae7"><div class="ttname"><a href="rte__eventdev_8h.html#a0938b6c89c22b3de3ee9e8bfa1da2ae7">RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</a></div><div class="ttdeci">#define RTE_EVENT_ETH_RX_ADAPTER_CAP_INTERNAL_PORT</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01118">rte_eventdev.h:1115</a></div></div>
<div class="ttc" id="astructrte__event__eth__rx__adapter__queue__conf_html_ace15ae1b604b29456e25bfb3f73fbc8a"><div class="ttname"><a href="structrte__event__eth__rx__adapter__queue__conf.html#ace15ae1b604b29456e25bfb3f73fbc8a">rte_event_eth_rx_adapter_queue_conf::ev</a></div><div class="ttdeci">struct rte_event ev</div><div class="ttdef"><b>Definition:</b> <a href="rte__event__eth__rx__adapter_8h_source.html#l00146">rte_event_eth_rx_adapter.h:153</a></div></div>
<div class="ttc" id="arte__event__eth__rx__adapter_8h_html_a7f450da6c7dc2404adcfb86ab16b3aa1"><div class="ttname"><a href="rte__event__eth__rx__adapter_8h.html#a7f450da6c7dc2404adcfb86ab16b3aa1">rte_event_eth_rx_adapter_stop</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_stop(uint8_t id)</div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a70bebdfb5211f97b81b46ff08594ddda"><div class="ttname"><a href="structrte__event__port__conf.html#a70bebdfb5211f97b81b46ff08594ddda">rte_event_port_conf::new_event_threshold</a></div><div class="ttdeci">int32_t new_event_threshold</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00713">rte_eventdev.h:713</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_ad8dad9f41edf100e192e5610b2f078d5"><div class="ttname"><a href="rte__eventdev_8h.html#ad8dad9f41edf100e192e5610b2f078d5">rte_event_port_unlink</a></div><div class="ttdeci">int rte_event_port_unlink(uint8_t dev_id, uint8_t port_id, uint8_t queues[], uint16_t nb_unlinks)</div></div>
<div class="ttc" id="arte__bitmap_8h_html_afee8d22bec7a960a4a4870cbb5ea2086"><div class="ttname"><a href="rte__bitmap_8h.html#afee8d22bec7a960a4a4870cbb5ea2086">rte_bitmap_set</a></div><div class="ttdeci">static void rte_bitmap_set(struct rte_bitmap *bmp, uint32_t pos)</div><div class="ttdef"><b>Definition:</b> <a href="rte__bitmap_8h_source.html#l00376">rte_bitmap.h:376</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html_a56aa49dc89eb44d2e35bd72bd809db17"><div class="ttname"><a href="rte__eventdev_8h.html#a56aa49dc89eb44d2e35bd72bd809db17">rte_event_eth_rx_adapter_caps_get</a></div><div class="ttdeci">int rte_event_eth_rx_adapter_caps_get(uint8_t dev_id, uint16_t eth_port_id, uint32_t *caps)</div></div>
<div class="ttc" id="astructrte__event__dev__config_html"><div class="ttname"><a href="structrte__event__dev__config.html">rte_event_dev_config</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00463">rte_eventdev.h:463</a></div></div>
<div class="ttc" id="arte__ethdev_8h_html_ad7b46c67203d37fe3a34f11076d970d6"><div class="ttname"><a href="rte__ethdev_8h.html#ad7b46c67203d37fe3a34f11076d970d6">RTE_ETH_FOREACH_DEV</a></div><div class="ttdeci">#define RTE_ETH_FOREACH_DEV(p)</div><div class="ttdef"><b>Definition:</b> <a href="rte__ethdev_8h_source.html#l01858">rte_ethdev.h:1858</a></div></div>
<div class="ttc" id="arte__service_8h_html_a198cc1b4dfbcbdec9d78d5986bd8b5da"><div class="ttname"><a href="rte__service_8h.html#a198cc1b4dfbcbdec9d78d5986bd8b5da">rte_service_run_iter_on_app_lcore</a></div><div class="ttdeci">int32_t rte_service_run_iter_on_app_lcore(uint32_t id, uint32_t serialize_multithread_unsafe)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html_aa69943329289462766974a416c5d34fb"><div class="ttname"><a href="structrte__event__queue__conf.html#aa69943329289462766974a416c5d34fb">rte_event_queue_conf::nb_atomic_order_sequences</a></div><div class="ttdeci">uint32_t nb_atomic_order_sequences</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00571">rte_eventdev.h:571</a></div></div>
<div class="ttc" id="arte__malloc_8h_html_a1fc82f67711b13aca7e05dc9d58f9dbd"><div class="ttname"><a href="rte__malloc_8h.html#a1fc82f67711b13aca7e05dc9d58f9dbd">rte_free</a></div><div class="ttdeci">void void rte_free(void *ptr)</div></div>
<div class="ttc" id="astructrte__event__queue__conf_html"><div class="ttname"><a href="structrte__event__queue__conf.html">rte_event_queue_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00562">rte_eventdev.h:562</a></div></div>
<div class="ttc" id="astructrte__event__dev__info_html_a01a4cc1d02df9da2accef27efb5f1eff"><div class="ttname"><a href="structrte__event__dev__info.html#a01a4cc1d02df9da2accef27efb5f1eff">rte_event_dev_info::max_event_port_enqueue_depth</a></div><div class="ttdeci">uint32_t max_event_port_enqueue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00384">rte_eventdev.h:384</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a97bc90e0843c1a5dad5e417f4443788e"><div class="ttname"><a href="structrte__event__port__conf.html#a97bc90e0843c1a5dad5e417f4443788e">rte_event_port_conf::dequeue_depth</a></div><div class="ttdeci">uint16_t dequeue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00726">rte_eventdev.h:726</a></div></div>
<div class="ttc" id="astructrte__event__dev__info_html_a5ecd256765c6af26808cb8abaeeabe25"><div class="ttname"><a href="structrte__event__dev__info.html#a5ecd256765c6af26808cb8abaeeabe25">rte_event_dev_info::max_event_port_dequeue_depth</a></div><div class="ttdeci">uint8_t max_event_port_dequeue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00379">rte_eventdev.h:379</a></div></div>
<div class="ttc" id="arte__eventdev_8h_html"><div class="ttname"><a href="rte__eventdev_8h.html">rte_eventdev.h</a></div></div>
<div class="ttc" id="astructrte__event_html_a86ef5882fb17753ee8501713dade7347"><div class="ttname"><a href="structrte__event.html#a86ef5882fb17753ee8501713dade7347">rte_event::sched_type</a></div><div class="ttdeci">uint8_t sched_type</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l01072">rte_eventdev.h:1072</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html_a0d769782a0685a51977a7e98e751b4dc"><div class="ttname"><a href="structrte__event__port__conf.html#a0d769782a0685a51977a7e98e751b4dc">rte_event_port_conf::enqueue_depth</a></div><div class="ttdeci">uint16_t enqueue_depth</div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00732">rte_eventdev.h:732</a></div></div>
<div class="ttc" id="astructrte__event__port__conf_html"><div class="ttname"><a href="structrte__event__port__conf.html">rte_event_port_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="rte__eventdev_8h_source.html#l00712">rte_eventdev.h:712</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
