

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3. IFPGA Rawdev Driver &mdash; Data Plane Development Kit 20.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. IOAT Rawdev Driver" href="ioat.html" />
    <link rel="prev" title="2. NXP DPAA2 QDMA Driver" href="dpaa2_qdma.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Data Plane Development Kit
          

          
            
            <img src="../_static/DPDK_logo_vertical_rev_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                20.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../linux_gsg/index.html">Getting Started Guide for Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd_gsg/index.html">Getting Started Guide for FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows_gsg/index.html">Getting Started Guide for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sample_app_ug/index.html">Sample Applications User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog_guide/index.html">Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">HowTo Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">DPDK Tools User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testpmd_app_ug/index.html">Testpmd Application User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nics/index.html">Network Interface Controller Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bbdevs/index.html">Baseband Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cryptodevs/index.html">Crypto Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compressdevs/index.html">Compression Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vdpadevs/index.html">vDPA Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regexdevs/index.html">REGEX Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventdevs/index.html">Event Device Drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rawdev Drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dpaa2_cmdif.html">1. NXP DPAA2 CMDIF Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpaa2_qdma.html">2. NXP DPAA2 QDMA Driver</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. IFPGA Rawdev Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implementation-details">3.1. Implementation details</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-time-parameters">3.2. Run-time parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioat.html">4. IOAT Rawdev Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntb.html">5. NTB Rawdev Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="octeontx2_dma.html">6. OCTEON TX2 DMA Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="octeontx2_ep.html">7. Marvell OCTEON TX2 End Point Rawdev Driver</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mempool/index.html">Mempool Device Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">Platform Specific Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributor’s Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rel_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Data Plane Development Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Rawdev Drivers</a> &raquo;</li>
        
      <li><span class="section-number">3. </span>IFPGA Rawdev Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/rawdevs/ifpga.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ifpga-rawdev-driver">
<h1><span class="section-number">3. </span>IFPGA Rawdev Driver</h1>
<p>FPGA is used more and more widely in Cloud and NFV, one primary reason is
that FPGA not only provides ASIC performance but also it’s more flexible
than ASIC.</p>
<p>FPGA uses Partial Reconfigure (PR) Parts of Bit Stream to achieve its
flexibility. That means one FPGA Device Bit Stream is divided into many Parts
of Bit Stream(each Part of Bit Stream is defined as AFU-Accelerated Function
Unit), and each AFU is a hardware acceleration unit which can be dynamically
reloaded respectively.</p>
<p>By PR (Partial Reconfiguration) AFUs, one FPGA resources can be time-shared by
different users. FPGA hot upgrade and fault tolerance can be provided easily.</p>
<p>The SW IFPGA Rawdev Driver (<strong>ifpga_rawdev</strong>) provides a Rawdev driver
that utilizes Intel FPGA Software Stack OPAE(Open Programmable Acceleration
Engine) for FPGA management.</p>
<div class="section" id="implementation-details">
<h2><span class="section-number">3.1. </span>Implementation details</h2>
<p>Each instance of IFPGA Rawdev Driver is probed by Intel FpgaDev. In coordination
with OPAE share code IFPGA Rawdev Driver provides common FPGA management ops
for FPGA operation, OPAE provides all following operations:
- FPGA PR (Partial Reconfiguration) management
- FPGA AFUs Identifying
- FPGA Thermal Management
- FPGA Power Management
- FPGA Performance reporting
- FPGA Remote Debug</p>
<p>All configuration parameters are taken by vdev_ifpga_cfg driver. Besides
configuration, vdev_ifpga_cfg driver also hot plugs in IFPGA Bus.</p>
<p>All of the AFUs of one FPGA may share same PCI BDF and AFUs scan depend on
IFPGA Rawdev Driver so IFPGA Bus takes AFU device scan and AFU drivers probe.
All AFU device driver bind to AFU device by its UUID (Universally Unique
Identifier).</p>
<p>To avoid unnecessary code duplication and ensure maximum performance,
handling of AFU devices is left to different PMDs; all the design as
summarized by the following block diagram:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+---------------------------------------------------------------+
|                       Application(s)                          |
+----------------------------.----------------------------------+
                             |
                             |
+----------------------------&#39;----------------------------------+
|                    DPDK Framework (APIs)                      |
+----------|------------|--------.---------------------|--------+
          /              \                             |
         /                \                            |
+-------&#39;-------+  +-------&#39;-------+          +--------&#39;--------+
|    Eth PMD    |  |   Crypto PMD  |          |                 |
+-------.-------+  +-------.-------+          |                 |
        |                  |                  |                 |
        |                  |                  |                 |
+-------&#39;-------+  +-------&#39;-------+          |      IFPGA      |
|  Eth AFU Dev  |  |Crypto AFU Dev |          |  Rawdev Driver  |
+-------.-------+  +-------.-------+          |(OPAE Share Code)|
        |                  |                  |                 |
        |                  |          Rawdev  |                 |
+-------&#39;------------------&#39;-------+    Ops   |                 |
|              IFPGA Bus           | --------&gt;|                 |
+-----------------.----------------+          +--------.--------+
                  |                                    |
    Hot-plugin --&gt;|                                    |
                  |                                    |
+-----------------&#39;------------------+        +--------&#39;--------+
|        vdev_ifpga_cfg driver       |        |  Intel FpgaDev  |
+------------------------------------+        +-----------------+
</pre></div>
</div>
</div>
<div class="section" id="run-time-parameters">
<h2><span class="section-number">3.2. </span>Run-time parameters</h2>
<p>This driver is invoked automatically in systems added with Intel FPGA,
but PR and IFPGA Bus scan is triggered by command line using
<code class="docutils literal notranslate"><span class="pre">--vdev</span> <span class="pre">'ifpga_rawdev_cfg</span></code> EAL option.</p>
<p>The following device parameters are supported:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ifpga</span></code> [string]</p>
<p>Provide a specific Intel FPGA device PCI BDF. Can be provided multiple
times for additional instances.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code> [int]</p>
<p>Each FPGA can provide many channels to PR AFU by software, each channels
is identified by this parameter.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">afu_bts</span></code> [string]</p>
<p>If null, the AFU Bit Stream has been PR in FPGA, if not forces PR and
identifies AFU Bit Stream file.</p>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ioat.html" class="btn btn-neutral float-right" title="4. IOAT Rawdev Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="dpaa2_qdma.html" class="btn btn-neutral float-left" title="2. NXP DPAA2 QDMA Driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>