

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>43. PFE Poll Mode Driver &mdash; Data Plane Development Kit 20.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="44. QEDE Poll Mode Driver" href="qede.html" />
    <link rel="prev" title="42. OCTEON TX2 Poll Mode driver" href="octeontx2.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Data Plane Development Kit
          

          
            
            <img src="../_static/DPDK_logo_vertical_rev_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                20.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../linux_gsg/index.html">Getting Started Guide for Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd_gsg/index.html">Getting Started Guide for FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows_gsg/index.html">Getting Started Guide for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sample_app_ug/index.html">Sample Applications User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog_guide/index.html">Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">HowTo Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">DPDK Tools User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testpmd_app_ug/index.html">Testpmd Application User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Network Interface Controller Drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">1. Overview of Networking Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html">2. Features Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="build_and_test.html">3. Compiling and testing a PMD for a NIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="af_packet.html">4. AF_PACKET Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="af_xdp.html">5. AF_XDP Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ark.html">6. ARK Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="atlantic.html">7. Aquantia Atlantic DPDK Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="avp.html">8. AVP Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="axgbe.html">9. AXGBE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="bnx2x.html">10. BNX2X Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="bnxt.html">11. BNXT Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="cxgbe.html">12. CXGBE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpaa.html">13. DPAA Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dpaa2.html">14. DPAA2 Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="e1000em.html">15. Driver for VM Emulated Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="ena.html">16. ENA Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="enetc.html">17. ENETC Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="enic.html">18. ENIC Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="fm10k.html">19. FM10K Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="hinic.html">20. HINIC Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="hns3.html">21. HNS3 Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="i40e.html">22. I40E Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ice.html">23. ICE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="igb.html">24. IGB Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="igc.html">25. IGC Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ionic.html">26. IONIC Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipn3ke.html">27. IPN3KE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="ixgbe.html">28. IXGBE Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="intel_vf.html">29. Intel Virtual Function Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="kni.html">30. KNI Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="liquidio.html">31. LiquidIO VF Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="memif.html">32. Memif Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlx4.html">33. MLX4 poll mode driver library</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlx5.html">34. MLX5 poll mode driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvneta.html">35. MVNETA Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvpp2.html">36. MVPP2 Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="netvsc.html">37. Netvsc poll mode driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="nfb.html">38. NFB poll mode driver library</a></li>
<li class="toctree-l2"><a class="reference internal" href="nfp.html">39. NFP poll mode driver library</a></li>
<li class="toctree-l2"><a class="reference internal" href="null.html">40. NULL Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="octeontx.html">41. OCTEON TX Poll Mode driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="octeontx2.html">42. OCTEON TX2 Poll Mode driver</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">43. PFE Poll Mode Driver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pfe">43.1. PFE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pfe-overview">43.1.1. PFE Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pfe-features">43.1.2. PFE Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-pfe-socs">43.1.3. Supported PFE SoCs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">43.1.4. Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#driver-compilation-and-testing">43.1.5. Driver compilation and testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">43.1.6. Limitations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qede.html">44. QEDE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="sfc_efx.html">45. Solarflare libefx-based Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="softnic.html">46. Soft NIC Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="szedata2.html">47. SZEDATA2 poll mode driver library</a></li>
<li class="toctree-l2"><a class="reference internal" href="tap.html">48. Tun|Tap Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="thunderx.html">49. ThunderX NICVF Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="txgbe.html">50. TXGBE Poll Mode Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdev_netvsc.html">51. VDEV_NETVSC driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtio.html">52. Poll Mode Driver for Emulated Virtio NIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="vhost.html">53. Poll Mode Driver that wraps vhost library</a></li>
<li class="toctree-l2"><a class="reference internal" href="vmxnet3.html">54. Poll Mode Driver for Paravirtual VMXNET3 NIC</a></li>
<li class="toctree-l2"><a class="reference internal" href="pcap_ring.html">55. Libpcap and Ring Based Poll Mode Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="fail_safe.html">56. Fail-safe poll mode driver library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bbdevs/index.html">Baseband Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cryptodevs/index.html">Crypto Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compressdevs/index.html">Compression Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vdpadevs/index.html">vDPA Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regexdevs/index.html">REGEX Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventdevs/index.html">Event Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rawdevs/index.html">Rawdev Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mempool/index.html">Mempool Device Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">Platform Specific Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributor’s Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rel_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Data Plane Development Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Network Interface Controller Drivers</a> &raquo;</li>
        
      <li><span class="section-number">43. </span>PFE Poll Mode Driver</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/nics/pfe.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pfe-poll-mode-driver">
<h1><span class="section-number">43. </span>PFE Poll Mode Driver</h1>
<p>The PFE NIC PMD (<strong>librte_net_pfe</strong>) provides poll mode driver
support for the inbuilt NIC found in the <strong>NXP LS1012</strong> SoC.</p>
<p>More information can be found at <a class="reference external" href="https://nxp.com/ls1012a">NXP Official Website</a>.</p>
<div class="section" id="pfe">
<h2><span class="section-number">43.1. </span>PFE</h2>
<p>This section provides an overview of the NXP PFE
and how it is integrated into the DPDK.</p>
<p>Contents summary</p>
<ul class="simple">
<li><p>PFE overview</p></li>
<li><p>PFE features</p></li>
<li><p>Supported PFE SoCs</p></li>
<li><p>Prerequisites</p></li>
<li><p>Driver compilation and testing</p></li>
<li><p>Limitations</p></li>
</ul>
<div class="section" id="pfe-overview">
<h3><span class="section-number">43.1.1. </span>PFE Overview</h3>
<p>PFE is a hardware programmable packet forwarding engine to provide
high performance Ethernet interfaces. The diagram below shows a
system level overview of PFE:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">====================================================+===============</span>
<span class="go">US   +-----------------------------------------+    | Kernel Space</span>
<span class="go">     |                                         |    |</span>
<span class="go">     |           PFE Ethernet Driver           |    |</span>
<span class="go">     +-----------------------------------------+    |</span>
<span class="go">               ^   |          ^     |               |</span>
<span class="go">PFE         RXQ|   |TXQ    RXQ|     |TXQ            |</span>
<span class="go">PMD            |   |          |     |               |</span>
<span class="go">               |   v          |     v               |   +----------+</span>
<span class="go">            +---------+     +----------+            |   | pfe.ko   |</span>
<span class="go">            | net_pfe0|     | net_pfe1 |            |   +----------+</span>
<span class="go">            +---------+     +----------+            |</span>
<span class="go">               ^   |          ^     |               |</span>
<span class="go">            TXQ|   |RXQ    TXQ|     |RXQ            |</span>
<span class="go">               |   |          |     |               |</span>
<span class="go">               |   v          |     v               |</span>
<span class="go">              +------------------------+            |</span>
<span class="go">              |                        |            |</span>
<span class="go">              |      PFE HIF driver    |            |</span>
<span class="go">              +------------------------+            |</span>
<span class="go">                    ^         |                     |</span>
<span class="go">                 RX |      TX |                     |</span>
<span class="go">                RING|     RING|                     |</span>
<span class="go">                    |         v                     |</span>
<span class="go">                  +--------------+                  |</span>
<span class="go">                  |              |                  |</span>
<span class="go">==================|    HIF       |==================+===============</span>
<span class="go">      +-----------+              +--------------+</span>
<span class="go">      |           |              |              |        HW</span>
<span class="go">      |  PFE      +--------------+              |</span>
<span class="go">      |       +-----+                +-----+    |</span>
<span class="go">      |       | MAC |                | MAC |    |</span>
<span class="go">      |       |     |                |     |    |</span>
<span class="go">      +-------+-----+----------------+-----+----+</span>
<span class="go">              | PHY |                | PHY |</span>
<span class="go">              +-----+                +-----+</span>
</pre></div>
</div>
<p>The HIF, PFE, MAC and PHY are the hardware blocks, the pfe.ko is a kernel
module, the PFE HIF driver and the PFE ethernet driver combined represent
as DPDK PFE poll mode driver are running in the userspace.</p>
<p>The PFE hardware supports one HIF (host interface) RX ring and one TX ring
to send and receive packets through packet forwarding engine. Both network
interface traffic is multiplexed and send over HIF queue.</p>
<p>net_pfe0 and net_pfe1 are logical ethernet interfaces, created by HIF client
driver. HIF driver is responsible for send and receive packets between
host interface and these logical interfaces. PFE ethernet driver is a
hardware independent and register with the HIF client driver to transmit and
receive packets from HIF via logical interfaces.</p>
<p>pfe.ko is required for PHY initialisation and also responsible for creating
the character device “pfe_us_cdev” which will be used for interacting with
the kernel layer for link status.</p>
</div>
<div class="section" id="pfe-features">
<h3><span class="section-number">43.1.2. </span>PFE Features</h3>
<ul class="simple">
<li><p>L3/L4 checksum offload</p></li>
<li><p>Packet type parsing</p></li>
<li><p>Basic stats</p></li>
<li><p>MTU update</p></li>
<li><p>Promiscuous mode</p></li>
<li><p>Allmulticast mode</p></li>
<li><p>Link status</p></li>
<li><p>ARMv8</p></li>
</ul>
</div>
<div class="section" id="supported-pfe-socs">
<h3><span class="section-number">43.1.3. </span>Supported PFE SoCs</h3>
<ul class="simple">
<li><p>LS1012</p></li>
</ul>
</div>
<div class="section" id="prerequisites">
<h3><span class="section-number">43.1.4. </span>Prerequisites</h3>
<p>Below are some pre-requisites for executing PFE PMD on a PFE
compatible board:</p>
<ol class="arabic">
<li><p><strong>ARM 64 Tool Chain</strong></p>
<p>For example, the <a class="reference external" href="https://releases.linaro.org/components/toolchain/binaries/7.3-2018.05/aarch64-linux-gnu/gcc-linaro-7.3.1-2018.05-i686_aarch64-linux-gnu.tar.xz">*aarch64* Linaro Toolchain</a>.</p>
</li>
<li><p><strong>Linux Kernel</strong></p>
<p>It can be obtained from <a class="reference external" href="https://source.codeaurora.org/external/qoriq/qoriq-components/linux">NXP’s Github hosting</a>.</p>
</li>
<li><p><strong>Rootfile system</strong></p>
<p>Any <em>aarch64</em> supporting filesystem can be used. For example,
Ubuntu 16.04 LTS (Xenial) or 18.04 (Bionic) userland which can be obtained
from <a class="reference external" href="http://cdimage.ubuntu.com/ubuntu-base/releases/18.04/release/ubuntu-base-18.04.1-base-arm64.tar.gz">here</a>.</p>
</li>
<li><p>The ethernet device will be registered as virtual device, so pfe has dependency on
<strong>rte_bus_vdev</strong> library and it is mandatory to use <cite>–vdev</cite> with value <cite>net_pfe</cite> to
run DPDK application.</p></li>
</ol>
<p>The following dependencies are not part of DPDK and must be installed
separately:</p>
<ul>
<li><p><strong>NXP Linux LSDK</strong></p>
<p>NXP Layerscape software development kit (LSDK) includes support for family
of QorIQ® ARM-Architecture-based system on chip (SoC) processors
and corresponding boards.</p>
<p>It includes the Linux board support packages (BSPs) for NXP SoCs,
a fully operational tool chain, kernel and board specific modules.</p>
<p>LSDK and related information can be obtained from:  <a class="reference external" href="https://www.nxp.com/support/developer-resources/run-time-software/linux-software-and-development-tools/layerscape-software-development-kit:LAYERSCAPE-SDK">LSDK</a></p>
</li>
<li><p><strong>pfe kernel module</strong></p>
<p>pfe kernel module can be obtained from NXP Layerscape software development kit at
location <cite>/lib/modules/&lt;kernel version&gt;/kernel/drivers/staging/fsl_ppfe</cite> in rootfs.
Module should be loaded using below command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">insmod pfe.ko us=1</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="driver-compilation-and-testing">
<h3><span class="section-number">43.1.5. </span>Driver compilation and testing</h3>
<p>Follow instructions available in the document
<a class="reference internal" href="build_and_test.html#pmd-build-and-test"><span class="std std-ref">compiling and testing a PMD for a NIC</span></a>
to launch <strong>testpmd</strong></p>
<p>Additionally, PFE driver needs <cite>–vdev</cite> as an input with value <cite>net_pfe</cite>
to execute DPDK application. There is an optional parameter <cite>intf</cite> available
to specify port ID. PFE driver supports only two interfaces, so valid values
for <cite>intf</cite> are 0 and 1.
see the command below:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;dpdk app&gt; &lt;EAL args&gt; --vdev=&quot;net_pfe0,intf=0&quot; --vdev=&quot;net_pfe1,intf=1&quot; -- ...</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="limitations">
<h3><span class="section-number">43.1.6. </span>Limitations</h3>
<ul class="simple">
<li><p>Multi buffer pool cannot be supported.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="qede.html" class="btn btn-neutral float-right" title="44. QEDE Poll Mode Driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="octeontx2.html" class="btn btn-neutral float-left" title="42. OCTEON TX2 Poll Mode driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>