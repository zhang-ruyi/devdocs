

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7. dpdk-test-bbdev Application &mdash; Data Plane Development Kit 20.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. dpdk-test-crypto-perf Application" href="cryptoperf.html" />
    <link rel="prev" title="6. Flow Performance Tool" href="flow-perf.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Data Plane Development Kit
          

          
            
            <img src="../_static/DPDK_logo_vertical_rev_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                20.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../linux_gsg/index.html">Getting Started Guide for Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../freebsd_gsg/index.html">Getting Started Guide for FreeBSD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows_gsg/index.html">Getting Started Guide for Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sample_app_ug/index.html">Sample Applications User Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog_guide/index.html">Programmer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">HowTo Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">DPDK Tools User Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="proc_info.html">1. dpdk-procinfo Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdump.html">2. dpdk-pdump Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="pmdinfo.html">3. dpdk-pmdinfo Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="hugepages.html">4. dpdk-hugepages Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="devbind.html">5. dpdk-devbind Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow-perf.html">6. Flow Performance Tool</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7. dpdk-test-bbdev Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-application">7.1. Running the Application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#command-line-options">7.1.1. command-line Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test-cases">7.1.2. Test Cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-globbing">7.1.3. Parameter Globbing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-tests">7.2. Running Tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#all-bbdev-devices">7.2.1. All bbdev devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="#baseband-turbo-sw-device">7.2.2. baseband turbo_sw device</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bbdev-null-device">7.2.3. bbdev null device</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#test-vector-files">7.3. Test Vector files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-principles-for-test-vector-files">7.3.1. Basic principles for test vector files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#turbo-decoder-test-vectors-template">7.3.2. Turbo decoder test vectors template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#turbo-encoder-test-vectors-template">7.3.3. Turbo encoder test vectors template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ldpc-decoder-test-vectors-template">7.3.4. LDPC decoder test vectors template</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ldpc-encoder-test-vectors-template">7.3.5. LDPC encoder test vectors template</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cryptoperf.html">8. dpdk-test-crypto-perf Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="comp_perf.html">9. dpdk-test-compress-perf Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="testeventdev.html">10. dpdk-test-eventdev Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="testregex.html">11. dpdk-test-regex Tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testpmd_app_ug/index.html">Testpmd Application User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nics/index.html">Network Interface Controller Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bbdevs/index.html">Baseband Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cryptodevs/index.html">Crypto Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compressdevs/index.html">Compression Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vdpadevs/index.html">vDPA Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regexdevs/index.html">REGEX Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../eventdevs/index.html">Event Device Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rawdevs/index.html">Rawdev Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mempool/index.html">Mempool Device Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../platform/index.html">Platform Specific Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributor’s Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rel_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Data Plane Development Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">DPDK Tools User Guides</a> &raquo;</li>
        
      <li><span class="section-number">7. </span>dpdk-test-bbdev Application</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tools/testbbdev.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dpdk-test-bbdev-application">
<h1><span class="section-number">7. </span>dpdk-test-bbdev Application</h1>
<p>The <code class="docutils literal notranslate"><span class="pre">dpdk-test-bbdev</span></code> tool is a Data Plane Development Kit (DPDK) utility that
allows measuring performance parameters of PMDs available in the bbdev framework.
Tests available for execution are: latency, throughput, validation,
bler and sanity tests. Execution of tests can be customized using various
parameters passed to a python running script.</p>
<div class="section" id="running-the-application">
<h2><span class="section-number">7.1. </span>Running the Application</h2>
<p>The tool application has a number of command line options:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">test-bbdev.py [-h] [-p TESTAPP_PATH] [-e EAL_PARAMS] [-t TIMEOUT]</span>
<span class="go">                   [-c TEST_CASE [TEST_CASE ...]]</span>
<span class="go">                   [-v TEST_VECTOR [TEST_VECTOR...]] [-n NUM_OPS]</span>
<span class="go">                   [-b BURST_SIZE [BURST_SIZE ...]] [-l NUM_LCORES]</span>
<span class="go">                   [-t MAX_ITERS [MAX_ITERS ...]]</span>
<span class="go">                   [-s SNR [SNR ...]]</span>
</pre></div>
</div>
<div class="section" id="command-line-options">
<h3><span class="section-number">7.1.1. </span>command-line Options</h3>
<p>The following are the command-line options:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code></dt><dd><p>Shows help message and exit.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">TESTAPP_PATH,</span> <span class="pre">--testapp_path</span> <span class="pre">TESTAPP_PATH</span></code></dt><dd><p>Indicates the path to the bbdev test app. If not specified path is set based
on “../..” concatenated with “<em>/build/app/dpdk-test-bbdev</em>”.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">EAL_PARAMS,</span> <span class="pre">--eal_params</span> <span class="pre">EAL_PARAMS</span></code></dt><dd><p>Specifies EAL arguments which are passed to the test app. For more details,
refer to DPDK documentation at <a class="reference internal" href="../linux_gsg/linux_eal_parameters.html"><span class="doc">EAL parameters</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">TIMEOUT,</span> <span class="pre">--timeout</span> <span class="pre">TIMEOUT</span></code></dt><dd><p>Specifies timeout in seconds. If not specified timeout is set to 300 seconds.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">TEST_CASE</span> <span class="pre">[TEST_CASE</span> <span class="pre">...],</span> <span class="pre">--test_cases</span> <span class="pre">TEST_CASE</span> <span class="pre">[TEST_CASE</span> <span class="pre">...]</span></code></dt><dd><p>Defines test cases to run. If not specified all available tests are run.</p>
<p><strong>Example usage:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">./test-bbdev.py</span> <span class="pre">-c</span> <span class="pre">validation</span></code></dt><dd><p>Runs validation test suite</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">./test-bbdev.py</span> <span class="pre">-c</span> <span class="pre">latency</span> <span class="pre">throughput</span></code></dt><dd><p>Runs latency and throughput test suites</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">TEST_VECTOR</span> <span class="pre">[TEST_VECTOR</span> <span class="pre">...],</span> <span class="pre">--test_vector</span> <span class="pre">TEST_VECTOR</span> <span class="pre">[TEST_VECTOR</span> <span class="pre">...]</span></code></dt><dd><p>Specifies paths to the test vector files. If not specified path is set based
on “../..” concatenated with “<em>/app/test-bbdev/test_vectors/bbdev_null.data</em>”
and indicates default data file.</p>
<p><strong>Example usage:</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">./test-bbdev.py</span> <span class="pre">-v</span> <span class="pre">app/test-bbdev/test_vectors/turbo_dec_test1.data</span></code></dt><dd><p>Fills vector based on turbo_dec_test1.data file and runs all tests</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">./test-bbdev.py</span> <span class="pre">-v</span> <span class="pre">turbo_dec_test1.data</span> <span class="pre">turbo_enc_test2.data</span></code></dt><dd><p>The bbdev test app is executed twice. First time vector is filled based on
<em>turbo_dec_test1.data</em> file and second time based on
<em>turb_enc_test2.data</em> file. For both executions all tests are run.</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-n</span> <span class="pre">NUM_OPS,</span> <span class="pre">--num_ops</span> <span class="pre">NUM_OPS</span></code></dt><dd><p>Specifies number of operations to process on device. If not specified num_ops
is set to 32 operations.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">NUM_LCORES,</span> <span class="pre">--num_lcores</span> <span class="pre">NUM_LCORES</span></code></dt><dd><p>Specifies number of lcores to run. If not specified num_lcores is set
according to value from RTE configuration (EAL coremask)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-b</span> <span class="pre">BURST_SIZE</span> <span class="pre">[BURST_SIZE</span> <span class="pre">...],</span> <span class="pre">--burst-size</span> <span class="pre">BURST_SIZE</span> <span class="pre">[BURST_SIZE</span> <span class="pre">...]</span></code></dt><dd><p>Specifies operations enqueue/dequeue burst size. If not specified burst_size is
set to 32. Maximum is 512.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">MAX_ITERS</span> <span class="pre">[MAX_ITERS</span> <span class="pre">...],</span> <span class="pre">--iter_max</span> <span class="pre">MAX_ITERS</span> <span class="pre">[MAX_ITERS</span> <span class="pre">...]</span></code></dt><dd><p>Specifies LDPC decoder operations maximum number of iterations for throughput
and bler tests. If not specified iter_max is set to 6.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">SNR</span> <span class="pre">[SNR</span> <span class="pre">...],</span> <span class="pre">--snr</span> <span class="pre">SNR</span> <span class="pre">[SNR</span> <span class="pre">...]</span></code></dt><dd><p>Specifies for LDPC decoder operations the SNR in dB used when generating LLRs
for bler tests. If not specified snr is set to 0 dB.</p>
</dd>
</dl>
</div>
<div class="section" id="test-cases">
<h3><span class="section-number">7.1.2. </span>Test Cases</h3>
<p>There are 7 main test cases that can be executed using testbbdev tool:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Sanity checks [-c unittest]</dt><dd><ul>
<li><p>Performs sanity checks on BBDEV interface, validating basic functionality</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Validation tests [-c validation]</dt><dd><ul>
<li><p>Performs full operation of enqueue and dequeue</p></li>
<li><p>Compares the dequeued data buffer with a expected values in the test
vector (TV) being used</p></li>
<li><p>Fails if any dequeued value does not match the data in the TV</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Offload Cost measurement [-c offload]</dt><dd><ul>
<li><p>Measures the CPU cycles consumed from the receipt of a user enqueue
until it is put on the device queue</p></li>
<li><dl class="simple">
<dt>The test measures 4 metrics</dt><dd><ol class="loweralpha simple">
<li><p><em>SW Enq Offload Cost</em>: Software only enqueue offload cost, the cycle
counts and time (us) from the point the enqueue API is called until
the point the operation is put on the accelerator queue.</p></li>
<li><p><em>Acc Enq Offload Cost</em>: The cycle count and time (us) from the
point the operation is put on the accelerator queue until the return
from enqueue.</p></li>
<li><p><em>SW Deq Offload Cost</em>: Software dequeue cost, the cycle counts and
time (us) consumed to dequeue one operation.</p></li>
<li><p><em>Empty Queue Enq Offload Cost</em>: The cycle count and time (us)
consumed to dequeue from an empty queue.</p></li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Latency measurement [-c latency]</dt><dd><ul>
<li><p>Measures the time consumed from the first enqueue until the first
appearance of a dequeued result</p></li>
<li><p>This measurement represents the full latency of a bbdev operation
(encode or decode) to execute</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Poll-mode Throughput measurement [-c throughput]</dt><dd><ul>
<li><p>Performs full operation of enqueue and dequeue</p></li>
<li><p>Executes in poll mode</p></li>
<li><p>Measures the achieved throughput on a subset or all available CPU cores</p></li>
<li><p>Dequeued data is not validated against expected values stored in TV</p></li>
<li><p>Results are printed in million operations per second and million bits
per second</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>BLER measurement [-c bler]</dt><dd><ul>
<li><p>Performs full operation of enqueue and dequeue</p></li>
<li><p>Measures the achieved throughput on a subset or all available CPU cores</p></li>
<li><p>Computed BLER (Block Error Rate, ratio of blocks not decoded at a given
SNR) in % based on the total number of operations.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Interrupt-mode Throughput [-c interrupt]</dt><dd><ul>
<li><p>Similar to Throughput test case, but using interrupts. No polling.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="parameter-globbing">
<h3><span class="section-number">7.1.3. </span>Parameter Globbing</h3>
<p>Thanks to the globbing functionality in python test-bbdev.py script allows to
run tests with different set of vector files without giving all of them explicitly.</p>
<p><strong>Example usage for 4G:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./test-bbdev.py -v app/test-bbdev/test_vectors/turbo_&lt;enc/dec&gt;_c&lt;c&gt;_k&lt;k&gt;_r&lt;r&gt;_e&lt;e&gt;_&lt;extra-info&gt;.data</span>
</pre></div>
</div>
<p>It runs all tests with following vectors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bbdev_null.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e34560_sbd_negllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k40_r0_e1196_rm.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c2_k5952_r0_e17868_crc24b.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k40_r0_e17280_sbd_negllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e34560_sbd_posllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k40_r0_e272_rm.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c3_k4800_r2_e14412_crc24b.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e10376_crc24b_sbd_negllr_high_snr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c2_k3136_r0_e4920_sbd_negllr_crc24b.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k6144_r0_e120_rm_rvidx.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c4_k4800_r2_e14412_crc24b.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e10376_crc24b_sbd_negllr_low_snr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c2_k3136_r0_e4920_sbd_negllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k6144_r0_e18444.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e34560_negllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k40_r0_e1190_rm.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k6144_r0_e18448_crc24a.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e34560_posllr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k40_r0_e1194_rm.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k6144_r0_e32256_crc24b_rm.data</span></code></p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./test-bbdev.py -v app/test-bbdev/turbo_*_default.data</span>
</pre></div>
</div>
<p>It runs all tests with “default” vectors.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_dec_default.data</span></code> is a soft link to
<code class="docutils literal notranslate"><span class="pre">turbo_dec_c1_k6144_r0_e10376_crc24b_sbd_negllr_high_snr.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">turbo_enc_default.data</span></code> is a soft link to
<code class="docutils literal notranslate"><span class="pre">turbo_enc_c1_k6144_r0_e32256_crc24b_rm.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ldpc_dec_default.data</span></code> is a soft link to
<code class="docutils literal notranslate"><span class="pre">ldpc_dec_v6563.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ldpc_enc_default.data</span></code> is a soft link to
<code class="docutils literal notranslate"><span class="pre">ldpc_enc_c1_k8148_r0_e9372_rm.data</span></code></p></li>
</ul>
</div>
</div>
<div class="section" id="running-tests">
<h2><span class="section-number">7.2. </span>Running Tests</h2>
<p>All default reference test-vectors are stored in the test_vector
directory below.
The prefix trivially defines which type of operation is included :
turbo_enc, turbo_dec, ldpc_enc, ldpc_dec.
The details of the configuration are captured in the file but some
vector name refer more explicitly processing specificity such as
‘HARQ’ when HARQ retransmission is used, ‘loopback’ when the data
is purely read/written for external DDR, lbrm when limited buffer
rate matching is expected, or crc_fail when a CRC failure is expected.
They are chosen to have a good coverage across sizes and processing
parameters while still keeping their number limited as part of sanity
regression.</p>
<p>Shortened tree of isg_cid-wireless_dpdk_ae with dpdk compiled and output
to the build directory:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>|-- app
    |-- test-bbdev
        |-- test_vectors

|-- build
    |-- app
        |-- dpdk-test-bbdev
</pre></div>
</div>
<div class="section" id="all-bbdev-devices">
<h3><span class="section-number">7.2.1. </span>All bbdev devices</h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./test-bbdev.py -p ../../build/app/dpdk-test-bbdev</span>
<span class="go">-v turbo_dec_default.data</span>
</pre></div>
</div>
<p>It runs all available tests using the test vector filled based on
<em>turbo_dec_default.data</em> file.
By default number of operations to process on device is set to 32, timeout is
set to 300s and operations enqueue/dequeue burst size is set to 32.
Moreover a bbdev (<em>baseband_null</em>) device will be created.</p>
</div>
<div class="section" id="baseband-turbo-sw-device">
<h3><span class="section-number">7.2.2. </span>baseband turbo_sw device</h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./test-bbdev.py -p ../../build/app/dpdk-test-bbdev</span>
<span class="go">-e=&quot;--vdev=baseband_turbo_sw&quot; -t 120 -c validation</span>
<span class="go">-v ./test_vectors/* -n 64 -b 8 32</span>
</pre></div>
</div>
<p>It runs <strong>validation</strong> test for each vector file that matches the given pattern.
Number of operations to process on device is set to 64 and operations timeout is
set to 120s and enqueue/dequeue burst size is set to 8 and to 32.
Moreover a bbdev (<em>baseband_turbo_sw</em>) device will be created.</p>
</div>
<div class="section" id="bbdev-null-device">
<h3><span class="section-number">7.2.3. </span>bbdev null device</h3>
<p>Executing bbdev null device with <em>bbdev_null.data</em> helps in measuring the
overhead introduced by the bbdev framework.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./test-bbdev.py -e=&quot;--vdev=baseband_null0&quot;</span>
<span class="go">-v ./test_vectors/bbdev_null.data</span>
</pre></div>
</div>
<p><strong>Note:</strong></p>
<p>baseband_null device does not have to be defined explicitly as it is created by default.</p>
</div>
</div>
<div class="section" id="test-vector-files">
<h2><span class="section-number">7.3. </span>Test Vector files</h2>
<p>Test Vector files contain the data which is used to set turbo decoder/encoder
parameters and buffers for validation purpose. New test vector files should be
stored in <code class="docutils literal notranslate"><span class="pre">app/test-bbdev/test_vectors/</span></code> directory. Detailed description of
the syntax of the test vector files is in the following section.</p>
<div class="section" id="basic-principles-for-test-vector-files">
<h3><span class="section-number">7.3.1. </span>Basic principles for test vector files</h3>
<p>Line started with <code class="docutils literal notranslate"><span class="pre">#</span></code> is treated as a comment and is ignored.</p>
<p>If variable is a chain of values, values should be separated by a comma. If
assignment is split into several lines, each line (except the last one) has to
be ended with a comma.
There is no comma after last value in last line. Correct assignment should
look like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>variable =
value, value, value, value,
value, value
</pre></div>
</div>
<p>In case where variable is a single value correct assignment looks like the
following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>variable =
value
</pre></div>
</div>
<p>Length of chain variable is calculated by parser. Can not be defined
explicitly.</p>
<p>Variable op_type has to be defined as a first variable in file. It specifies
what type of operations will be executed. For 4G decoder op_type has to be set to
<code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_TURBO_DEC</span></code> and for 4G encoder to <code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_TURBO_ENC</span></code>.</p>
<p>Full details of the meaning and valid values for the below fields are
documented in <em>rte_bbdev_op.h</em></p>
</div>
<div class="section" id="turbo-decoder-test-vectors-template">
<h3><span class="section-number">7.3.2. </span>Turbo decoder test vectors template</h3>
<p>For turbo decoder it has to be always set to <code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_TURBO_DEC</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_type =
RTE_BBDEV_OP_TURBO_DEC
</pre></div>
</div>
<p>Chain of uint32_t values. Note that it is possible to define more than one
input/output entries which will result in chaining two or more data structures
for <em>segmented Transport Blocks</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input0 =
0x00000000, 0x7f817f00, 0x7f7f8100, 0x817f8100, 0x81008100, 0x7f818100, 0x81817f00, 0x7f818100,
0x81007f00, 0x7f818100, 0x817f8100, 0x81817f00, 0x81008100, 0x817f7f00, 0x7f7f8100, 0x81817f00
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input1 =
0x7f7f0000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input2 =
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hard_output0 =
0xa7d6732e
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hard_output1 =
0xa61
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>soft_output0 =
0x817f817f, 0x7f817f7f, 0x81818181, 0x817f7f81, 0x7f818181, 0x8181817f, 0x817f817f, 0x8181817f
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>soft_output1 =
0x817f7f81, 0x7f7f7f81, 0x7f7f8181
</pre></div>
</div>
<p>uint32_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e =
44
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>k =
40
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rv_index =
0
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iter_max =
8
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iter_min =
4
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_iter_count =
8
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ext_scale =
15
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>num_maps =
0
</pre></div>
</div>
<p>Chain of flags for LDPC decoder operation based on the rte_bbdev_op_td_flag_bitmasks:</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_flags =
RTE_BBDEV_TURBO_SUBBLOCK_DEINTERLEAVE, RTE_BBDEV_TURBO_EQUALIZER,
RTE_BBDEV_TURBO_SOFT_OUTPUT
</pre></div>
</div>
</div></blockquote>
<p>Chain of operation statuses that are expected after operation is performed.
Following statuses can be used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FCW</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRC</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">OK</span></code> means no errors are expected. Cannot be used with other values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_status =
FCW, CRC
</pre></div>
</div>
</div>
<div class="section" id="turbo-encoder-test-vectors-template">
<h3><span class="section-number">7.3.3. </span>Turbo encoder test vectors template</h3>
<p>For turbo encoder it has to be always set to <code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_TURBO_ENC</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_type =
RTE_BBDEV_OP_TURBO_ENC
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input0 =
0x11d2bcac, 0x4d
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>output0 =
0xd2399179, 0x640eb999, 0x2cbaf577, 0xaf224ae2, 0x9d139927, 0xe6909b29,
0xa25b7f47, 0x2aa224ce, 0x79f2
</pre></div>
</div>
<p>uint32_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e =
272
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>k =
40
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ncb =
192
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rv_index =
0
</pre></div>
</div>
<p>Chain of flags for LDPC decoder operation based on the rte_bbdev_op_te_flag_bitmasks:</p>
<p><code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_TURBO_ENC_SCATTER_GATHER</span></code> is used to indicate the parser to
force the input data to be memory split and formed as a segmented mbuf.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_flags =
RTE_BBDEV_TURBO_RATE_MATCH
</pre></div>
</div>
<p>Chain of operation statuses that are expected after operation is performed.
Following statuses can be used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FCW</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">OK</span></code> means no errors are expected. Cannot be used with other values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_status =
OK
</pre></div>
</div>
</div>
<div class="section" id="ldpc-decoder-test-vectors-template">
<h3><span class="section-number">7.3.4. </span>LDPC decoder test vectors template</h3>
<p>For LDPC decoder it has to be always set to <code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_LDPC_DEC</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_type =
RTE_BBDEV_OP_LDPC_DEC
</pre></div>
</div>
<p>Chain of uint32_t values. Note that it is possible to define more than one
input/output entries which will result in chaining two or more data structures
for <em>segmented Transport Blocks</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input0 =
0x00000000, 0x7f817f00, 0x7f7f8100, 0x817f8100, 0x81008100, 0x7f818100, 0x81817f00, 0x7f818100,
0x81007f00, 0x7f818100, 0x817f8100, 0x81817f00, 0x81008100, 0x817f7f00, 0x7f7f8100, 0x81817f00
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>output0 =
0xa7d6732e
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>basegraph=
1
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>z_c=
224
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_cb=
14784
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>q_m=
1
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_filler=
40
</pre></div>
</div>
<p>uint32_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e=
13072
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rv_index=
2
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>code_block_mode=
1
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>iter_max=
20
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_iter_count=
8
</pre></div>
</div>
<p>Chain of flags for LDPC decoder operation based on the rte_bbdev_op_ldpcdec_flag_bitmasks:</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_flags =
RTE_BBDEV_LDPC_ITERATION_STOP_ENABLE, RTE_BBDEV_LDPC_HQ_COMBINE_OUT_ENABLE,
RTE_BBDEV_LDPC_HQ_COMBINE_IN_ENABLE, RTE_BBDEV_LDPC_HARQ_6BIT_COMPRESSION
</pre></div>
</div>
</div></blockquote>
<p>Chain of operation statuses that are expected after operation is performed.
Following statuses can be used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code> : No error reported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYN</span></code> : LDPC syndrome parity check is failing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CRC</span></code> : CRC parity check is failing when CRC check operation is included.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SYNCRC</span></code> : Both CRC and LDPC syndromes parity checks are failing.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">OK</span></code> means no errors are expected. Cannot be used with other values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_status =
CRC
</pre></div>
</div>
</div>
<div class="section" id="ldpc-encoder-test-vectors-template">
<h3><span class="section-number">7.3.5. </span>LDPC encoder test vectors template</h3>
<p>For turbo encoder it has to be always set to <code class="docutils literal notranslate"><span class="pre">RTE_BBDEV_OP_LDPC_ENC</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_type =
RTE_BBDEV_OP_LDPC_ENC
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>input0 =
0x11d2bcac, 0x4d
</pre></div>
</div>
<p>Chain of uint32_t values</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>output0 =
0xd2399179, 0x640eb999, 0x2cbaf577, 0xaf224ae2, 0x9d139927, 0xe6909b29,
0xa25b7f47, 0x2aa224ce, 0x79f2
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>basegraph=
1
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>z_c=
52
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_cb=
3432
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>q_m=
6
</pre></div>
</div>
<p>uint16_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n_filler=
0
</pre></div>
</div>
<p>uint32_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e =
1380
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rv_index =
1
</pre></div>
</div>
<p>uint8_t value</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>code_block_mode =
1
</pre></div>
</div>
<p>Chain of flags for LDPC encoder operation based on the
rte_bbdev_op_ldpcenc_flag_bitmasks:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>op_flags =
RTE_BBDEV_LDPC_RATE_MATCH
</pre></div>
</div>
<p>Chain of operation statuses that are expected after operation is performed.
Following statuses can be used:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DMA</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FCW</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OK</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">OK</span></code> means no errors are expected. Cannot be used with other values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expected_status =
OK
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="cryptoperf.html" class="btn btn-neutral float-right" title="8. dpdk-test-crypto-perf Application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="flow-perf.html" class="btn btn-neutral float-left" title="6. Flow Performance Tool" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>