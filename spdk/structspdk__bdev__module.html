<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/xhtml; charset=utf-8">
  <meta name="generator" content="Doxygen 1.8.20">
  <title>SPDK: spdk_bdev_module Struct Reference</title>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="two.min.js"></script>
  <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,900" type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="tabs.css" type="text/css">
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container-fluid">
  <div id="top">  <!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('structspdk__bdev__module.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">spdk_bdev_module Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Block device module.  
 <a href="structspdk__bdev__module.html#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for spdk_bdev_module:</div>
<div class="dyncontent">
<div class="center"><img src="structspdk__bdev__module__coll__graph.png" border="0" usemap="#aspdk__bdev__module_coll__map" alt="Collaboration graph"/></div>
<map name="spdk__bdev__module_coll__map" id="aspdk__bdev__module_coll__map">
<area shape="rect" title="Block device module." alt="" coords="19,124,154,151"/>
<area shape="rect" href="structspdk__bdev__module_1_1____bdev__module__internal__fields.html" title="Fields that are used by the internal bdev subsystem." alt="" coords="5,5,168,61"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module_1_1____bdev__module__internal__fields.html">__bdev_module_internal_fields</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fields that are used by the internal bdev subsystem.  <a href="structspdk__bdev__module_1_1____bdev__module__internal__fields.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a1f13de8e5d02c74738c6119cedde3c53"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a1f13de8e5d02c74738c6119cedde3c53">module_init</a> )(void)</td></tr>
<tr class="memdesc:a1f13de8e5d02c74738c6119cedde3c53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization function for the module.  <a href="structspdk__bdev__module.html#a1f13de8e5d02c74738c6119cedde3c53">More...</a><br /></td></tr>
<tr class="separator:a1f13de8e5d02c74738c6119cedde3c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0eb0fbec1bdc7813911e981357e89a8"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#af0eb0fbec1bdc7813911e981357e89a8">init_complete</a> )(void)</td></tr>
<tr class="memdesc:af0eb0fbec1bdc7813911e981357e89a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional callback for modules that require notification of when the bdev subsystem has completed initialization.  <a href="structspdk__bdev__module.html#af0eb0fbec1bdc7813911e981357e89a8">More...</a><br /></td></tr>
<tr class="separator:af0eb0fbec1bdc7813911e981357e89a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac23941435e8ed54a66a16d4fe8b7fe52"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#ac23941435e8ed54a66a16d4fe8b7fe52">fini_start</a> )(void)</td></tr>
<tr class="memdesc:ac23941435e8ed54a66a16d4fe8b7fe52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optional callback for modules that require notification of when the bdev subsystem is starting the fini process.  <a href="structspdk__bdev__module.html#ac23941435e8ed54a66a16d4fe8b7fe52">More...</a><br /></td></tr>
<tr class="separator:ac23941435e8ed54a66a16d4fe8b7fe52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae807abce0f70eafe6ca75435f4f3d5b1"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#ae807abce0f70eafe6ca75435f4f3d5b1">module_fini</a> )(void)</td></tr>
<tr class="memdesc:ae807abce0f70eafe6ca75435f4f3d5b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish function for the module.  <a href="structspdk__bdev__module.html#ae807abce0f70eafe6ca75435f4f3d5b1">More...</a><br /></td></tr>
<tr class="separator:ae807abce0f70eafe6ca75435f4f3d5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f46d0a9b8ead0a63e1f5637dacd37d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a62f46d0a9b8ead0a63e1f5637dacd37d">config_text</a> )(FILE *fp)</td></tr>
<tr class="memdesc:a62f46d0a9b8ead0a63e1f5637dacd37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to return a text string representing the module's configuration options for inclusion in a configuration file.  <a href="structspdk__bdev__module.html#a62f46d0a9b8ead0a63e1f5637dacd37d">More...</a><br /></td></tr>
<tr class="separator:a62f46d0a9b8ead0a63e1f5637dacd37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e9535f64f9807afa310c63dd4675a8c"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a0e9535f64f9807afa310c63dd4675a8c">config_json</a> )(struct spdk_json_write_ctx *w)</td></tr>
<tr class="memdesc:a0e9535f64f9807afa310c63dd4675a8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called to return a text string representing the module-level JSON RPCs required to regenerate the current configuration.  <a href="structspdk__bdev__module.html#a0e9535f64f9807afa310c63dd4675a8c">More...</a><br /></td></tr>
<tr class="separator:a0e9535f64f9807afa310c63dd4675a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61730b751caac0b4fb3f343460789a0b"><td class="memItemLeft" align="right" valign="top"><a id="a61730b751caac0b4fb3f343460789a0b"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a61730b751caac0b4fb3f343460789a0b">name</a></td></tr>
<tr class="memdesc:a61730b751caac0b4fb3f343460789a0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name for the modules being defined. <br /></td></tr>
<tr class="separator:a61730b751caac0b4fb3f343460789a0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a490337d850141809c1cc930fb7b2e552"><td class="memItemLeft" align="right" valign="top"><a id="a490337d850141809c1cc930fb7b2e552"></a>
int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a490337d850141809c1cc930fb7b2e552">get_ctx_size</a> )(void)</td></tr>
<tr class="memdesc:a490337d850141809c1cc930fb7b2e552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the allocation size required for the backend for uses such as local command structs, local SGL, iovecs, or other user context. <br /></td></tr>
<tr class="separator:a490337d850141809c1cc930fb7b2e552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0f5d5d762258471ba6e41119b9f921"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a0a0f5d5d762258471ba6e41119b9f921">examine_config</a> )(struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev)</td></tr>
<tr class="memdesc:a0a0f5d5d762258471ba6e41119b9f921"><td class="mdescLeft">&#160;</td><td class="mdescRight">First notification that a bdev should be examined by a virtual bdev module.  <a href="structspdk__bdev__module.html#a0a0f5d5d762258471ba6e41119b9f921">More...</a><br /></td></tr>
<tr class="separator:a0a0f5d5d762258471ba6e41119b9f921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e49a0bccf1b515e51afbde09f8ac35"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#a18e49a0bccf1b515e51afbde09f8ac35">examine_disk</a> )(struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev)</td></tr>
<tr class="memdesc:a18e49a0bccf1b515e51afbde09f8ac35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second notification that a bdev should be examined by a virtual bdev module.  <a href="structspdk__bdev__module.html#a18e49a0bccf1b515e51afbde09f8ac35">More...</a><br /></td></tr>
<tr class="separator:a18e49a0bccf1b515e51afbde09f8ac35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a57fb52458d82248fac0570c80cc52"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#af3a57fb52458d82248fac0570c80cc52">async_init</a></td></tr>
<tr class="memdesc:af3a57fb52458d82248fac0570c80cc52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Denotes if the module_init function may complete asynchronously.  <a href="structspdk__bdev__module.html#af3a57fb52458d82248fac0570c80cc52">More...</a><br /></td></tr>
<tr class="separator:af3a57fb52458d82248fac0570c80cc52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac702870ef6b1865ad85a606021e0f039"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structspdk__bdev__module.html#ac702870ef6b1865ad85a606021e0f039">async_fini</a></td></tr>
<tr class="memdesc:ac702870ef6b1865ad85a606021e0f039"><td class="mdescLeft">&#160;</td><td class="mdescRight">Denotes if the module_fini function may complete asynchronously.  <a href="structspdk__bdev__module.html#ac702870ef6b1865ad85a606021e0f039">More...</a><br /></td></tr>
<tr class="separator:ac702870ef6b1865ad85a606021e0f039"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ce26cd4bef3b1f59982d983129d3b38"><td class="memItemLeft" align="right" valign="top"><a id="a6ce26cd4bef3b1f59982d983129d3b38"></a>
struct <a class="el" href="structspdk__bdev__module_1_1____bdev__module__internal__fields.html">spdk_bdev_module::__bdev_module_internal_fields</a>&#160;</td><td class="memItemRight" valign="bottom"><b>internal</b></td></tr>
<tr class="separator:a6ce26cd4bef3b1f59982d983129d3b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Block device module. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="ac702870ef6b1865ad85a606021e0f039"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac702870ef6b1865ad85a606021e0f039">&#9670;&nbsp;</a></span>async_fini</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spdk_bdev_module::async_fini</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Denotes if the module_fini function may complete asynchronously. </p>
<p>If set to true finishing has to be explicitly completed by calling spdk_bdev_module_fini_done(). </p>

</div>
</div>
<a id="af3a57fb52458d82248fac0570c80cc52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a57fb52458d82248fac0570c80cc52">&#9670;&nbsp;</a></span>async_init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool spdk_bdev_module::async_init</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Denotes if the module_init function may complete asynchronously. </p>
<p>If set to true, the module initialization has to be explicitly completed by calling <a class="el" href="bdev__module_8h.html#a3a32d238f1617d87d407451e3874f1d1" title="Indicate to the bdev layer that the module is done initializing.">spdk_bdev_module_init_done()</a>. </p>

</div>
</div>
<a id="a0e9535f64f9807afa310c63dd4675a8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e9535f64f9807afa310c63dd4675a8c">&#9670;&nbsp;</a></span>config_json</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* spdk_bdev_module::config_json) (struct spdk_json_write_ctx *w)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called to return a text string representing the module-level JSON RPCs required to regenerate the current configuration. </p>
<p>This will include module-level configuration options, or methods to construct bdevs when one RPC may generate multiple bdevs (for example, an NVMe controller with multiple namespaces).</p>
<p>Per-bdev JSON RPCs (where one "construct" RPC always creates one bdev) may be implemented here, or by the bdev's write_config_json function - but not both. Bdev module implementers may choose which mechanism to use based on the module's design.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success or Bdev specific negative error code. </dd></dl>

</div>
</div>
<a id="a62f46d0a9b8ead0a63e1f5637dacd37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62f46d0a9b8ead0a63e1f5637dacd37d">&#9670;&nbsp;</a></span>config_text</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::config_text) (FILE *fp)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called to return a text string representing the module's configuration options for inclusion in a configuration file. </p>
<p>(Deprecated and shall not be called by bdev layer) </p>

</div>
</div>
<a id="a0a0f5d5d762258471ba6e41119b9f921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a0f5d5d762258471ba6e41119b9f921">&#9670;&nbsp;</a></span>examine_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::examine_config) (struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>First notification that a bdev should be examined by a virtual bdev module. </p>
<p>Virtual bdev modules may use this to examine newly-added bdevs and automatically create their own vbdevs, but no I/O to device can be send to bdev at this point. Only vbdevs based on config files can be created here. This callback must make its decision to claim the module synchronously. It must also call <a class="el" href="bdev__module_8h.html#ad6ae712eb81a37a739cb82ca474e793b" title="Indicate to the bdev layer that the module is done examining a bdev.">spdk_bdev_module_examine_done()</a> before returning. If the module needs to perform asynchronous operations such as I/O after claiming the bdev, it may define an examine_disk callback. The examine_disk callback will then be called immediately after the examine_config callback returns. </p>

</div>
</div>
<a id="a18e49a0bccf1b515e51afbde09f8ac35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e49a0bccf1b515e51afbde09f8ac35">&#9670;&nbsp;</a></span>examine_disk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::examine_disk) (struct <a class="el" href="structspdk__bdev.html">spdk_bdev</a> *bdev)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Second notification that a bdev should be examined by a virtual bdev module. </p>
<p>Virtual bdev modules may use this to examine newly-added bdevs and automatically create their own vbdevs. This callback may use I/O operations end finish asynchronously. </p>

</div>
</div>
<a id="ac23941435e8ed54a66a16d4fe8b7fe52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac23941435e8ed54a66a16d4fe8b7fe52">&#9670;&nbsp;</a></span>fini_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::fini_start) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional callback for modules that require notification of when the bdev subsystem is starting the fini process. </p>
<p>Modules are not required to define this function. </p>

</div>
</div>
<a id="af0eb0fbec1bdc7813911e981357e89a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0eb0fbec1bdc7813911e981357e89a8">&#9670;&nbsp;</a></span>init_complete</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::init_complete) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optional callback for modules that require notification of when the bdev subsystem has completed initialization. </p>
<p>Modules are not required to define this function. </p>

</div>
</div>
<a id="ae807abce0f70eafe6ca75435f4f3d5b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae807abce0f70eafe6ca75435f4f3d5b1">&#9670;&nbsp;</a></span>module_fini</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* spdk_bdev_module::module_fini) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish function for the module. </p>
<p>Called by the spdk application after all bdevs for all modules have been unregistered. This allows the module to do any final cleanup before the SPDK application exits.</p>
<p>Modules are not required to define this function. </p>

</div>
</div>
<a id="a1f13de8e5d02c74738c6119cedde3c53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f13de8e5d02c74738c6119cedde3c53">&#9670;&nbsp;</a></span>module_init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* spdk_bdev_module::module_init) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization function for the module. </p>
<p>Called by the spdk application during startup.</p>
<p>Modules are required to define this function. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="bdev__module_8h.html">bdev_module.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
</div>
